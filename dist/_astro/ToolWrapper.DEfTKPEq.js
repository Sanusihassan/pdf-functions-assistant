import{j as C}from"./jsx-runtime.6DIwHBa3.js";import{r as tf,R as Sl,a as et,g as ar,b as A}from"./index.YJ4bif5W.js";/* empty css                       */import{a as jr,j as ef,c as nf}from"./index.BbbEk6n8.js";import{r as rf}from"./index.DyR-HU5a.js";var Us={exports:{}},qs={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cl;function sf(){if(Cl)return qs;Cl=1;var n=tf();function t(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var e=typeof Object.is=="function"?Object.is:t,i=n.useSyncExternalStore,r=n.useRef,s=n.useEffect,a=n.useMemo,o=n.useDebugValue;return qs.useSyncExternalStoreWithSelector=function(l,c,u,d,h){var p=r(null);if(p.current===null){var f={hasValue:!1,value:null};p.current=f}else f=p.current;p=a(function(){function v(x){if(!g){if(g=!0,b=x,x=d(x),h!==void 0&&f.hasValue){var E=f.value;if(h(E,x))return y=E}return y=x}if(E=y,e(b,x))return E;var S=d(x);return h!==void 0&&h(E,S)?E:(b=x,y=S)}var g=!1,b,y,w=u===void 0?null:u;return[function(){return v(c())},w===null?void 0:function(){return v(w())}]},[c,u,d,h]);var m=i(l,p[0],p[1]);return s(function(){f.hasValue=!0,f.value=m},[m]),o(m),m},qs}var _l;function af(){return _l||(_l=1,Us.exports=sf()),Us.exports}var of=af(),ge="default"in Sl?et:Sl,Tl=Symbol.for("react-redux-context"),Rl=typeof globalThis<"u"?globalThis:{};function lf(){if(!ge.createContext)return{};const n=Rl[Tl]??(Rl[Tl]=new Map);let t=n.get(ge.createContext);return t||(t=ge.createContext(null),n.set(ge.createContext,t)),t}var Sn=lf(),cf=()=>{throw new Error("uSES not initialized!")};function go(n=Sn){return function(){return ge.useContext(n)}}var Ku=go(),Yu=cf,uf=n=>{Yu=n},df=(n,t)=>n===t;function hf(n=Sn){const t=n===Sn?Ku:go(n),e=(i,r={})=>{const{equalityFn:s=df,devModeChecks:a={}}=typeof r=="function"?{equalityFn:r}:r,{store:o,subscription:l,getServerState:c,stabilityCheck:u,identityFunctionCheck:d}=t();ge.useRef(!0);const h=ge.useCallback({[i.name](f){return i(f)}}[i.name],[i,u,a.stabilityCheck]),p=Yu(l.addNestedSub,o.getState,c||o.getState,h,s);return ge.useDebugValue(p),p};return Object.assign(e,{withTypes:()=>e}),e}var jt=hf();function pf(n){n()}function ff(){let n=null,t=null;return{clear(){n=null,t=null},notify(){pf(()=>{let e=n;for(;e;)e.callback(),e=e.next})},get(){const e=[];let i=n;for(;i;)e.push(i),i=i.next;return e},subscribe(e){let i=!0;const r=t={callback:e,next:null,prev:t};return r.prev?r.prev.next=r:n=r,function(){!i||n===null||(i=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:n=r.next)}}}}var Dl={notify(){},get:()=>[]};function mf(n,t){let e,i=Dl,r=0,s=!1;function a(m){u();const v=i.subscribe(m);let g=!1;return()=>{g||(g=!0,v(),d())}}function o(){i.notify()}function l(){f.onStateChange&&f.onStateChange()}function c(){return s}function u(){r++,e||(e=n.subscribe(l),i=ff())}function d(){r--,e&&r===0&&(e(),e=void 0,i.clear(),i=Dl)}function h(){s||(s=!0,u())}function p(){s&&(s=!1,d())}const f={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>i};return f}var gf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vf=typeof navigator<"u"&&navigator.product==="ReactNative",bf=gf||vf?ge.useLayoutEffect:ge.useEffect;function yf({store:n,context:t,children:e,serverState:i,stabilityCheck:r="once",identityFunctionCheck:s="once"}){const a=ge.useMemo(()=>{const c=mf(n);return{store:n,subscription:c,getServerState:i?()=>i:void 0,stabilityCheck:r,identityFunctionCheck:s}},[n,i,r,s]),o=ge.useMemo(()=>n.getState(),[n]);bf(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==n.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,o]);const l=t||Sn;return ge.createElement(l.Provider,{value:a},e)}var xf=yf;function Ju(n=Sn){const t=n===Sn?Ku:go(n),e=()=>{const{store:i}=t();return i};return Object.assign(e,{withTypes:()=>e}),e}var wf=Ju();function Af(n=Sn){const t=n===Sn?wf:Ju(n),e=()=>t().dispatch;return Object.assign(e,{withTypes:()=>e}),e}var qe=Af();uf(of.useSyncExternalStoreWithSelector);function Wt(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var Ef=typeof Symbol=="function"&&Symbol.observable||"@@observable",Pl=Ef,Gs=()=>Math.random().toString(36).substring(7).split("").join("."),Sf={INIT:`@@redux/INIT${Gs()}`,REPLACE:`@@redux/REPLACE${Gs()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Gs()}`},$r=Sf;function vo(n){if(typeof n!="object"||n===null)return!1;let t=n;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(n)===t||Object.getPrototypeOf(n)===null}function Qu(n,t,e){if(typeof n!="function")throw new Error(Wt(2));if(typeof t=="function"&&typeof e=="function"||typeof e=="function"&&typeof arguments[3]=="function")throw new Error(Wt(0));if(typeof t=="function"&&typeof e>"u"&&(e=t,t=void 0),typeof e<"u"){if(typeof e!="function")throw new Error(Wt(1));return e(Qu)(n,t)}let i=n,r=t,s=new Map,a=s,o=0,l=!1;function c(){a===s&&(a=new Map,s.forEach((v,g)=>{a.set(g,v)}))}function u(){if(l)throw new Error(Wt(3));return r}function d(v){if(typeof v!="function")throw new Error(Wt(4));if(l)throw new Error(Wt(5));let g=!0;c();const b=o++;return a.set(b,v),function(){if(g){if(l)throw new Error(Wt(6));g=!1,c(),a.delete(b),s=null}}}function h(v){if(!vo(v))throw new Error(Wt(7));if(typeof v.type>"u")throw new Error(Wt(8));if(typeof v.type!="string")throw new Error(Wt(17));if(l)throw new Error(Wt(9));try{l=!0,r=i(r,v)}finally{l=!1}return(s=a).forEach(b=>{b()}),v}function p(v){if(typeof v!="function")throw new Error(Wt(10));i=v,h({type:$r.REPLACE})}function f(){const v=d;return{subscribe(g){if(typeof g!="object"||g===null)throw new Error(Wt(11));function b(){const w=g;w.next&&w.next(u())}return b(),{unsubscribe:v(b)}},[Pl](){return this}}}return h({type:$r.INIT}),{dispatch:h,subscribe:d,getState:u,replaceReducer:p,[Pl]:f}}function Cf(n){Object.keys(n).forEach(t=>{const e=n[t];if(typeof e(void 0,{type:$r.INIT})>"u")throw new Error(Wt(12));if(typeof e(void 0,{type:$r.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Wt(13))})}function _f(n){const t=Object.keys(n),e={};for(let s=0;s<t.length;s++){const a=t[s];typeof n[a]=="function"&&(e[a]=n[a])}const i=Object.keys(e);let r;try{Cf(e)}catch(s){r=s}return function(a={},o){if(r)throw r;let l=!1;const c={};for(let u=0;u<i.length;u++){const d=i[u],h=e[d],p=a[d],f=h(p,o);if(typeof f>"u")throw o&&o.type,new Error(Wt(14));c[d]=f,l=l||f!==p}return l=l||i.length!==Object.keys(a).length,l?c:a}}function zr(...n){return n.length===0?t=>t:n.length===1?n[0]:n.reduce((t,e)=>(...i)=>t(e(...i)))}function Tf(...n){return t=>(e,i)=>{const r=t(e,i);let s=()=>{throw new Error(Wt(15))};const a={getState:r.getState,dispatch:(l,...c)=>s(l,...c)},o=n.map(l=>l(a));return s=zr(...o)(r.dispatch),{...r,dispatch:s}}}function Rf(n){return vo(n)&&"type"in n&&typeof n.type=="string"}var Zu=Symbol.for("immer-nothing"),Il=Symbol.for("immer-draftable"),Ae=Symbol.for("immer-state");function Be(n,...t){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var pi=Object.getPrototypeOf;function Wn(n){return!!n&&!!n[Ae]}function fn(n){return n?td(n)||Array.isArray(n)||!!n[Il]||!!n.constructor?.[Il]||us(n)||ds(n):!1}var Df=Object.prototype.constructor.toString();function td(n){if(!n||typeof n!="object")return!1;const t=pi(n);if(t===null)return!0;const e=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return e===Object?!0:typeof e=="function"&&Function.toString.call(e)===Df}function Hr(n,t){cs(n)===0?Reflect.ownKeys(n).forEach(e=>{t(e,n[e],n)}):n.forEach((e,i)=>t(i,e,n))}function cs(n){const t=n[Ae];return t?t.type_:Array.isArray(n)?1:us(n)?2:ds(n)?3:0}function Ra(n,t){return cs(n)===2?n.has(t):Object.prototype.hasOwnProperty.call(n,t)}function ed(n,t,e){const i=cs(n);i===2?n.set(t,e):i===3?n.add(e):n[t]=e}function Pf(n,t){return n===t?n!==0||1/n===1/t:n!==n&&t!==t}function us(n){return n instanceof Map}function ds(n){return n instanceof Set}function Nn(n){return n.copy_||n.base_}function Da(n,t){if(us(n))return new Map(n);if(ds(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const e=td(n);if(t===!0||t==="class_only"&&!e){const i=Object.getOwnPropertyDescriptors(n);delete i[Ae];let r=Reflect.ownKeys(i);for(let s=0;s<r.length;s++){const a=r[s],o=i[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(i[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[a]})}return Object.create(pi(n),i)}else{const i=pi(n);if(i!==null&&e)return{...n};const r=Object.create(i);return Object.assign(r,n)}}function bo(n,t=!1){return hs(n)||Wn(n)||!fn(n)||(cs(n)>1&&(n.set=n.add=n.clear=n.delete=If),Object.freeze(n),t&&Object.entries(n).forEach(([e,i])=>bo(i,!0))),n}function If(){Be(2)}function hs(n){return Object.isFrozen(n)}var kf={};function Vn(n){const t=kf[n];return t||Be(0,n),t}var Xi;function nd(){return Xi}function Of(n,t){return{drafts_:[],parent_:n,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function kl(n,t){t&&(Vn("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=t)}function Pa(n){Ia(n),n.drafts_.forEach(Mf),n.drafts_=null}function Ia(n){n===Xi&&(Xi=n.parent_)}function Ol(n){return Xi=Of(Xi,n)}function Mf(n){const t=n[Ae];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Ml(n,t){t.unfinalizedDrafts_=t.drafts_.length;const e=t.drafts_[0];return n!==void 0&&n!==e?(e[Ae].modified_&&(Pa(t),Be(4)),fn(n)&&(n=Ur(t,n),t.parent_||qr(t,n)),t.patches_&&Vn("Patches").generateReplacementPatches_(e[Ae].base_,n,t.patches_,t.inversePatches_)):n=Ur(t,e,[]),Pa(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),n!==Zu?n:void 0}function Ur(n,t,e){if(hs(t))return t;const i=t[Ae];if(!i)return Hr(t,(r,s)=>Ll(n,i,t,r,s,e)),t;if(i.scope_!==n)return t;if(!i.modified_)return qr(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const r=i.copy_;let s=r,a=!1;i.type_===3&&(s=new Set(r),r.clear(),a=!0),Hr(s,(o,l)=>Ll(n,i,r,o,l,e,a)),qr(n,r,!1),e&&n.patches_&&Vn("Patches").generatePatches_(i,e,n.patches_,n.inversePatches_)}return i.copy_}function Ll(n,t,e,i,r,s,a){if(Wn(r)){const o=s&&t&&t.type_!==3&&!Ra(t.assigned_,i)?s.concat(i):void 0,l=Ur(n,r,o);if(ed(e,i,l),Wn(l))n.canAutoFreeze_=!1;else return}else a&&e.add(r);if(fn(r)&&!hs(r)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;Ur(n,r),(!t||!t.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(e,i)&&qr(n,r)}}function qr(n,t,e=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&bo(t,e)}function Lf(n,t){const e=Array.isArray(n),i={type_:e?1:0,scope_:t?t.scope_:nd(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,s=yo;e&&(r=[i],s=Ki);const{revoke:a,proxy:o}=Proxy.revocable(r,s);return i.draft_=o,i.revoke_=a,o}var yo={get(n,t){if(t===Ae)return n;const e=Nn(n);if(!Ra(e,t))return Nf(n,e,t);const i=e[t];return n.finalized_||!fn(i)?i:i===Ws(n.base_,t)?(Vs(n),n.copy_[t]=Oa(i,n)):i},has(n,t){return t in Nn(n)},ownKeys(n){return Reflect.ownKeys(Nn(n))},set(n,t,e){const i=id(Nn(n),t);if(i?.set)return i.set.call(n.draft_,e),!0;if(!n.modified_){const r=Ws(Nn(n),t),s=r?.[Ae];if(s&&s.base_===e)return n.copy_[t]=e,n.assigned_[t]=!1,!0;if(Pf(e,r)&&(e!==void 0||Ra(n.base_,t)))return!0;Vs(n),ka(n)}return n.copy_[t]===e&&(e!==void 0||t in n.copy_)||Number.isNaN(e)&&Number.isNaN(n.copy_[t])||(n.copy_[t]=e,n.assigned_[t]=!0),!0},deleteProperty(n,t){return Ws(n.base_,t)!==void 0||t in n.base_?(n.assigned_[t]=!1,Vs(n),ka(n)):delete n.assigned_[t],n.copy_&&delete n.copy_[t],!0},getOwnPropertyDescriptor(n,t){const e=Nn(n),i=Reflect.getOwnPropertyDescriptor(e,t);return i&&{writable:!0,configurable:n.type_!==1||t!=="length",enumerable:i.enumerable,value:e[t]}},defineProperty(){Be(11)},getPrototypeOf(n){return pi(n.base_)},setPrototypeOf(){Be(12)}},Ki={};Hr(yo,(n,t)=>{Ki[n]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ki.deleteProperty=function(n,t){return Ki.set.call(this,n,t,void 0)};Ki.set=function(n,t,e){return yo.set.call(this,n[0],t,e,n[0])};function Ws(n,t){const e=n[Ae];return(e?Nn(e):n)[t]}function Nf(n,t,e){const i=id(t,e);return i?"value"in i?i.value:i.get?.call(n.draft_):void 0}function id(n,t){if(!(t in n))return;let e=pi(n);for(;e;){const i=Object.getOwnPropertyDescriptor(e,t);if(i)return i;e=pi(e)}}function ka(n){n.modified_||(n.modified_=!0,n.parent_&&ka(n.parent_))}function Vs(n){n.copy_||(n.copy_=Da(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var Ff=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,e,i)=>{if(typeof t=="function"&&typeof e!="function"){const s=e;e=t;const a=this;return function(l=s,...c){return a.produce(l,u=>e.call(this,u,...c))}}typeof e!="function"&&Be(6),i!==void 0&&typeof i!="function"&&Be(7);let r;if(fn(t)){const s=Ol(this),a=Oa(t,void 0);let o=!0;try{r=e(a),o=!1}finally{o?Pa(s):Ia(s)}return kl(s,i),Ml(r,s)}else if(!t||typeof t!="object"){if(r=e(t),r===void 0&&(r=t),r===Zu&&(r=void 0),this.autoFreeze_&&bo(r,!0),i){const s=[],a=[];Vn("Patches").generateReplacementPatches_(t,r,s,a),i(s,a)}return r}else Be(1,t)},this.produceWithPatches=(t,e)=>{if(typeof t=="function")return(a,...o)=>this.produceWithPatches(a,l=>t(l,...o));let i,r;return[this.produce(t,e,(a,o)=>{i=a,r=o}),i,r]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){fn(n)||Be(8),Wn(n)&&(n=Bf(n));const t=Ol(this),e=Oa(n,void 0);return e[Ae].isManual_=!0,Ia(t),e}finishDraft(n,t){const e=n&&n[Ae];(!e||!e.isManual_)&&Be(9);const{scope_:i}=e;return kl(i,t),Ml(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,t){let e;for(e=t.length-1;e>=0;e--){const r=t[e];if(r.path.length===0&&r.op==="replace"){n=r.value;break}}e>-1&&(t=t.slice(e+1));const i=Vn("Patches").applyPatches_;return Wn(n)?i(n,t):this.produce(n,r=>i(r,t))}};function Oa(n,t){const e=us(n)?Vn("MapSet").proxyMap_(n,t):ds(n)?Vn("MapSet").proxySet_(n,t):Lf(n,t);return(t?t.scope_:nd()).drafts_.push(e),e}function Bf(n){return Wn(n)||Be(10,n),rd(n)}function rd(n){if(!fn(n)||hs(n))return n;const t=n[Ae];let e;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,e=Da(n,t.scope_.immer_.useStrictShallowCopy_)}else e=Da(n,!0);return Hr(e,(i,r)=>{ed(e,i,rd(r))}),t&&(t.finalized_=!1),e}var Ee=new Ff,sd=Ee.produce;Ee.produceWithPatches.bind(Ee);Ee.setAutoFreeze.bind(Ee);Ee.setUseStrictShallowCopy.bind(Ee);Ee.applyPatches.bind(Ee);Ee.createDraft.bind(Ee);Ee.finishDraft.bind(Ee);function ad(n){return({dispatch:e,getState:i})=>r=>s=>typeof s=="function"?s(e,i,n):r(s)}var jf=ad(),$f=ad,zf=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?zr:zr.apply(null,arguments)};function Nl(n,t){function e(...i){if(t){let r=t(...i);if(!r)throw new Error(pn(0));return{type:n,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:n,payload:i[0]}}return e.toString=()=>`${n}`,e.type=n,e.match=i=>Rf(i)&&i.type===n,e}var od=class ji extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ji.prototype)}static get[Symbol.species](){return ji}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ji(...t[0].concat(this)):new ji(...t.concat(this))}};function Fl(n){return fn(n)?sd(n,()=>{}):n}function Bl(n,t,e){return n.has(t)?n.get(t):n.set(t,e(t)).get(t)}function Hf(n){return typeof n=="boolean"}var Uf=()=>function(t){const{thunk:e=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:s=!0}=t??{};let a=new od;return e&&(Hf(e)?a.push(jf):a.push($f(e.extraArgument))),a},qf="RTK_autoBatch",jl=n=>t=>{setTimeout(t,n)},Gf=(n={type:"raf"})=>t=>(...e)=>{const i=t(...e);let r=!0,s=!1,a=!1;const o=new Set,l=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:jl(10):n.type==="callback"?n.queueNotification:jl(n.timeout),c=()=>{a=!1,s&&(s=!1,o.forEach(u=>u()))};return Object.assign({},i,{subscribe(u){const d=()=>r&&u(),h=i.subscribe(d);return o.add(u),()=>{h(),o.delete(u)}},dispatch(u){try{return r=!u?.meta?.[qf],s=!r,s&&(a||(a=!0,l(c))),i.dispatch(u)}finally{r=!0}}})},Wf=n=>function(e){const{autoBatch:i=!0}=e??{};let r=new od(n);return i&&r.push(Gf(typeof i=="object"?i:void 0)),r};function Vf(n){const t=Uf(),{reducer:e=void 0,middleware:i,devTools:r=!0,preloadedState:s=void 0,enhancers:a=void 0}=n||{};let o;if(typeof e=="function")o=e;else if(vo(e))o=_f(e);else throw new Error(pn(1));let l;typeof i=="function"?l=i(t):l=t();let c=zr;r&&(c=zf({trace:!1,...typeof r=="object"&&r}));const u=Tf(...l),d=Wf(u);let h=typeof a=="function"?a(d):d();const p=c(...h);return Qu(o,s,p)}function ld(n){const t={},e=[];let i;const r={addCase(s,a){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(pn(28));if(o in t)throw new Error(pn(29));return t[o]=a,r},addMatcher(s,a){return e.push({matcher:s,reducer:a}),r},addDefaultCase(s){return i=s,r}};return n(r),[t,e,i]}function Xf(n){return typeof n=="function"}function Kf(n,t){let[e,i,r]=ld(t),s;if(Xf(n))s=()=>Fl(n());else{const o=Fl(n);s=()=>o}function a(o=s(),l){let c=[e[l.type],...i.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[r]),c.reduce((u,d)=>{if(d)if(Wn(u)){const p=d(u,l);return p===void 0?u:p}else{if(fn(u))return sd(u,h=>d(h,l));{const h=d(u,l);if(h===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return u},o)}return a.getInitialState=s,a}var Yf=Symbol.for("rtk-slice-createasyncthunk");function Jf(n,t){return`${n}/${t}`}function Qf({creators:n}={}){const t=n?.asyncThunk?.[Yf];return function(i){const{name:r,reducerPath:s=r}=i;if(!r)throw new Error(pn(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(em()):i.reducers)||{},o=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,y){const w=typeof b=="string"?b:b.type;if(!w)throw new Error(pn(12));if(w in l.sliceCaseReducersByType)throw new Error(pn(13));return l.sliceCaseReducersByType[w]=y,c},addMatcher(b,y){return l.sliceMatchers.push({matcher:b,reducer:y}),c},exposeAction(b,y){return l.actionCreators[b]=y,c},exposeCaseReducer(b,y){return l.sliceCaseReducersByName[b]=y,c}};o.forEach(b=>{const y=a[b],w={reducerName:b,type:Jf(r,b),createNotation:typeof i.reducers=="function"};im(y)?sm(w,y,c,t):nm(w,y,c)});function u(){const[b={},y=[],w=void 0]=typeof i.extraReducers=="function"?ld(i.extraReducers):[i.extraReducers],x={...b,...l.sliceCaseReducersByType};return Kf(i.initialState,E=>{for(let S in x)E.addCase(S,x[S]);for(let S of l.sliceMatchers)E.addMatcher(S.matcher,S.reducer);for(let S of y)E.addMatcher(S.matcher,S.reducer);w&&E.addDefaultCase(w)})}const d=b=>b,h=new Map;let p;function f(b,y){return p||(p=u()),p(b,y)}function m(){return p||(p=u()),p.getInitialState()}function v(b,y=!1){function w(E){let S=E[b];return typeof S>"u"&&y&&(S=m()),S}function x(E=d){const S=Bl(h,y,()=>new WeakMap);return Bl(S,E,()=>{const D={};for(const[T,L]of Object.entries(i.selectors??{}))D[T]=Zf(L,E,m,y);return D})}return{reducerPath:b,getSelectors:x,get selectors(){return x(w)},selectSlice:w}}const g={name:r,reducer:f,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:m,...v(s),injectInto(b,{reducerPath:y,...w}={}){const x=y??s;return b.inject({reducerPath:x,reducer:f},w),{...g,...v(x,!0)}}};return g}}function Zf(n,t,e,i){function r(s,...a){let o=t(s);return typeof o>"u"&&i&&(o=e()),n(o,...a)}return r.unwrapped=n,r}var tm=Qf();function em(){function n(t,e){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...e}}return n.withTypes=()=>n,{reducer(t){return Object.assign({[t.name](...e){return t(...e)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,e){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:e}},asyncThunk:n}}function nm({type:n,reducerName:t,createNotation:e},i,r){let s,a;if("reducer"in i){if(e&&!rm(i))throw new Error(pn(17));s=i.reducer,a=i.prepare}else s=i;r.addCase(n,s).exposeCaseReducer(t,s).exposeAction(t,a?Nl(n,a):Nl(n))}function im(n){return n._reducerDefinitionType==="asyncThunk"}function rm(n){return n._reducerDefinitionType==="reducerWithPrepare"}function sm({type:n,reducerName:t},e,i,r){if(!r)throw new Error(pn(18));const{payloadCreator:s,fulfilled:a,pending:o,rejected:l,settled:c,options:u}=e,d=r(n,s,u);i.exposeAction(t,d),a&&i.addCase(d.fulfilled,a),o&&i.addCase(d.pending,o),l&&i.addCase(d.rejected,l),c&&i.addMatcher(d.settled,c),i.exposeCaseReducer(t,{fulfilled:a||yr,pending:o||yr,rejected:l||yr,settled:c||yr})}function yr(){}function pn(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const am={showTool:!0,errorMessage:"",showErrorMessage:!1,isSubmitted:!1,errorCode:null,showDownloadBtn:!1,showOptions:!1,nav_height:0,prompt:"",isScanned:!1,pageCount:0},cd=tm({name:"tool",initialState:am,reducers:{resetErrorMessage(n){n.errorMessage="",n.showErrorMessage=!1,n.errorCode=null,n.isSubmitted=!1},setField(n,t){Object.keys(t.payload).forEach(e=>{const i=e,r=t.payload[i];r!==void 0&&(n[i]=r)})}}}),{resetErrorMessage:Gr,setField:ht}=cd.actions,om=cd.reducer;var Xs={exports:{}},Ks,$l;function lm(){if($l)return Ks;$l=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ks=n,Ks}var Ys,zl;function cm(){if(zl)return Ys;zl=1;var n=lm();function t(){}function e(){}return e.resetWarningCache=t,Ys=function(){function i(a,o,l,c,u,d){if(d!==n){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:e,resetWarningCache:t};return s.PropTypes=s,s},Ys}var Hl;function um(){return Hl||(Hl=1,Xs.exports=cm()()),Xs.exports}var dm=um();const gt=ar(dm);function ti(n,t,e,i){function r(s){return s instanceof e?s:new e(function(a){a(s)})}return new(e||(e=Promise))(function(s,a){function o(u){try{c(i.next(u))}catch(d){a(d)}}function l(u){try{c(i.throw(u))}catch(d){a(d)}}function c(u){u.done?s(u.value):r(u.value).then(o,l)}c((i=i.apply(n,t||[])).next())})}const hm=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function fi(n,t,e){const i=pm(n),{webkitRelativePath:r}=n,s=typeof t=="string"?t:typeof r=="string"&&r.length>0?r:`./${n.name}`;return typeof i.path!="string"&&Ul(i,"path",s),Ul(i,"relativePath",s),i}function pm(n){const{name:t}=n;if(t&&t.lastIndexOf(".")!==-1&&!n.type){const i=t.split(".").pop().toLowerCase(),r=hm.get(i);r&&Object.defineProperty(n,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return n}function Ul(n,t,e){Object.defineProperty(n,t,{value:e,writable:!1,configurable:!1,enumerable:!0})}const fm=[".DS_Store","Thumbs.db"];function mm(n){return ti(this,void 0,void 0,function*(){return Wr(n)&&gm(n.dataTransfer)?xm(n.dataTransfer,n.type):vm(n)?bm(n):Array.isArray(n)&&n.every(t=>"getFile"in t&&typeof t.getFile=="function")?ym(n):[]})}function gm(n){return Wr(n)}function vm(n){return Wr(n)&&Wr(n.target)}function Wr(n){return typeof n=="object"&&n!==null}function bm(n){return Ma(n.target.files).map(t=>fi(t))}function ym(n){return ti(this,void 0,void 0,function*(){return(yield Promise.all(n.map(e=>e.getFile()))).map(e=>fi(e))})}function xm(n,t){return ti(this,void 0,void 0,function*(){if(n.items){const e=Ma(n.items).filter(r=>r.kind==="file");if(t!=="drop")return e;const i=yield Promise.all(e.map(wm));return ql(ud(i))}return ql(Ma(n.files).map(e=>fi(e)))})}function ql(n){return n.filter(t=>fm.indexOf(t.name)===-1)}function Ma(n){if(n===null)return[];const t=[];for(let e=0;e<n.length;e++){const i=n[e];t.push(i)}return t}function wm(n){if(typeof n.webkitGetAsEntry!="function")return Gl(n);const t=n.webkitGetAsEntry();return t&&t.isDirectory?dd(t):Gl(n,t)}function ud(n){return n.reduce((t,e)=>[...t,...Array.isArray(e)?ud(e):[e]],[])}function Gl(n,t){return ti(this,void 0,void 0,function*(){var e;if(globalThis.isSecureContext&&typeof n.getAsFileSystemHandle=="function"){const s=yield n.getAsFileSystemHandle();if(s===null)throw new Error(`${n} is not a File`);if(s!==void 0){const a=yield s.getFile();return a.handle=s,fi(a)}}const i=n.getAsFile();if(!i)throw new Error(`${n} is not a File`);return fi(i,(e=t?.fullPath)!==null&&e!==void 0?e:void 0)})}function Am(n){return ti(this,void 0,void 0,function*(){return n.isDirectory?dd(n):Em(n)})}function dd(n){const t=n.createReader();return new Promise((e,i)=>{const r=[];function s(){t.readEntries(a=>ti(this,void 0,void 0,function*(){if(a.length){const o=Promise.all(a.map(Am));r.push(o),s()}else try{const o=yield Promise.all(r);e(o)}catch(o){i(o)}}),a=>{i(a)})}s()})}function Em(n){return ti(this,void 0,void 0,function*(){return new Promise((t,e)=>{n.file(i=>{const r=fi(i,n.fullPath);t(r)},i=>{e(i)})})})}var xr={},Wl;function Sm(){return Wl||(Wl=1,xr.__esModule=!0,xr.default=function(n,t){if(n&&t){var e=Array.isArray(t)?t:t.split(",");if(e.length===0)return!0;var i=n.name||"",r=(n.type||"").toLowerCase(),s=r.replace(/\/.*$/,"");return e.some(function(a){var o=a.trim().toLowerCase();return o.charAt(0)==="."?i.toLowerCase().endsWith(o):o.endsWith("/*")?s===o.replace(/\/.*$/,""):r===o})}return!0}),xr}var Cm=Sm();const Js=ar(Cm);function Vl(n){return Rm(n)||Tm(n)||pd(n)||_m()}function _m(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tm(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Rm(n){if(Array.isArray(n))return La(n)}function Xl(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Kl(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Xl(Object(e),!0).forEach(function(i){hd(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Xl(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function hd(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Yi(n,t){return Im(n)||Pm(n,t)||pd(n,t)||Dm()}function Dm(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pd(n,t){if(n){if(typeof n=="string")return La(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return La(n,t)}}function La(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function Pm(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i=[],r=!0,s=!1,a,o;try{for(e=e.call(n);!(r=(a=e.next()).done)&&(i.push(a.value),!(t&&i.length===t));r=!0);}catch(l){s=!0,o=l}finally{try{!r&&e.return!=null&&e.return()}finally{if(s)throw o}}return i}}function Im(n){if(Array.isArray(n))return n}var km=typeof Js=="function"?Js:Js.default,Om="file-invalid-type",Mm="file-too-large",Lm="file-too-small",Nm="too-many-files",Fm=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=t.split(","),i=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:Om,message:"File type must be ".concat(i)}},Yl=function(t){return{code:Mm,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},Jl=function(t){return{code:Lm,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Bm={code:Nm,message:"Too many files"};function fd(n,t){var e=n.type==="application/x-moz-file"||km(n,t);return[e,e?null:Fm(t)]}function md(n,t,e){if(jn(n.size))if(jn(t)&&jn(e)){if(n.size>e)return[!1,Yl(e)];if(n.size<t)return[!1,Jl(t)]}else{if(jn(t)&&n.size<t)return[!1,Jl(t)];if(jn(e)&&n.size>e)return[!1,Yl(e)]}return[!0,null]}function jn(n){return n!=null}function jm(n){var t=n.files,e=n.accept,i=n.minSize,r=n.maxSize,s=n.multiple,a=n.maxFiles,o=n.validator;return!s&&t.length>1||s&&a>=1&&t.length>a?!1:t.every(function(l){var c=fd(l,e),u=Yi(c,1),d=u[0],h=md(l,i,r),p=Yi(h,1),f=p[0],m=o?o(l):null;return d&&f&&!m})}function Vr(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function wr(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!n.target&&!!n.target.files}function Ql(n){n.preventDefault()}function $m(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function zm(n){return n.indexOf("Edge/")!==-1}function Hm(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return $m(n)||zm(n)}function Ye(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return function(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return t.some(function(o){return!Vr(i)&&o&&o.apply(void 0,[i].concat(s)),Vr(i)})}}function Um(){return"showOpenFilePicker"in window}function qm(n){if(jn(n)){var t=Object.entries(n).filter(function(e){var i=Yi(e,2),r=i[0],s=i[1],a=!0;return gd(r)||(console.warn('Skipped "'.concat(r,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),a=!1),(!Array.isArray(s)||!s.every(vd))&&(console.warn('Skipped "'.concat(r,'" because an invalid file extension was provided.')),a=!1),a}).reduce(function(e,i){var r=Yi(i,2),s=r[0],a=r[1];return Kl(Kl({},e),{},hd({},s,a))},{});return[{description:"Files",accept:t}]}return n}function Gm(n){if(jn(n))return Object.entries(n).reduce(function(t,e){var i=Yi(e,2),r=i[0],s=i[1];return[].concat(Vl(t),[r],Vl(s))},[]).filter(function(t){return gd(t)||vd(t)}).join(",")}function Wm(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function Vm(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}function gd(n){return n==="audio/*"||n==="video/*"||n==="image/*"||n==="text/*"||n==="application/*"||/\w+\/[-+.\w]+/g.test(n)}function vd(n){return/^.*\.[\w]+$/.test(n)}var Xm=["children"],Km=["open"],Ym=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Jm=["refKey","onChange","onClick"];function Qm(n){return eg(n)||tg(n)||bd(n)||Zm()}function Zm(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tg(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function eg(n){if(Array.isArray(n))return Na(n)}function Qs(n,t){return rg(n)||ig(n,t)||bd(n,t)||ng()}function ng(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bd(n,t){if(n){if(typeof n=="string")return Na(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Na(n,t)}}function Na(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function ig(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i=[],r=!0,s=!1,a,o;try{for(e=e.call(n);!(r=(a=e.next()).done)&&(i.push(a.value),!(t&&i.length===t));r=!0);}catch(l){s=!0,o=l}finally{try{!r&&e.return!=null&&e.return()}finally{if(s)throw o}}return i}}function rg(n){if(Array.isArray(n))return n}function Zl(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Tt(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Zl(Object(e),!0).forEach(function(i){Fa(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Zl(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Fa(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Xr(n,t){if(n==null)return{};var e=sg(n,t),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}function sg(n,t){if(n==null)return{};var e={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&(e[r]=n[r]);return e}var xo=A.forwardRef(function(n,t){var e=n.children,i=Xr(n,Xm),r=xd(i),s=r.open,a=Xr(r,Km);return A.useImperativeHandle(t,function(){return{open:s}},[s]),et.createElement(A.Fragment,null,e(Tt(Tt({},a),{},{open:s})))});xo.displayName="Dropzone";var yd={disabled:!1,getFilesFromEvent:mm,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};xo.defaultProps=yd;xo.propTypes={children:gt.func,accept:gt.objectOf(gt.arrayOf(gt.string)),multiple:gt.bool,preventDropOnDocument:gt.bool,noClick:gt.bool,noKeyboard:gt.bool,noDrag:gt.bool,noDragEventsBubbling:gt.bool,minSize:gt.number,maxSize:gt.number,maxFiles:gt.number,disabled:gt.bool,getFilesFromEvent:gt.func,onFileDialogCancel:gt.func,onFileDialogOpen:gt.func,useFsAccessApi:gt.bool,autoFocus:gt.bool,onDragEnter:gt.func,onDragLeave:gt.func,onDragOver:gt.func,onDrop:gt.func,onDropAccepted:gt.func,onDropRejected:gt.func,onError:gt.func,validator:gt.func};var Ba={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function xd(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Tt(Tt({},yd),n),e=t.accept,i=t.disabled,r=t.getFilesFromEvent,s=t.maxSize,a=t.minSize,o=t.multiple,l=t.maxFiles,c=t.onDragEnter,u=t.onDragLeave,d=t.onDragOver,h=t.onDrop,p=t.onDropAccepted,f=t.onDropRejected,m=t.onFileDialogCancel,v=t.onFileDialogOpen,g=t.useFsAccessApi,b=t.autoFocus,y=t.preventDropOnDocument,w=t.noClick,x=t.noKeyboard,E=t.noDrag,S=t.noDragEventsBubbling,D=t.onError,T=t.validator,L=A.useMemo(function(){return Gm(e)},[e]),k=A.useMemo(function(){return qm(e)},[e]),j=A.useMemo(function(){return typeof v=="function"?v:tc},[v]),R=A.useMemo(function(){return typeof m=="function"?m:tc},[m]),P=A.useRef(null),U=A.useRef(null),$=A.useReducer(ag,Ba),O=Qs($,2),M=O[0],V=O[1],at=M.isFocused,Y=M.isFileDialogActive,Q=A.useRef(typeof window<"u"&&window.isSecureContext&&g&&Um()),ut=function(){!Q.current&&Y&&setTimeout(function(){if(U.current){var q=U.current.files;q.length||(V({type:"closeDialog"}),R())}},300)};A.useEffect(function(){return window.addEventListener("focus",ut,!1),function(){window.removeEventListener("focus",ut,!1)}},[U,Y,R,Q]);var _t=A.useRef([]),Rt=function(q){P.current&&P.current.contains(q.target)||(q.preventDefault(),_t.current=[])};A.useEffect(function(){return y&&(document.addEventListener("dragover",Ql,!1),document.addEventListener("drop",Rt,!1)),function(){y&&(document.removeEventListener("dragover",Ql),document.removeEventListener("drop",Rt))}},[P,y]),A.useEffect(function(){return!i&&b&&P.current&&P.current.focus(),function(){}},[P,b,i]);var pt=A.useCallback(function(N){D?D(N):console.error(N)},[D]),rt=A.useCallback(function(N){N.preventDefault(),N.persist(),le(N),_t.current=[].concat(Qm(_t.current),[N.target]),wr(N)&&Promise.resolve(r(N)).then(function(q){if(!(Vr(N)&&!S)){var vt=q.length,Et=vt>0&&jm({files:q,accept:L,minSize:a,maxSize:s,multiple:o,maxFiles:l,validator:T}),Pt=vt>0&&!Et;V({isDragAccept:Et,isDragReject:Pt,isDragActive:!0,type:"setDraggedFiles"}),c&&c(N)}}).catch(function(q){return pt(q)})},[r,c,pt,S,L,a,s,o,l,T]),ft=A.useCallback(function(N){N.preventDefault(),N.persist(),le(N);var q=wr(N);if(q&&N.dataTransfer)try{N.dataTransfer.dropEffect="copy"}catch{}return q&&d&&d(N),!1},[d,S]),Xt=A.useCallback(function(N){N.preventDefault(),N.persist(),le(N);var q=_t.current.filter(function(Et){return P.current&&P.current.contains(Et)}),vt=q.indexOf(N.target);vt!==-1&&q.splice(vt,1),_t.current=q,!(q.length>0)&&(V({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),wr(N)&&u&&u(N))},[P,u,S]),wt=A.useCallback(function(N,q){var vt=[],Et=[];N.forEach(function(Pt){var Se=fd(Pt,L),Ce=Qs(Se,2),We=Ce[0],an=Ce[1],ee=md(Pt,a,s),At=Qs(ee,2),gn=At[0],on=At[1],Ve=T?T(Pt):null;if(We&&gn&&!Ve)vt.push(Pt);else{var ln=[an,on];Ve&&(ln=ln.concat(Ve)),Et.push({file:Pt,errors:ln.filter(function(vn){return vn})})}}),(!o&&vt.length>1||o&&l>=1&&vt.length>l)&&(vt.forEach(function(Pt){Et.push({file:Pt,errors:[Bm]})}),vt.splice(0)),V({acceptedFiles:vt,fileRejections:Et,isDragReject:Et.length>0,type:"setFiles"}),h&&h(vt,Et,q),Et.length>0&&f&&f(Et,q),vt.length>0&&p&&p(vt,q)},[V,o,L,a,s,l,h,p,f,T]),Gt=A.useCallback(function(N){N.preventDefault(),N.persist(),le(N),_t.current=[],wr(N)&&Promise.resolve(r(N)).then(function(q){Vr(N)&&!S||wt(q,N)}).catch(function(q){return pt(q)}),V({type:"reset"})},[r,wt,pt,S]),Zt=A.useCallback(function(){if(Q.current){V({type:"openDialog"}),j();var N={multiple:o,types:k};window.showOpenFilePicker(N).then(function(q){return r(q)}).then(function(q){wt(q,null),V({type:"closeDialog"})}).catch(function(q){Wm(q)?(R(q),V({type:"closeDialog"})):Vm(q)?(Q.current=!1,U.current?(U.current.value=null,U.current.click()):pt(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):pt(q)});return}U.current&&(V({type:"openDialog"}),j(),U.current.value=null,U.current.click())},[V,j,R,g,wt,pt,k,o]),te=A.useCallback(function(N){!P.current||!P.current.isEqualNode(N.target)||(N.key===" "||N.key==="Enter"||N.keyCode===32||N.keyCode===13)&&(N.preventDefault(),Zt())},[P,Zt]),Le=A.useCallback(function(){V({type:"focus"})},[]),Lt=A.useCallback(function(){V({type:"blur"})},[]),Ne=A.useCallback(function(){w||(Hm()?setTimeout(Zt,0):Zt())},[w,Zt]),$t=function(q){return i?null:q},pe=function(q){return x?null:$t(q)},lt=function(q){return E?null:$t(q)},le=function(q){S&&q.stopPropagation()},In=A.useMemo(function(){return function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=N.refKey,vt=q===void 0?"ref":q,Et=N.role,Pt=N.onKeyDown,Se=N.onFocus,Ce=N.onBlur,We=N.onClick,an=N.onDragEnter,ee=N.onDragOver,At=N.onDragLeave,gn=N.onDrop,on=Xr(N,Ym);return Tt(Tt(Fa({onKeyDown:pe(Ye(Pt,te)),onFocus:pe(Ye(Se,Le)),onBlur:pe(Ye(Ce,Lt)),onClick:$t(Ye(We,Ne)),onDragEnter:lt(Ye(an,rt)),onDragOver:lt(Ye(ee,ft)),onDragLeave:lt(Ye(At,Xt)),onDrop:lt(Ye(gn,Gt)),role:typeof Et=="string"&&Et!==""?Et:"presentation"},vt,P),!i&&!x?{tabIndex:0}:{}),on)}},[P,te,Le,Lt,Ne,rt,ft,Xt,Gt,x,E,i]),kn=A.useCallback(function(N){N.stopPropagation()},[]),On=A.useMemo(function(){return function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=N.refKey,vt=q===void 0?"ref":q,Et=N.onChange,Pt=N.onClick,Se=Xr(N,Jm),Ce=Fa({accept:L,multiple:o,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:$t(Ye(Et,Gt)),onClick:$t(Ye(Pt,kn)),tabIndex:-1},vt,U);return Tt(Tt({},Ce),Se)}},[U,e,o,Gt,i]);return Tt(Tt({},M),{},{isFocused:at&&!i,getRootProps:In,getInputProps:On,rootRef:P,inputRef:U,open:$t(Zt)})}function ag(n,t){switch(t.type){case"focus":return Tt(Tt({},n),{},{isFocused:!0});case"blur":return Tt(Tt({},n),{},{isFocused:!1});case"openDialog":return Tt(Tt({},Ba),{},{isFileDialogActive:!0});case"closeDialog":return Tt(Tt({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":return Tt(Tt({},n),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Tt(Tt({},n),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return Tt({},Ba);default:return n}}function tc(){}function og(n,t){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},n),A.createElement("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"}))}const lg=A.forwardRef(og);function cg(n,t){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},n),A.createElement("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"}))}const ug=A.forwardRef(cg);function dg(n,t){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},n),A.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"}))}const ec=A.forwardRef(dg);function hg(n,t){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},n),A.createElement("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"}))}const pg=A.forwardRef(hg);function fg(n,t){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},n),A.createElement("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"}))}const mg=A.forwardRef(fg),gg="modulepreload",vg=function(n){return"/assistant/"+n},nc={},bg=function(t,e,i){let r=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");r=Promise.allSettled(e.map(l=>{if(l=vg(l),l in nc)return;nc[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":gg,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};var Ui={};Ui.d=(n,t)=>{for(var e in t)Ui.o(t,e)&&!Ui.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})};Ui.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var K=globalThis.pdfjsLib={};Ui.d(K,{AbortException:()=>ei,AnnotationEditorLayer:()=>hn,AnnotationEditorParamsType:()=>ot,AnnotationEditorType:()=>tt,AnnotationEditorUIManager:()=>Cn,AnnotationLayer:()=>p1,AnnotationMode:()=>yn,ColorPicker:()=>ke,DOMSVGFactory:()=>ko,DrawLayer:()=>re,FeatureTest:()=>oe,GlobalWorkerOptions:()=>Gi,ImageKind:()=>Or,InvalidPDFException:()=>Ad,MissingPDFException:()=>or,OPS:()=>Fe,OutputScale:()=>Ha,PDFDataRangeTransport:()=>$d,PDFDateString:()=>Sd,PDFWorker:()=>Ht,PasswordResponses:()=>Ag,PermissionFlag:()=>wg,PixelsPerInch:()=>mi,RenderingCancelledException:()=>Eo,TextLayer:()=>se,UnexpectedResponseException:()=>gs,Util:()=>z,VerbosityLevel:()=>ps,XfaLayer:()=>Hd,build:()=>Vv,createValidAbsoluteUrl:()=>_g,fetchData:()=>bs,getDocument:()=>Bv,getFilenameFromUrl:()=>Lg,getPdfFilenameFromUrl:()=>Ng,getXfaPageViewport:()=>Fg,isDataScheme:()=>ys,isPdfFile:()=>So,noContextMenu:()=>ze,normalizeUnicode:()=>kg,setLayerDimensions:()=>Xn,shadow:()=>st,stopEvent:()=>je,version:()=>Wv});const ae=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),wd=[1,0,0,1,0,0],ja=[.001,0,0,.001,0,0],yg=1e7,Zs=1.35,me={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},yn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},xg="pdfjs_internal_editor_",tt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ot={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},wg={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Yt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Or={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ft={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ki={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},ps={ERRORS:0,WARNINGS:1,INFOS:5},Fe={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Ag={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let fs=ps.WARNINGS;function Eg(n){Number.isInteger(n)&&(fs=n)}function Sg(){return fs}function ms(n){fs>=ps.INFOS&&console.log(`Info: ${n}`)}function it(n){fs>=ps.WARNINGS&&console.log(`Warning: ${n}`)}function yt(n){throw new Error(n)}function Mt(n,t){n||yt(t)}function Cg(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function _g(n,t=null,e=null){if(!n)return null;try{if(e&&typeof n=="string"&&(e.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),e.tryConvertEncoding))try{n=Ig(n)}catch{}const i=t?new URL(n,t):new URL(n);if(Cg(i))return i}catch{}return null}function st(n,t,e,i=!1){return Object.defineProperty(n,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const Rn=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class $a extends Rn{constructor(t,e){super(t,"PasswordException"),this.code=e}}class za extends Rn{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Ad extends Rn{constructor(t){super(t,"InvalidPDFException")}}class or extends Rn{constructor(t){super(t,"MissingPDFException")}}class gs extends Rn{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class Tg extends Rn{constructor(t){super(t,"FormatError")}}class ei extends Rn{constructor(t){super(t,"AbortException")}}function Ed(n){(typeof n!="object"||n?.length===void 0)&&yt("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const i=[];for(let r=0;r<t;r+=e){const s=Math.min(r+e,t),a=n.subarray(r,s);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function vs(n){typeof n!="string"&&yt("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=n.charCodeAt(i)&255;return e}function Rg(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function wo(n){const t=Object.create(null);for(const[e,i]of n)t[e]=i;return t}function Dg(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function Pg(){try{return new Function(""),!0}catch{return!1}}class oe{static get isLittleEndian(){return st(this,"isLittleEndian",Dg())}static get isEvalSupported(){return st(this,"isEvalSupported",Pg())}static get isOffscreenCanvasSupported(){return st(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return st(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?st(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):st(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return st(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const ta=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class z{static makeHexColor(t,e,i){return`#${ta[t]}${ta[e]}${ta[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const i=t[0]*e[0]+t[1]*e[2]+e[4],r=t[0]*e[1]+t[1]*e[3]+e[5];return[i,r]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2],r=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,s=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i;return[r,s]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),r=this.applyTransform(t.slice(2,4),e),s=this.applyTransform([t[0],t[3]],e),a=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],r[0],s[0],a[0]),Math.min(i[1],r[1],s[1],a[1]),Math.max(i[0],r[0],s[0],a[0]),Math.max(i[1],r[1],s[1],a[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],r=t[0]*e[1]+t[1]*e[3],s=t[2]*e[0]+t[3]*e[2],a=t[2]*e[1]+t[3]*e[3],o=(i+a)/2,l=Math.sqrt((i+a)**2-4*(i*a-s*r))/2,c=o+l||1,u=o-l||1;return[Math.sqrt(c),Math.sqrt(u)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>r)return null;const s=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return s>a?null:[i,s,r,a]}static#t(t,e,i,r,s,a,o,l,c,u){if(c<=0||c>=1)return;const d=1-c,h=c*c,p=h*c,f=d*(d*(d*t+3*c*e)+3*h*i)+p*r,m=d*(d*(d*s+3*c*a)+3*h*o)+p*l;u[0]=Math.min(u[0],f),u[1]=Math.min(u[1],m),u[2]=Math.max(u[2],f),u[3]=Math.max(u[3],m)}static#e(t,e,i,r,s,a,o,l,c,u,d,h){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&this.#t(t,e,i,r,s,a,o,l,-d/u,h);return}const p=u**2-4*d*c;if(p<0)return;const f=Math.sqrt(p),m=2*c;this.#t(t,e,i,r,s,a,o,l,(-u+f)/m,h),this.#t(t,e,i,r,s,a,o,l,(-u-f)/m,h)}static bezierBoundingBox(t,e,i,r,s,a,o,l,c){return c?(c[0]=Math.min(c[0],t,o),c[1]=Math.min(c[1],e,l),c[2]=Math.max(c[2],t,o),c[3]=Math.max(c[3],e,l)):c=[Math.min(t,o),Math.min(e,l),Math.max(t,o),Math.max(e,l)],this.#e(t,i,s,o,e,r,a,l,3*(-t+3*(i-s)+o),6*(t-2*i+s),3*(i-t),c),this.#e(t,i,s,o,e,r,a,l,3*(-e+3*(r-a)+l),6*(e-2*r+a),3*(r-e),c),c}}function Ig(n){return decodeURIComponent(escape(n))}let ea=null,ic=null;function kg(n){return ea||(ea=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ic=new Map([["","t"]])),n.replaceAll(ea,(t,e,i)=>e?e.normalize("NFKC"):ic.get(i))}function Og(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),Ed(n)}const Ao="pdfjs_internal_id_",un={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function Mg(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(Ed(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})});const dn="http://www.w3.org/2000/svg";class mi{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function bs(n,t="text"){if($i(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class lr{constructor({viewBox:t,scale:e,rotation:i,offsetX:r=0,offsetY:s=0,dontFlip:a=!1}){this.viewBox=t,this.scale=e,this.rotation=i,this.offsetX=r,this.offsetY=s;const o=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let c,u,d,h;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,u=0,d=0,h=1;break;case 90:c=0,u=1,d=1,h=0;break;case 270:c=0,u=-1,d=-1,h=0;break;case 0:c=1,u=0,d=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,h=-h);let p,f,m,v;c===0?(p=Math.abs(l-t[1])*e+r,f=Math.abs(o-t[0])*e+s,m=(t[3]-t[1])*e,v=(t[2]-t[0])*e):(p=Math.abs(o-t[0])*e+r,f=Math.abs(l-t[1])*e+s,m=(t[2]-t[0])*e,v=(t[3]-t[1])*e),this.transform=[c*e,u*e,d*e,h*e,p-c*e*o-d*e*l,f-u*e*o-h*e*l],this.width=m,this.height=v}get rawDims(){const{viewBox:t}=this;return st(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new lr({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:s})}convertToViewportPoint(t,e){return z.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=z.applyTransform([t[0],t[1]],this.transform),i=z.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return z.applyInverseTransform([t,e],this.transform)}}class Eo extends Rn{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function ys(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function So(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function Lg(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function Ng(n,t="document.pdf"){if(typeof n!="string")return t;if(ys(n))return it('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=e.exec(n);let s=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(s&&(s=s[0],s.includes("%")))try{s=i.exec(decodeURIComponent(s))[0]}catch{}return s||t}class rc{started=Object.create(null);times=[];time(t){t in this.started&&it(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||it(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:r,end:s}of this.times)t.push(`${i.padEnd(e)} ${s-r}ms
`);return t.join("")}}function $i(n,t){try{const{protocol:e}=t?new URL(n,t):new URL(n);return e==="http:"||e==="https:"}catch{return!1}}function ze(n){n.preventDefault()}function je(n){n.preventDefault(),n.stopPropagation()}function sc(n){console.log("Deprecated API usage: "+n)}class Sd{static#t;static toDateObject(t){if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const i=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(e[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const c=e[7]||"Z";let u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,c==="-"?(a+=u,o+=d):c==="+"&&(a-=u,o-=d),new Date(Date.UTC(i,r,s,a,o,l))}}function Fg(n,{scale:t=1,rotation:e=0}){const{width:i,height:r}=n.attributes.style,s=[0,0,parseInt(i),parseInt(r)];return new lr({viewBox:s,scale:t,rotation:e})}function Co(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(it(`Not a valid color format: "${n}"`),[0,0,0])}function Bg(n){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of n.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;n.set(e,Co(i))}t.remove()}function Ct(n){const{a:t,b:e,c:i,d:r,e:s,f:a}=n.getTransform();return[t,e,i,r,s,a]}function Je(n){const{a:t,b:e,c:i,d:r,e:s,f:a}=n.getTransform().invertSelf();return[t,e,i,r,s,a]}function Xn(n,t,e=!1,i=!0){if(t instanceof lr){const{pageWidth:r,pageHeight:s}=t.rawDims,{style:a}=n,o=oe.isCSSRoundSupported,l=`var(--scale-factor) * ${r}px`,c=`var(--scale-factor) * ${s}px`,u=o?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,d=o?`round(down, ${c}, var(--scale-round-y, 1px))`:`calc(${c})`;!e||t.rotation%180===0?(a.width=u,a.height=d):(a.width=d,a.height=u)}i&&n.setAttribute("data-main-rotation",t.rotation)}class Ha{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}class qi{#t=null;#e=null;#n;#i=null;#s=null;static#r=null;constructor(t){this.#n=t,qi.#r||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#n._uiManager._signal;t.addEventListener("contextmenu",ze,{signal:e}),t.addEventListener("pointerdown",qi.#c,{signal:e});const i=this.#i=document.createElement("div");i.className="buttons",t.append(i);const r=this.#n.toolbarPosition;if(r){const{style:s}=t,a=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return this.#d(),t}get div(){return this.#t}static#c(t){t.stopPropagation()}#o(t){this.#n._focusEventsAllowed=!1,je(t)}#u(t){this.#n._focusEventsAllowed=!0,je(t)}#l(t){const e=this.#n._uiManager._signal;t.addEventListener("focusin",this.#o.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",ze,{signal:e})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#s?.shown()}#d(){const{editorType:t,_uiManager:e}=this.#n,i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",qi.#r[t]),this.#l(i),i.addEventListener("click",r=>{e.delete()},{signal:e._signal}),this.#i.append(i)}get#a(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#l(e),this.#i.prepend(e,this.#a),this.#s=t}addColorPicker(t){this.#e=t;const e=t.renderButton();this.#l(e),this.#i.prepend(e,this.#a)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class jg{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",ze,{signal:this.#n._signal});const e=this.#t=document.createElement("div");return e.className="buttons",t.append(e),this.#r(),t}#s(t,e){let i=0,r=0;for(const s of t){const a=s.y+s.height;if(a<i)continue;const o=s.x+(e?s.width:0);if(a>i){r=o,i=a;continue}e?o>r&&(r=o):o<r&&(r=o)}return[e?1-r:r,i]}show(t,e,i){const[r,s]=this.#s(e,i),{style:a}=this.#e||=this.#i();t.append(this.#e),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#r(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=this.#n._signal;t.addEventListener("contextmenu",ze,{signal:i}),t.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:i}),this.#t.append(t)}}function Kr(n,t,e){for(const i of e)t.addEventListener(i,n[i].bind(n))}class $g{#t=0;get id(){return`${xg}${this.#t++}`}}class _o{#t=Og();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const s=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return st(this,"_isSVGFittingCanvas",s)}async#i(t,e){this.#n||=new Map;let i=this.#n.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof e=="string"?(i.url=e,r=await bs(e,"blob")):e instanceof File?r=i.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const s=_o._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((c,u)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,c()},a.onload=async()=>{const d=i.svgUrl=a.result;o.src=await s?`${d}#svgView(preserveAspectRatio(none))`:d},o.onerror=a.onerror=u});a.readAsDataURL(r),await l}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){it(r),i=null}return this.#n.set(t,i),i&&this.#n.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:r,type:s}=t;return this.#i(`${e}_${i}_${r}_${s}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,e){const i=await e;return this.#i(t,i)}async getFromId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#n||=new Map;let i=this.#n.get(t);if(i?.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,i),this.#n.set(i.id,i),i}getSvgUrl(t){const e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=r.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class zg{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(r&&t(),this.#e)return;const l={cmd:t,undo:e,post:i,type:s};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(l);return}if(a&&this.#t[this.#i].type===s){o&&(l.undo=this.#t[this.#i].undo),this.#t[this.#i]=l;return}const c=this.#i+1;c===this.#n?this.#t.splice(0,1):(this.#i=c,c<this.#t.length&&this.#t.splice(c)),this.#t.push(l)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let e=this.#i;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#i-e),this.#i=e;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class cr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=oe.platform;for(const[i,r,s={}]of t)for(const a of i){const o=a.startsWith("mac+");e&&o?(this.callbacks.set(a.slice(4),{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1))):!e&&!o&&(this.callbacks.set(a,{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:r,options:{bubbles:s=!1,args:a=[],checker:o=null}}=i;o&&!o(t,e)||(r.bind(t,...a,e)(),s||je(e))}}class To{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Bg(t),st(this,"_colors",t)}convert(t){const e=Co(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,r]of this._colors)if(r.every((s,a)=>s===e[a]))return To._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?z.makeHexColor(...e):t}}class Cn{#t=new AbortController;#e=null;#n=new Map;#i=new Map;#s=null;#r=null;#c=null;#o=new zg;#u=null;#l=null;#d=0;#a=new Set;#h=null;#p=null;#f=new Set;_editorUndoBar=null;#g=!1;#m=!1;#v=!1;#b=null;#x=null;#w=null;#S=null;#C=!1;#_=null;#R=new $g;#A=!1;#D=!1;#T=null;#P=null;#M=null;#B=null;#E=tt.NONE;#y=new Set;#O=null;#j=null;#z=null;#H={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#N=[0,0];#k=null;#$=null;#W=null;#L=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Cn.prototype,e=a=>a.#$.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},r=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return st(this,"_keyboardManager",new cr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&a.#$.contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&a.#$.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}]]))}constructor(t,e,i,r,s,a,o,l,c,u,d,h){const p=this._signal=this.#t.signal;this.#$=t,this.#W=e,this.#s=i,this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:p}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:p}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:p}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:p}),r._on("setpreference",this.onSetPreference.bind(this),{signal:p}),r._on("switchannotationeditorparams",f=>this.updateParams(f.type,f.value),{signal:p}),this.#et(),this.#st(),this.#X(),this.#r=s.annotationStorage,this.#b=s.filterFactory,this.#j=a,this.#S=o||null,this.#g=l,this.#m=c,this.#v=u,this.#B=d||null,this.viewParameters={realScale:mi.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=h||null}destroy(){this.#L?.resolve(),this.#L=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#f.clear(),this.#e=null,this.#y.clear(),this.#o.destroy(),this.#s?.destroy(),this.#_?.hide(),this.#_=null,this.#x&&(clearTimeout(this.#x),this.#x=null),this.#k&&(clearTimeout(this.#k),this.#k=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#B}get useNewAltTextFlow(){return this.#m}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return st(this,"hcmFilter",this.#j?this.#b.addHCMFilter(this.#j.foreground,this.#j.background):"none")}get direction(){return st(this,"direction",getComputedStyle(this.#$).direction)}get highlightColors(){return st(this,"highlightColors",this.#S?new Map(this.#S.split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return st(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#l=t}setMainHighlightColorPicker(t){this.#M=t}editAltText(t,e=!1){this.#s?.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#v=e;break}}onPageChanging({pageNumber:t}){this.#d=t-1}focusMainContainer(){this.#$.focus()}findParent(t,e){for(const i of this.#i.values()){const{x:r,y:s,width:a,height:o}=i.div.getBoundingClientRect();if(t>=r&&t<=r+a&&e>=s&&e<=s+o)return i}return null}disableUserSelect(t=!1){this.#W.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#f.add(t)}removeShouldRescale(t){this.#f.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*mi.PDF_TO_CSS_UNITS;for(const e of this.#f)e.onScaleChanging();this.#l?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#V(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#i.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:a}=e,o=e.toString(),c=this.#q(e).closest(".textLayer"),u=this.getSelectionBoxes(c);if(!u)return;e.empty();const d=this.#V(c),h=this.#E===tt.NONE,p=()=>{d?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:u,anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:a,text:o}),h&&this.showAllEditors("highlight",!0,!0)};if(h){this.switchToMode(tt.HIGHLIGHT,p);return}p()}#Z(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#q(t).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(this.#_||=new jg(this),this.#_.show(i,r,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#r&&!this.#r.has(t.id)&&this.#r.setValue(t.id,t)}#tt(){const t=document.getSelection();if(!t||t.isCollapsed){this.#O&&(this.#_?.hide(),this.#O=null,this.#I({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#O)return;const r=this.#q(t).closest(".textLayer");if(!r){this.#O&&(this.#_?.hide(),this.#O=null,this.#I({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#O=e,this.#I({hasSelectedText:!0}),!(this.#E!==tt.HIGHLIGHT&&this.#E!==tt.NONE)&&(this.#E===tt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#C=this.isShiftKeyDown,!this.isShiftKeyDown)){const s=this.#E===tt.HIGHLIGHT?this.#V(r):null;s?.toggleDrawing();const a=new AbortController,o=this.combinedSignal(a),l=c=>{c.type==="pointerup"&&c.button!==0||(a.abort(),s?.toggleDrawing(!0),c.type==="pointerup"&&this.#G("main_toolbar"))};window.addEventListener("pointerup",l,{signal:o}),window.addEventListener("blur",l,{signal:o})}}#G(t=""){this.#E===tt.HIGHLIGHT?this.highlightSelection(t):this.#g&&this.#Z()}#et(){document.addEventListener("selectionchange",this.#tt.bind(this),{signal:this._signal})}#nt(){if(this.#w)return;this.#w=new AbortController;const t=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#it(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#C&&(this.#C=!1,this.#G("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#y)if(e.div.contains(t)){this.#P=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#P)return;const[t,e]=this.#P;this.#P=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#X(){if(this.#T)return;this.#T=new AbortController;const t=this.combinedSignal(this.#T);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#rt(){this.#T?.abort(),this.#T=null}#K(){if(this.#u)return;this.#u=new AbortController;const t=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#Y(){this.#u?.abort(),this.#u=null}#st(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#X(),this.#K()}removeEditListeners(){this.#rt(),this.#Y()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#p)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#p)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#y){const r=i.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const s of e.items)for(const a of this.#p)if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(s){it(`paste: "${s.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const s=[];for(const l of i){const c=await r.deserialize(l);if(!c)return;s.push(c)}const a=()=>{for(const l of s)this.#J(l);this.#Q(s)},o=()=>{for(const l of s)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(s){it(`paste: "${s.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#E!==tt.NONE&&!this.isEditorHandlingKeyboard&&Cn._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#C&&(this.#C=!1,this.#G("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#I(t){Object.entries(t).some(([i,r])=>this.#H[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#H,t)}),this.#E===tt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#F([[ot.HIGHLIGHT_FREE,!0]]))}#F(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#nt(),this.#K(),this.#I({isEditing:this.#E!==tt.NONE,isEmpty:this.#U(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#it(),this.#Y(),this.#I({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#p){this.#p=t;for(const e of this.#p)this.#F(e.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#i.get(this.#d)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#d}addLayer(t){this.#i.set(t.pageIndex,t),this.#A?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}async updateMode(t,e=null,i=!1){if(this.#E!==t&&!(this.#L&&(await this.#L.promise,!this.#L))){if(this.#L=Promise.withResolvers(),this.#E=t,t===tt.NONE){this.setEditingState(!1),this.#ot(),this._editorUndoBar?.hide(),this.#L.resolve();return}this.setEditingState(!0),await this.#at(),this.unselectAll();for(const r of this.#i.values())r.updateMode(t);if(!e){i&&this.addNewEditorFromKeyboard(),this.#L.resolve();return}for(const r of this.#n.values())r.annotationElementId===e?(this.setSelected(r),r.enterInEditMode()):r.unselect();this.#L.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#E&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){if(this.#p){switch(t){case ot.CREATE:this.currentLayer.addNewEditor();return;case ot.HIGHLIGHT_DEFAULT_COLOR:this.#M?.updateColor(e);break;case ot.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#z||=new Map).set(t,e),this.showAllEditors("highlight",e);break}for(const i of this.#y)i.updateParams(t,e);for(const i of this.#p)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const s of this.#n.values())s.editorType===t&&s.show(e);(this.#z?.get(ot.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#F([[ot.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#D!==t){this.#D=t;for(const e of this.#i.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#at(){if(!this.#A){this.#A=!0;const t=[];for(const e of this.#i.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#ot(){if(this.unselectAll(),this.#A){this.#A=!1;for(const t of this.#i.values())t.disable();for(const t of this.#n.values())t.disable()}}getEditors(t){const e=[];for(const i of this.#n.values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#x&&clearTimeout(this.#x),this.#x=setTimeout(()=>{this.focusMainContainer(),this.#x=null},0)),this.#n.delete(t.id),this.unselect(t),(!t.annotationElementId||!this.#a.has(t.annotationElementId))&&this.#r?.remove(t.id)}addDeletedAnnotationElement(t){this.#a.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#a.has(t)}removeDeletedAnnotationElement(t){this.#a.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#J(t){const e=this.#i.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#F(t.propertiesToUpdate))}get#lt(){let t=null;for(t of this.#y);return t}updateUI(t){this.#lt===t&&this.#F(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#F(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#y.has(t)){this.#y.delete(t),t.unselect(),this.#I({hasSelectedEditor:this.hasSelection});return}this.#y.add(t),t.select(),this.#F(t.propertiesToUpdate),this.#I({hasSelectedEditor:!0})}setSelected(t){this.#l?.commitOrRemove();for(const e of this.#y)e!==t&&e.unselect();this.#y.clear(),this.#y.add(t),t.select(),this.#F(t.propertiesToUpdate),this.#I({hasSelectedEditor:!0})}isSelected(t){return this.#y.has(t)}get firstSelectedEditor(){return this.#y.values().next().value}unselect(t){t.unselect(),this.#y.delete(t),this.#I({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#y.size!==0}get isEnterHandled(){return this.#y.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#o.undo(),this.#I({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#U()}),this._editorUndoBar?.hide()}redo(){this.#o.redo(),this.#I({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#U()})}addCommands(t){this.#o.add(t),this.#I({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#U()})}cleanUndoStack(t){this.#o.cleanType(t)}#U(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#y],i=()=>{this._editorUndoBar?.show(r,e.length===1?e[0].editorType:e.length);for(const s of e)s.remove()},r=()=>{for(const s of e)this.#J(s)};this.addCommands({cmd:i,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#Q(t){for(const e of this.#y)e.unselect();this.#y.clear();for(const e of t)e.isEmpty()||(this.#y.add(e),e.select());this.#I({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#y)t.commit();this.#Q(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#E!==tt.NONE))&&!this.#l?.commitOrRemove()&&this.hasSelection){for(const t of this.#y)t.unselect();this.#y.clear(),this.#I({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#N[0]+=t,this.#N[1]+=e;const[r,s]=this.#N,a=[...this.#y],o=1e3;this.#k&&clearTimeout(this.#k),this.#k=setTimeout(()=>{this.#k=null,this.#N[0]=this.#N[1]=0,this.addCommands({cmd:()=>{for(const l of a)this.#n.has(l.id)&&l.translateInPage(r,s)},undo:()=>{for(const l of a)this.#n.has(l.id)&&l.translateInPage(-r,-s)},mustExec:!1})},o);for(const l of a)l.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#h=new Map;for(const t of this.#y)this.#h.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#h)return!1;this.disableUserSelect(!1);const t=this.#h;this.#h=null;let e=!1;for(const[{x:r,y:s,pageIndex:a},o]of t)o.newX=r,o.newY=s,o.newPageIndex=a,e||=r!==o.savedX||s!==o.savedY||a!==o.savedPageIndex;if(!e)return!1;const i=(r,s,a,o)=>{if(this.#n.has(r.id)){const l=this.#i.get(o);l?r._setParentAndPosition(l,s,a):(r.pageIndex=o,r.x=s,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:s,newY:a,newPageIndex:o}]of t)i(r,s,a,o)},undo:()=>{for(const[r,{savedX:s,savedY:a,savedPageIndex:o}]of t)i(r,s,a,o)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#h)for(const i of this.#h.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#y.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#E}get imageManager(){return st(this,"imageManager",new _o)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let c=0,u=e.rangeCount;c<u;c++)if(!t.contains(e.getRangeAt(c).commonAncestorContainer))return null;const{x:i,y:r,width:s,height:a}=t.getBoundingClientRect();let o;switch(t.getAttribute("data-main-rotation")){case"90":o=(c,u,d,h)=>({x:(u-r)/a,y:1-(c+d-i)/s,width:h/a,height:d/s});break;case"180":o=(c,u,d,h)=>({x:1-(c+d-i)/s,y:1-(u+h-r)/a,width:d/s,height:h/a});break;case"270":o=(c,u,d,h)=>({x:1-(u+h-r)/a,y:(c-i)/s,width:h/a,height:d/s});break;default:o=(c,u,d,h)=>({x:(c-i)/s,y:(u-r)/a,width:d/s,height:h/a});break}const l=[];for(let c=0,u=e.rangeCount;c<u;c++){const d=e.getRangeAt(c);if(!d.collapsed)for(const{x:h,y:p,width:f,height:m}of d.getClientRects())f===0||m===0||l.push(o(h,p,f,m))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#c||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#c?.delete(t)}renderAnnotationElement(t){const e=this.#c?.get(t.data.id);if(!e)return;const i=this.#r.getRawValue(e);i&&(this.#E===tt.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}}class tn{#t=null;#e=!1;#n=null;#i=null;#s=null;#r=null;#c=!1;#o=null;#u=null;#l=null;#d=null;#a=!1;static#h=null;static _l10n=null;constructor(t){this.#u=t,this.#a=t._uiManager.useNewAltTextFlow,tn.#h||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){tn._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#i=document.createElement("span");t.append(e),this.#a?(t.classList.add("new"),t.setAttribute("data-l10n-id",tn.#h.missing),e.setAttribute("data-l10n-id",tn.#h["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#u._uiManager._signal;t.addEventListener("contextmenu",ze,{signal:i}),t.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const r=s=>{s.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#a&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return t.addEventListener("click",r,{capture:!0,signal:i}),t.addEventListener("keydown",s=>{s.target===t&&s.key==="Enter"&&(this.#c=!0,r(s))},{signal:i}),await this.#f(),t}get#p(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#c}),this.#c=!1)}isEmpty(){return this.#a?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#a?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await tn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#f())}toggleAltTextBadge(t=!1){if(!this.#a||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#u.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:r,cancel:s=!1}){i&&(this.#l=i,this.#d=r),!(this.#t===t&&this.#e===e)&&(s||(this.#t=t,this.#e=e),this.#f())}toggle(t=!1){this.#n&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!t)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#s=null,this.#o?.remove(),this.#o=null}async#f(){const t=this.#n;if(!t)return;if(this.#a){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",tn.#h[this.#p]),this.#i?.setAttribute("data-l10n-id",tn.#h[`${this.#p}-label`]),!this.#t){this.#s?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#s?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#s;if(!e){this.#s=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#u.id}`;const r=100,s=this.#u._uiManager._signal;s.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#s.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:s}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#s?.classList.remove("show")},{signal:s})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#u.getImageForAltText()?.setAttribute("aria-describedby",e.id)}}class nt{#t=null;#e=null;#n=null;#i=!1;#s=null;#r="";#c=!1;#o=null;#u=null;#l=null;#d=null;#a="";#h=!1;#p=null;#f=!1;#g=!1;#m=!1;#v=null;#b=0;#x=0;#w=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#C=nt._zIndex++;static _borderLineWidth=-1;static _colorManager=new To;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=nt.prototype._resizeWithKeyboard,e=Cn.TRANSLATE_SMALL,i=Cn.TRANSLATE_BIG;return st(this,"_resizerKeyboardManager",new cr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],nt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[s,a];const[o,l]=this.parentDimensions;this.x=t.x/o,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return st(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Hg({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(nt._l10n??=t,nt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),nt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);nt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){yt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(t){this.#S=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#C}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#k(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#h?this.#h=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,r){const[s,a]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(t+i)/s,this.y=(e+r)/a,this.fixAndSetPosition()}#_([t,e],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#_(this.parentDimensions,t,e)}translateInPage(t,e){this.#p||=[this.x,this.y,this.width,this.height],this.#_(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){this.#p||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[r,s]}=this;if(this.x+=t/r,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[l,c]=this.getBaseTranslation();a+=l,o+=c;const{style:u}=i;u.left=`${(100*a).toFixed(2)}%`,u.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#p&&(this.#p[0]!==this.x||this.#p[1]!==this.y)}get _hasBeenResized(){return!!this.#p&&(this.#p[2]!==this.width||this.#p[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=nt,r=i/t,s=i/e;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,r]}=this;let{x:s,y:a,width:o,height:l}=this;if(o*=i,l*=r,s*=i,a*=r,this._mustFixPosition)switch(t){case 0:s=Math.max(0,Math.min(i-o,s)),a=Math.max(0,Math.min(r-l,a));break;case 90:s=Math.max(0,Math.min(i-l,s)),a=Math.min(r,Math.max(o,a));break;case 180:s=Math.min(i,Math.max(o,s)),a=Math.min(r,Math.max(l,a));break;case 270:s=Math.min(i,Math.max(l,s)),a=Math.max(0,Math.min(r-o,a));break}this.x=s/=i,this.y=a/=r;const[c,u]=this.getBaseTranslation();s+=c,a+=u,e.left=`${(100*s).toFixed(2)}%`,e.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}static#R(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return nt.#R(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return nt.#R(t,e,360-this.parentRotation)}#A(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,r]=this.parentDimensions,{style:s}=this.div;s.width=`${(100*t/i).toFixed(2)}%`,this.#c||(s.height=`${(100*e/r).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,r=i.endsWith("%"),s=!this.#c&&e.endsWith("%");if(r&&s)return;const[a,o]=this.parentDimensions;r||(t.width=`${(100*parseFloat(i)/a).toFixed(2)}%`),!this.#c&&!s&&(t.height=`${(100*parseFloat(e)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#D(){if(this.#o)return;this.#o=document.createElement("div"),this.#o.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const r=document.createElement("div");this.#o.append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",this.#T.bind(this,i),{signal:e}),r.addEventListener("contextmenu",ze,{signal:e}),r.tabIndex=-1}this.div.prepend(this.#o)}#T(t,e){e.preventDefault();const{isMac:i}=oe.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#u=[e.screenX,e.screenY];const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",je,{passive:!1,signal:a}),window.addEventListener("contextmenu",ze,{signal:a}),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const c=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=o,this.div.style.cursor=l,this.#M()};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})}#P(t,e,i,r){this.width=i,this.height=r,this.x=t,this.y=e;const[s,a]=this.parentDimensions;this.setDims(s*i,a*r),this.fixAndSetPosition(),this._onResized()}_onResized(){}#M(){if(!this.#l)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:r}=this.#l;this.#l=null;const s=this.x,a=this.y,o=this.width,l=this.height;s===t&&a===e&&o===i&&l===r||this.addCommands({cmd:this.#P.bind(this,s,a,o,l),undo:this.#P.bind(this,t,e,i,r),mustExec:!0})}#B(t,e){const[i,r]=this.parentDimensions,s=this.x,a=this.y,o=this.width,l=this.height,c=nt.MIN_SIZE/i,u=nt.MIN_SIZE/r,d=O=>Math.round(O*1e4)/1e4,h=this.#A(this.rotation),p=(O,M)=>[h[0]*O+h[2]*M,h[1]*O+h[3]*M],f=this.#A(360-this.rotation),m=(O,M)=>[f[0]*O+f[2]*M,f[1]*O+f[3]*M];let v,g,b=!1,y=!1;switch(t){case"topLeft":b=!0,v=(O,M)=>[0,0],g=(O,M)=>[O,M];break;case"topMiddle":v=(O,M)=>[O/2,0],g=(O,M)=>[O/2,M];break;case"topRight":b=!0,v=(O,M)=>[O,0],g=(O,M)=>[0,M];break;case"middleRight":y=!0,v=(O,M)=>[O,M/2],g=(O,M)=>[0,M/2];break;case"bottomRight":b=!0,v=(O,M)=>[O,M],g=(O,M)=>[0,0];break;case"bottomMiddle":v=(O,M)=>[O/2,M],g=(O,M)=>[O/2,0];break;case"bottomLeft":b=!0,v=(O,M)=>[0,M],g=(O,M)=>[O,0];break;case"middleLeft":y=!0,v=(O,M)=>[0,M/2],g=(O,M)=>[O,M/2];break}const w=v(o,l),x=g(o,l);let E=p(...x);const S=d(s+E[0]),D=d(a+E[1]);let T=1,L=1,k,j;if(e.fromKeyboard)({deltaX:k,deltaY:j}=e);else{const{screenX:O,screenY:M}=e,[V,at]=this.#u;[k,j]=this.screenToPageTranslation(O-V,M-at),this.#u[0]=O,this.#u[1]=M}if([k,j]=m(k/i,j/r),b){const O=Math.hypot(o,l);T=L=Math.max(Math.min(Math.hypot(x[0]-w[0]-k,x[1]-w[1]-j)/O,1/o,1/l),c/o,u/l)}else y?T=Math.max(c,Math.min(1,Math.abs(x[0]-w[0]-k)))/o:L=Math.max(u,Math.min(1,Math.abs(x[1]-w[1]-j)))/l;const R=d(o*T),P=d(l*L);E=p(...g(R,P));const U=S-E[0],$=D-E[1];this.#p||=[this.x,this.y,this.width,this.height],this.width=R,this.height=P,this.x=U,this.y=$,this.setDims(i*R,r*P),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}async addEditToolbar(){return this._editToolbar||this.#g?this._editToolbar:(this._editToolbar=new qi(this),this.div.append(this._editToolbar.render()),this.#n&&await this._editToolbar.addAltText(this.#n),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#n||(tn.initialize(nt._l10n),this.#n=new tn(this),this.#t&&(this.#n.data=this.#t,this.#t=null),await this.addEditToolbar())}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#i?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#O();const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),Kr(this,this.div,["pointerdown"]),this._uiManager._editorUndoBar?.hide(),this.div}pointerdown(t){const{isMac:e}=oe.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#h=!0,this._isDraggable){this.#y(t);return}this.#E(t)}get isSelected(){return this._uiManager.isSelected(this)}#E(t){const{isMac:e}=oe.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#y(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();const i=new AbortController,r=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:r},a=l=>{i.abort(),this.#s=null,this.#h=!1,this._uiManager.endDragSession()||this.#E(l)};e&&(this.#b=t.clientX,this.#x=t.clientY,this.#s=t.pointerId,this.#r=t.pointerType,window.addEventListener("pointermove",l=>{const{clientX:c,clientY:u,pointerId:d}=l;if(d!==this.#s){je(l);return}const[h,p]=this.screenToPageTranslation(c-this.#b,u-this.#x);this.#b=c,this.#x=u,this._uiManager.dragSelectedEditors(h,p)},s),window.addEventListener("touchmove",je,s),window.addEventListener("pointerdown",l=>{l.isPrimary&&l.pointerType===this.#r&&a(l),je(l)},s)),this._onStartDragging();const o=l=>{if(!this.#s||this.#s===l.pointerId){a(l),this._onStopDragging();return}je(l)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const r=this.parentScale,[s,a]=this.pageDimensions,[o,l]=this.pageTranslation,c=t/r,u=e/r,d=this.x*s,h=this.y*a,p=this.width*s,f=this.height*a;switch(i){case 0:return[d+c+o,a-h-u-f+l,d+c+p+o,a-h-u+l];case 90:return[d+u+o,a-h+c+l,d+u+f+o,a-h+c+p+l];case 180:return[d-c-p+o,a-h+u+l,d-c+o,a-h+u+f+l];case 270:return[d-u-f+o,a-h-c-p+l,d-u+o,a-h-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,r,s,a]=t,o=s-i,l=a-r;switch(this.rotation){case 0:return[i,e-a,o,l];case 90:return[i,e-r,l,o];case 180:return[s,e-r,o,l];case 270:return[s,e-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#g=!0}disableEditMode(){this.#g=!1}isInEditMode(){return this.#g}shouldGetKeyboardEvents(){return this.#m}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return e<a&&r>0&&t<s&&i>0}#O(){if(this.#d||!this.div)return;this.#d=new AbortController;const t=this._uiManager.combinedSignal(this.#d);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#O()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){yt("An editor must be serializable")}static async deserialize(t,e,i){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});r.rotation=t.rotation,r.#t=t.accessibilityData;const[s,a]=r.pageDimensions,[o,l,c,u]=r.getRectInCurrentCoords(t.rect,a);return r.x=o/s,r.y=l/a,r.width=c/s,r.height=u/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#d?.abort(),this.#d=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#k(),this.removeEditToolbar(),this.#w){for(const t of this.#w.values())clearTimeout(t);this.#w=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#D(),this.#o.classList.remove("hidden"),Kr(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#o.children;if(!this.#e){this.#e=Array.from(e);const a=this.#j.bind(this),o=this.#z.bind(this),l=this._uiManager._signal;for(const c of this.#e){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",a,{signal:l}),c.addEventListener("blur",o,{signal:l}),c.addEventListener("focus",this.#H.bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",nt._l10nResizer[u])}}const i=this.#e[0];let r=0;for(const a of e){if(a===i)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(s!==r){if(s<r)for(let o=0;o<r-s;o++)this.#o.append(this.#o.firstChild);else if(s>r)for(let o=0;o<s-r;o++)this.#o.firstChild.before(this.#o.lastChild);let a=0;for(const o of e){const c=this.#e[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",nt._l10nResizer[c])}}this.#N(0),this.#m=!0,this.#o.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#j(t){nt._resizerKeyboardManager.exec(this,t)}#z(t){this.#m&&t.relatedTarget?.parentNode!==this.#o&&this.#k()}#H(t){this.#a=this.#m?t:""}#N(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#m&&this.#B(this.#a,{deltaX:t,deltaY:e,fromKeyboard:!0})}#k(){this.#m=!1,this.#N(-1),this.#M()}_stopResizingWithKeyboard(){this.#k(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}unselect(){this.#o?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(t){this.#f=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#c=!0;const i=t/e,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#w||=new Map;const{action:i}=t;let r=this.#w.get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#w.delete(i),this.#w.size===0&&(this.#w=null)},nt._telemetryTimeout),this.#w.set(i,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class Hg extends nt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ac=3285377520,Re=4294901760,Qe=65535;class Cd{constructor(t){this.h1=t?t&4294967295:ac,this.h2=t?t&4294967295:ac}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let m=0,v=t.length;m<v;m++){const g=t.charCodeAt(m);g<=255?e[i++]=g:(e[i++]=g>>>8,e[i++]=g&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,s=i-r*4,a=new Uint32Array(e.buffer,0,r);let o=0,l=0,c=this.h1,u=this.h2;const d=3432918353,h=461845907,p=d&Qe,f=h&Qe;for(let m=0;m<r;m++)m&1?(o=a[m],o=o*d&Re|o*p&Qe,o=o<<15|o>>>17,o=o*h&Re|o*f&Qe,c^=o,c=c<<13|c>>>19,c=c*5+3864292196):(l=a[m],l=l*d&Re|l*p&Qe,l=l<<15|l>>>17,l=l*h&Re|l*f&Qe,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(o=0,s){case 3:o^=e[r*4+2]<<16;case 2:o^=e[r*4+1]<<8;case 1:o^=e[r*4],o=o*d&Re|o*p&Qe,o=o<<15|o>>>17,o=o*h&Re|o*f&Qe,r&1?c^=o:u^=o}this.h1=c,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Re|t*36045&Qe,e=e*4283543511&Re|((e<<16|t>>>16)*2950163797&Re)>>>16,t^=e>>>1,t=t*444984403&Re|t*60499&Qe,e=e*3301882366&Re|((e<<16|t>>>16)*3120437893&Re)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Ua=Object.freeze({map:null,hash:"",transfer:void 0});class Ro{#t=!1;#e=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#n.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#n.get(t)}remove(t){if(this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of this.#n.values())if(e instanceof nt)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#n.get(t);let r=!1;if(i!==void 0)for(const[s,a]of Object.entries(e))i[s]!==a&&(r=!0,i[s]=a);else r=!0,this.#n.set(t,e);r&&this.#i(),e instanceof nt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#n.has(t)}getAll(){return this.#n.size>0?wo(this.#n):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return this.#n.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new _d(this)}get serializable(){if(this.#n.size===0)return Ua;const t=new Map,e=new Cd,i=[],r=Object.create(null);let s=!1;for(const[a,o]of this.#n){const l=o instanceof nt?o.serialize(!1,r):o;l&&(t.set(a,l),e.update(`${a}:${JSON.stringify(l)}`),s||=!!l.bitmap)}if(s)for(const a of t.values())a.bitmap&&i.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Ua}get editorStats(){let t=null;const e=new Map;for(const i of this.#n.values()){if(!(i instanceof nt))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:s}=r;e.has(s)||e.set(s,Object.getPrototypeOf(i).constructor),t||=Object.create(null);const a=t[s]||=new Map;for(const[o,l]of Object.entries(r)){if(o==="type")continue;let c=a.get(o);c||(c=new Map,a.set(o,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[i,r]of e)t[i]=r.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const e of this.#n.values())!(e instanceof nt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}}class _d extends Ro{#t;constructor(t){super();const{map:e,hash:i,transfer:r}=t.serializable,s=structuredClone(e,r?{transfer:r}:null);this.#t={map:s,hash:i,transfer:r}}get print(){yt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return st(this,"modifiedIds",{ids:new Set,hash:""})}}class Ug{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||this.#t.has(t.loadedName))){if(Mt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:s}=t,a=new FontFace(i,r,s);this.addNativeFontFace(a);try{await a.load(),this.#t.add(i),e?.(t)}catch{it(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}yt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw it(`Failed to load font '${i.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return st(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(ae||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),st(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(Mt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const s=i.shift();setTimeout(s.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:e,callback:t};return i.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return st(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(w,x){return w.charCodeAt(x)<<24|w.charCodeAt(x+1)<<16|w.charCodeAt(x+2)<<8|w.charCodeAt(x+3)&255}function r(w,x,E,S){const D=w.substring(0,x),T=w.substring(x+E);return D+S+T}let s,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let c=0;function u(w,x){if(++c>30){it("Load test font never loaded."),x();return}if(l.font="30px "+w,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){x();return}setTimeout(u.bind(null,w,x))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let h=this._loadTestFont;h=r(h,976,d.length,d);const f=16,m=1482184792;let v=i(h,f);for(s=0,a=d.length-3;s<a;s+=4)v=v-m+i(d,s)|0;s<d.length&&(v=v-m+i(d+"XXX",s)|0),h=r(h,f,4,Rg(v));const g=`url(data:font/opentype;base64,${btoa(h)});`,b=`@font-face {font-family:"${d}";src:${g}}`;this.insertRule(b);const y=this._document.createElement("div");y.style.visibility="hidden",y.style.width=y.style.height="10px",y.style.position="absolute",y.style.top=y.style.left="0px";for(const w of[t.loadedName,d]){const x=this._document.createElement("span");x.textContent="Hi",x.style.fontFamily=w,y.append(x)}this._document.body.append(y),u(d,()=>{y.remove(),e.complete()})}}class qg{constructor(t,{disableFontFace:e=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in t)this[r]=t[r];this.disableFontFace=e===!0,this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Mg(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let i;try{i=t.get(this.loadedName+"_path_"+e)}catch(s){it(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[e]=function(s,a){};const r=[];for(let s=0,a=i.length;s<a;)switch(i[s++]){case un.BEZIER_CURVE_TO:{const[o,l,c,u,d,h]=i.slice(s,s+6);r.push(p=>p.bezierCurveTo(o,l,c,u,d,h)),s+=6}break;case un.MOVE_TO:{const[o,l]=i.slice(s,s+2);r.push(c=>c.moveTo(o,l)),s+=2}break;case un.LINE_TO:{const[o,l]=i.slice(s,s+2);r.push(c=>c.lineTo(o,l)),s+=2}break;case un.QUADRATIC_CURVE_TO:{const[o,l,c,u]=i.slice(s,s+4);r.push(d=>d.quadraticCurveTo(o,l,c,u)),s+=4}break;case un.RESTORE:r.push(o=>o.restore());break;case un.SAVE:r.push(o=>o.save());break;case un.SCALE:Mt(r.length===2,"Scale command is only valid at the third position.");break;case un.TRANSFORM:{const[o,l,c,u,d,h]=i.slice(s,s+6);r.push(p=>p.transform(o,l,c,u,d,h)),s+=6}break;case un.TRANSLATE:{const[o,l]=i.slice(s,s+2);r.push(c=>c.translate(o,l)),s+=2}break}return r.push(s=>s.closePath()),this.compiledGlyphs[e]=function(a,o){r[0](a),r[1](a),a.scale(o,-o);for(let l=2,c=r.length;l<c;l++)r[l](a)}}}class Td{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){yt("Abstract method `_createCanvas` called.")}}class Gg extends Td{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class Rd{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){yt("Abstract method `_fetch` called.")}}class Dd extends Rd{async _fetch(t){const e=await bs(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):vs(e)}}class Pd{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,r,s){return"none"}destroy(t=!1){}}class Wg extends Pd{#t;#e;#n;#i;#s;#r;#c=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#s=e}get#o(){return this.#e||=new Map}get#u(){return this.#r||=new Map}get#l(){if(!this.#n){const t=this.#s.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#s.createElementNS(dn,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#n=this.#s.createElementNS(dn,"defs"),t.append(i),i.append(this.#n),this.#s.body.append(t)}return this.#n}#d(t){if(t.length===1){const l=t[0],c=new Array(256);for(let d=0;d<256;d++)c[d]=l[d]/255;const u=c.join(",");return[u,u,u]}const[e,i,r]=t,s=new Array(256),a=new Array(256),o=new Array(256);for(let l=0;l<256;l++)s[l]=e[l]/255,a[l]=i[l]/255,o[l]=r[l]/255;return[s.join(","),a.join(","),o.join(",")]}#a(t){if(this.#t===void 0){this.#t="";const e=this.#s.URL;e!==this.#s.baseURI&&(ys(e)?it('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=e.split("#",1)[0])}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[i,r,s]=this.#d(t),a=t.length===1?i:`${i}${r}${s}`;if(e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#i}_transfer_map_${this.#c++}`,l=this.#a(o);this.#o.set(t,l),this.#o.set(a,l);const c=this.#f(o);return this.#m(i,r,s,c),l}addHCMFilter(t,e){const i=`${t}-${e}`,r="base";let s=this.#u.get(r);if(s?.key===i||(s?(s.filter?.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},this.#u.set(r,s)),!t||!e))return s.url;const a=this.#b(t);t=z.makeHexColor(...a);const o=this.#b(e);if(e=z.makeHexColor(...o),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return s.url;const l=new Array(256);for(let p=0;p<=255;p++){const f=p/255;l[p]=f<=.03928?f/12.92:((f+.055)/1.055)**2.4}const c=l.join(","),u=`g_${this.#i}_hcm_filter`,d=s.filter=this.#f(u);this.#m(c,c,c,d),this.#p(d);const h=(p,f)=>{const m=a[p]/255,v=o[p]/255,g=new Array(f+1);for(let b=0;b<=f;b++)g[b]=m+b/f*(v-m);return g.join(",")};return this.#m(h(0,5),h(1,5),h(2,5),d),s.url=this.#a(u),s.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[i]=this.#d([t]),r=`alpha_${i}`;if(e=this.#o.get(r),e)return this.#o.set(t,e),e;const s=`g_${this.#i}_alpha_map_${this.#c++}`,a=this.#a(s);this.#o.set(t,a),this.#o.set(r,a);const o=this.#f(s);return this.#v(i,o),a}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let i,r;if(t?([i]=this.#d([t]),r=`luminosity_${i}`):r="luminosity",e=this.#o.get(r),e)return this.#o.set(t,e),e;const s=`g_${this.#i}_luminosity_map_${this.#c++}`,a=this.#a(s);this.#o.set(t,a),this.#o.set(r,a);const o=this.#f(s);return this.#h(o),t&&this.#v(i,o),a}addHighlightHCMFilter(t,e,i,r,s){const a=`${e}-${i}-${r}-${s}`;let o=this.#u.get(t);if(o?.key===a||(o?(o.filter?.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},this.#u.set(t,o)),!e||!i))return o.url;const[l,c]=[e,i].map(this.#b.bind(this));let u=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[h,p]=[r,s].map(this.#b.bind(this));d<u&&([u,d,h,p]=[d,u,p,h]),this.#l.style.color="";const f=(g,b,y)=>{const w=new Array(256),x=(d-u)/y,E=g/255,S=(b-g)/(255*y);let D=0;for(let T=0;T<=y;T++){const L=Math.round(u+T*x),k=E+T*S;for(let j=D;j<=L;j++)w[j]=k;D=L+1}for(let T=D;T<256;T++)w[T]=w[D-1];return w.join(",")},m=`g_${this.#i}_hcm_${t}_filter`,v=o.filter=this.#f(m);return this.#p(v),this.#m(f(h[0],p[0],5),f(h[1],p[1],5),f(h[2],p[2],5),v),o.url=this.#a(m),o.url}destroy(t=!1){t&&this.#r?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#r?.clear(),this.#r=null,this.#c=0)}#h(t){const e=this.#s.createElementNS(dn,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#p(t){const e=this.#s.createElementNS(dn,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#f(t){const e=this.#s.createElementNS(dn,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#g(t,e,i){const r=this.#s.createElementNS(dn,e);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)}#m(t,e,i,r){const s=this.#s.createElementNS(dn,"feComponentTransfer");r.append(s),this.#g(s,"feFuncR",t),this.#g(s,"feFuncG",e),this.#g(s,"feFuncB",i)}#v(t,e){const i=this.#s.createElementNS(dn,"feComponentTransfer");e.append(i),this.#g(i,"feFuncA",t)}#b(t){return this.#l.style.color=t,Co(getComputedStyle(this.#l).getPropertyValue("color"))}}class Id{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){yt("Abstract method `_fetch` called.")}}class kd extends Id{async _fetch(t){const e=await bs(t,"arraybuffer");return new Uint8Array(e)}}async function Od(n){const e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}class Vg extends Pd{}class Xg extends Td{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class Kg extends Rd{async _fetch(t){return Od(t)}}class Yg extends Id{async _fetch(t){return Od(t)}}const Jt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function qa(n,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,i),n.clip(r)}class Do{getPattern(){yt("Abstract method `getPattern` called.")}}class Jg extends Do{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,r){let s;if(r===Jt.STROKE||r===Jt.FILL){const a=e.current.getClippedPathBoundingBox(r,Ct(t))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,c=e.cachedCanvases.getCanvas("pattern",o,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-a[0],-a[1]),i=z.transform(i,[1,0,0,1,a[0],a[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),qa(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),s=t.createPattern(c.canvas,"no-repeat");const d=new DOMMatrix(i);s.setTransform(d)}else qa(t,this._bbox),s=this._createGradient(t);return s}}function na(n,t,e,i,r,s,a,o){const l=t.coords,c=t.colors,u=n.data,d=n.width*4;let h;l[e+1]>l[i+1]&&(h=e,e=i,i=h,h=s,s=a,a=h),l[i+1]>l[r+1]&&(h=i,i=r,r=h,h=a,a=o,o=h),l[e+1]>l[i+1]&&(h=e,e=i,i=h,h=s,s=a,a=h);const p=(l[e]+t.offsetX)*t.scaleX,f=(l[e+1]+t.offsetY)*t.scaleY,m=(l[i]+t.offsetX)*t.scaleX,v=(l[i+1]+t.offsetY)*t.scaleY,g=(l[r]+t.offsetX)*t.scaleX,b=(l[r+1]+t.offsetY)*t.scaleY;if(f>=b)return;const y=c[s],w=c[s+1],x=c[s+2],E=c[a],S=c[a+1],D=c[a+2],T=c[o],L=c[o+1],k=c[o+2],j=Math.round(f),R=Math.round(b);let P,U,$,O,M,V,at,Y;for(let Q=j;Q<=R;Q++){if(Q<v){const rt=Q<f?0:(f-Q)/(f-v);P=p-(p-m)*rt,U=y-(y-E)*rt,$=w-(w-S)*rt,O=x-(x-D)*rt}else{let rt;Q>b?rt=1:v===b?rt=0:rt=(v-Q)/(v-b),P=m-(m-g)*rt,U=E-(E-T)*rt,$=S-(S-L)*rt,O=D-(D-k)*rt}let ut;Q<f?ut=0:Q>b?ut=1:ut=(f-Q)/(f-b),M=p-(p-g)*ut,V=y-(y-T)*ut,at=w-(w-L)*ut,Y=x-(x-k)*ut;const _t=Math.round(Math.min(P,M)),Rt=Math.round(Math.max(P,M));let pt=d*Q+_t*4;for(let rt=_t;rt<=Rt;rt++)ut=(P-rt)/(P-M),ut<0?ut=0:ut>1&&(ut=1),u[pt++]=U-(U-V)*ut|0,u[pt++]=$-($-at)*ut|0,u[pt++]=O-(O-Y)*ut|0,u[pt++]=255}}function Qg(n,t,e){const i=t.coords,r=t.colors;let s,a;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(i.length/o)-1,c=o-1;for(s=0;s<l;s++){let u=s*o;for(let d=0;d<c;d++,u++)na(n,e,i[u],i[u+1],i[u+o],r[u],r[u+1],r[u+o]),na(n,e,i[u+o+1],i[u+1],i[u+o],r[u+o+1],r[u+1],r[u+o])}break;case"triangles":for(s=0,a=i.length;s<a;s+=3)na(n,e,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class Zg extends Do{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-o,u=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(c*t[0]*1.1)),3e3),h=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),p=c/d,f=u/h,m={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/p,scaleY:1/f},v=d+2*2,g=h+2*2,b=i.getCanvas("mesh",v,g),y=b.context,w=y.createImageData(d,h);if(e){const E=w.data;for(let S=0,D=E.length;S<D;S+=4)E[S]=e[0],E[S+1]=e[1],E[S+2]=e[2],E[S+3]=255}for(const E of this._figures)Qg(w,E,m);return y.putImageData(w,2,2),{canvas:b.canvas,offsetX:o-2*p,offsetY:l-2*f,scaleX:p,scaleY:f}}getPattern(t,e,i,r){qa(t,this._bbox);let s;if(r===Jt.SHADING)s=z.singularValueDecompose2dScale(Ct(t));else if(s=z.singularValueDecompose2dScale(e.baseTransform),this.matrix){const o=z.singularValueDecompose2dScale(this.matrix);s=[s[0]*o[0],s[1]*o[1]]}const a=this._createMeshCanvas(s,r===Jt.SHADING?null:this._background,e.cachedCanvases);return r!==Jt.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}}class tv extends Do{getPattern(){return"hotpink"}}function ev(n){switch(n[0]){case"RadialAxial":return new Jg(n);case"Mesh":return new Zg(n);case"Dummy":return new tv}throw new Error(`Unknown IR type: ${n[0]}`)}const oc={COLORED:1,UNCOLORED:2};class Po{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,r,s){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:r,tilingType:s,color:a,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:c}=this;l=Math.abs(l),c=Math.abs(c),ms("TilingType: "+s);const u=e[0],d=e[1],h=e[2],p=e[3],f=h-u,m=p-d,v=z.singularValueDecompose2dScale(this.matrix),g=z.singularValueDecompose2dScale(this.baseTransform),b=v[0]*g[0],y=v[1]*g[1];let w=f,x=m,E=!1,S=!1;const D=Math.ceil(l*b),T=Math.ceil(c*y),L=Math.ceil(f*b),k=Math.ceil(m*y);D>=L?w=l:E=!0,T>=k?x=c:S=!0;const j=this.getSizeAndScale(w,this.ctx.canvas.width,b),R=this.getSizeAndScale(x,this.ctx.canvas.height,y),P=t.cachedCanvases.getCanvas("pattern",j.size,R.size),U=P.context,$=o.createCanvasGraphics(U);if($.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext($,r,a),U.translate(-j.scale*u,-R.scale*d),$.transform(j.scale,0,0,R.scale,0,0),U.save(),this.clipBbox($,u,d,h,p),$.baseTransform=Ct($.ctx),$.executeOperatorList(i),$.endDrawing(),U.restore(),E||S){const O=P.canvas;E&&(w=l),S&&(x=c);const M=this.getSizeAndScale(w,this.ctx.canvas.width,b),V=this.getSizeAndScale(x,this.ctx.canvas.height,y),at=M.size,Y=V.size,Q=t.cachedCanvases.getCanvas("pattern-workaround",at,Y),ut=Q.context,_t=E?Math.floor(f/l):0,Rt=S?Math.floor(m/c):0;for(let pt=0;pt<=_t;pt++)for(let rt=0;rt<=Rt;rt++)ut.drawImage(O,at*pt,Y*rt,at,Y,0,0,at,Y);return{canvas:Q.canvas,scaleX:M.scale,scaleY:V.scale,offsetX:u,offsetY:d}}return{canvas:P.canvas,scaleX:j.scale,scaleY:R.scale,offsetX:u,offsetY:d}}getSizeAndScale(t,e,i){const r=Math.max(Po.MAX_PATTERN_SIZE,e);let s=Math.ceil(t*i);return s>=r?s=r:i=s/t,{scale:i,size:s}}clipBbox(t,e,i,r,s){const a=r-e,o=s-i;t.ctx.rect(e,i,a,o),t.current.updateRectMinMax(Ct(t.ctx),[e,i,r,s]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const r=t.ctx,s=t.current;switch(e){case oc.COLORED:const a=this.ctx;r.fillStyle=a.fillStyle,r.strokeStyle=a.strokeStyle,s.fillColor=a.fillStyle,s.strokeColor=a.strokeStyle;break;case oc.UNCOLORED:const o=z.makeHexColor(i[0],i[1],i[2]);r.fillStyle=o,r.strokeStyle=o,s.fillColor=o,s.strokeColor=o;break;default:throw new Tg(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,r){let s=i;r!==Jt.SHADING&&(s=z.transform(s,e.baseTransform),this.matrix&&(s=z.transform(s,this.matrix)));const a=this.createPatternCanvas(e);let o=new DOMMatrix(s);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=t.createPattern(a.canvas,"repeat");return l.setTransform(o),l}}function nv({src:n,srcPos:t=0,dest:e,width:i,height:r,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const o=oe.isLittleEndian?4278190080:255,[l,c]=a?[s,o]:[o,s],u=i>>3,d=i&7,h=n.length;e=new Uint32Array(e.buffer);let p=0;for(let f=0;f<r;f++){for(const v=t+u;t<v;t++){const g=t<h?n[t]:255;e[p++]=g&128?c:l,e[p++]=g&64?c:l,e[p++]=g&32?c:l,e[p++]=g&16?c:l,e[p++]=g&8?c:l,e[p++]=g&4?c:l,e[p++]=g&2?c:l,e[p++]=g&1?c:l}if(d===0)continue;const m=t<h?n[t++]:255;for(let v=0;v<d;v++)e[p++]=m&1<<7-v?c:l}return{srcPos:t,destPos:p}}const lc=16,cc=100,iv=15,uc=10,dc=1e3,de=16;function rv(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(i,r){t.translate(i,r),this.__originalTranslate(i,r)},n.scale=function(i,r){t.scale(i,r),this.__originalScale(i,r)},n.transform=function(i,r,s,a,o,l){t.transform(i,r,s,a,o,l),this.__originalTransform(i,r,s,a,o,l)},n.setTransform=function(i,r,s,a,o,l){t.setTransform(i,r,s,a,o,l),this.__originalSetTransform(i,r,s,a,o,l)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){t.rotate(i),this.__originalRotate(i)},n.clip=function(i){t.clip(i),this.__originalClip(i)},n.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},n.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},n.bezierCurveTo=function(e,i,r,s,a,o){t.bezierCurveTo(e,i,r,s,a,o),this.__originalBezierCurveTo(e,i,r,s,a,o)},n.rect=function(e,i,r,s){t.rect(e,i,r,s),this.__originalRect(e,i,r,s)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class sv{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,i)):(r=this.canvasFactory.create(e,i),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Ar(n,t,e,i,r,s,a,o,l,c){const[u,d,h,p,f,m]=Ct(n);if(d===0&&h===0){const b=a*u+f,y=Math.round(b),w=o*p+m,x=Math.round(w),E=(a+l)*u+f,S=Math.abs(Math.round(E)-y)||1,D=(o+c)*p+m,T=Math.abs(Math.round(D)-x)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(p),y,x),n.drawImage(t,e,i,r,s,0,0,S,T),n.setTransform(u,d,h,p,f,m),[S,T]}if(u===0&&p===0){const b=o*h+f,y=Math.round(b),w=a*d+m,x=Math.round(w),E=(o+c)*h+f,S=Math.abs(Math.round(E)-y)||1,D=(a+l)*d+m,T=Math.abs(Math.round(D)-x)||1;return n.setTransform(0,Math.sign(d),Math.sign(h),0,y,x),n.drawImage(t,e,i,r,s,0,0,T,S),n.setTransform(u,d,h,p,f,m),[T,S]}n.drawImage(t,e,i,r,s,a,o,l,c);const v=Math.hypot(u,d),g=Math.hypot(h,p);return[v*l,g*c]}function av(n){const{width:t,height:e}=n;if(t>dc||e>dc)return null;const i=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=t+1;let a=new Uint8Array(s*(e+1)),o,l,c;const u=t+7&-8;let d=new Uint8Array(u*e),h=0;for(const g of n.data){let b=128;for(;b>0;)d[h++]=g&b?0:255,b>>=1}let p=0;for(h=0,d[h]!==0&&(a[0]=1,++p),l=1;l<t;l++)d[h]!==d[h+1]&&(a[l]=d[h]?2:1,++p),h++;for(d[h]!==0&&(a[l]=2,++p),o=1;o<e;o++){h=o*u,c=o*s,d[h-u]!==d[h]&&(a[c]=d[h]?1:8,++p);let g=(d[h]?4:0)+(d[h-u]?8:0);for(l=1;l<t;l++)g=(g>>2)+(d[h+1]?4:0)+(d[h-u+1]?8:0),r[g]&&(a[c+l]=r[g],++p),h++;if(d[h-u]!==d[h]&&(a[c+l]=d[h]?2:4,++p),p>i)return null}for(h=u*(e-1),c=o*s,d[h]!==0&&(a[c]=8,++p),l=1;l<t;l++)d[h]!==d[h+1]&&(a[c+l]=d[h]?4:8,++p),h++;if(d[h]!==0&&(a[c+l]=4,++p),p>i)return null;const f=new Int32Array([0,s,-1,0,-s,0,0,0,1]),m=new Path2D;for(o=0;p&&o<=e;o++){let g=o*s;const b=g+t;for(;g<b&&!a[g];)g++;if(g===b)continue;m.moveTo(g%s,o);const y=g;let w=a[g];do{const x=f[w];do g+=x;while(!a[g]);const E=a[g];E!==5&&E!==10?(w=E,a[g]=0):(w=E&51*w>>4,a[g]&=w>>2|w<<2),m.lineTo(g%s,g/s|0),a[g]||--p}while(y!==g);--o}return d=null,a=null,function(g){g.save(),g.scale(1/t,-1/e),g.translate(0,-e),g.fill(m),g.beginPath(),g.restore()}}class hc{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=wd,this.textMatrixScale=1,this.fontMatrix=ja,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Yt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=z.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=z.applyTransform(e,t),r=z.applyTransform(e.slice(2),t),s=z.applyTransform([e[0],e[3]],t),a=z.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],r[0],s[0],a[0]),this.minY=Math.min(this.minY,i[1],r[1],s[1],a[1]),this.maxX=Math.max(this.maxX,i[0],r[0],s[0],a[0]),this.maxY=Math.max(this.maxY,i[1],r[1],s[1],a[1])}updateScalingPathMinMax(t,e){z.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,r,s,a,o,l,c,u){const d=z.bezierBoundingBox(e,i,r,s,a,o,l,c,u);u||this.updateRectMinMax(t,d)}getPathBoundingBox(t=Jt.FILL,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===Jt.STROKE){e||yt("Stroke bounding box must include transform.");const r=z.singularValueDecompose2dScale(e),s=r[0]*this.lineWidth/2,a=r[1]*this.lineWidth/2;i[0]-=s,i[1]-=a,i[2]+=s,i[3]+=a}return i}updateClipFromPath(){const t=z.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Jt.FILL,e=null){return z.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function pc(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,i=t.width,r=e%de,s=(e-r)/de,a=r===0?s:s+1,o=n.createImageData(i,de);let l=0,c;const u=t.data,d=o.data;let h,p,f,m;if(t.kind===Or.GRAYSCALE_1BPP){const v=u.byteLength,g=new Uint32Array(d.buffer,0,d.byteLength>>2),b=g.length,y=i+7>>3,w=4294967295,x=oe.isLittleEndian?4278190080:255;for(h=0;h<a;h++){for(f=h<s?de:r,c=0,p=0;p<f;p++){const E=v-l;let S=0;const D=E>y?i:E*8-7,T=D&-8;let L=0,k=0;for(;S<T;S+=8)k=u[l++],g[c++]=k&128?w:x,g[c++]=k&64?w:x,g[c++]=k&32?w:x,g[c++]=k&16?w:x,g[c++]=k&8?w:x,g[c++]=k&4?w:x,g[c++]=k&2?w:x,g[c++]=k&1?w:x;for(;S<D;S++)L===0&&(k=u[l++],L=128),g[c++]=k&L?w:x,L>>=1}for(;c<b;)g[c++]=0;n.putImageData(o,0,h*de)}}else if(t.kind===Or.RGBA_32BPP){for(p=0,m=i*de*4,h=0;h<s;h++)d.set(u.subarray(l,l+m)),l+=m,n.putImageData(o,0,p),p+=de;h<a&&(m=i*r*4,d.set(u.subarray(l,l+m)),n.putImageData(o,0,p))}else if(t.kind===Or.RGB_24BPP)for(f=de,m=i*f,h=0;h<a;h++){for(h>=s&&(f=r,m=i*f),c=0,p=m;p--;)d[c++]=u[l++],d[c++]=u[l++],d[c++]=u[l++],d[c++]=255;n.putImageData(o,0,h*de)}else throw new Error(`bad image kind: ${t.kind}`)}function fc(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,r=e%de,s=(e-r)/de,a=r===0?s:s+1,o=n.createImageData(i,de);let l=0;const c=t.data,u=o.data;for(let d=0;d<a;d++){const h=d<s?de:r;({srcPos:l}=nv({src:c,srcPos:l,dest:u,width:i,height:h,nonBlackColor:0})),n.putImageData(o,0,d*de)}}function Oi(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)n[i]!==void 0&&(t[i]=n[i]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function Er(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!ae){const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}}function mc(n,t){if(t)return!0;const e=z.singularValueDecompose2dScale(n);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*mi.PDF_TO_CSS_UNITS);return e[0]<=i&&e[1]<=i}const ov=["butt","round","square"],lv=["miter","round","bevel"],cv={},gc={};class di{constructor(t,e,i,r,s,{optionalContentConfig:a,markedContentStack:o=null},l,c){this.ctx=t,this.current=new hc(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new sv(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:r=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,i){const l=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Ct(this.compositeCtx))}this.ctx.save(),Er(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Ct(this.ctx)}executeOperatorList(t,e,i,r){const s=t.argsArray,a=t.fnArray;let o=e||0;const l=s.length;if(l===o)return o;const c=l-o>uc&&typeof i=="function",u=c?Date.now()+iv:0;let d=0;const h=this.commonObjs,p=this.objs;let f;for(;;){if(r!==void 0&&o===r.nextBreakPoint)return r.breakIt(o,i),o;if(f=a[o],f!==Fe.dependency)this[f].apply(this,s[o]);else for(const m of s[o]){const v=m.startsWith("g_")?h:p;if(!v.has(m))return v.get(m,i),o}if(o++,o===l)return o;if(c&&++d>uc){if(Date.now()>u)return i(),o;d=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,r=t.height??t.displayHeight;let s=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),o=i,l=r,c="prescale1",u,d;for(;s>2&&o>1||a>2&&l>1;){let h=o,p=l;s>2&&o>1&&(h=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/h),a>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/p),u=this.cachedCanvases.getCanvas(c,h,p),d=u.context,d.clearRect(0,0,h,p),d.drawImage(t,0,0,o,l,0,0,h,p),t=u.canvas,o=h,l=p,c=c==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:o,paintHeight:l}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:r}=t,s=this.current.fillColor,a=this.current.patternFill,o=Ct(e);let l,c,u,d;if((t.bitmap||t.data)&&t.count>1){const D=t.bitmap||t.data.buffer;c=JSON.stringify(a?o:[o.slice(0,4),s]),l=this._cachedBitmapsMap.get(D),l||(l=new Map,this._cachedBitmapsMap.set(D,l));const T=l.get(c);if(T&&!a){const L=Math.round(Math.min(o[0],o[2])+o[4]),k=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:T,offsetX:L,offsetY:k}}u=T}u||(d=this.cachedCanvases.getCanvas("maskCanvas",i,r),fc(d.context,t));let h=z.transform(o,[1/i,0,0,-1/r,0,0]);h=z.transform(h,[1,0,0,1,0,-r]);const[p,f,m,v]=z.getAxialAlignedBoundingBox([0,0,i,r],h),g=Math.round(m-p)||1,b=Math.round(v-f)||1,y=this.cachedCanvases.getCanvas("fillCanvas",g,b),w=y.context,x=p,E=f;w.translate(-x,-E),w.transform(...h),u||(u=this._scaleImage(d.canvas,Je(w)),u=u.img,l&&a&&l.set(c,u)),w.imageSmoothingEnabled=mc(Ct(w),t.interpolate),Ar(w,u,0,0,u.width,u.height,0,0,i,r),w.globalCompositeOperation="source-in";const S=z.transform(Je(w),[1,0,0,1,-x,-E]);return w.fillStyle=a?s.getPattern(e,this,S,Jt.FILL):s,w.fillRect(0,0,i,r),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,y.canvas)),{canvas:y.canvas,offsetX:Math.round(x),offsetY:Math.round(E)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=ov[t]}setLineJoin(t){this.ctx.lineJoin=lv[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=r.context;const s=this.ctx;s.setTransform(...Ct(this.suspendedCtx)),Oi(this.suspendedCtx,s),rv(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Oi(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,r){const s=r[0],a=r[1],o=r[2]-s,l=r[3]-a;o===0||l===0||(this.genericComposeSMask(e.context,i,o,l,e.subtype,e.backdrop,e.transferMap,s,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,r,s,a,o,l,c,u,d){let h=t.canvas,p=l-u,f=c-d;if(a){const v=z.makeHexColor(...a);if(p<0||f<0||p+i>h.width||f+r>h.height){const g=this.cachedCanvases.getCanvas("maskExtension",i,r),b=g.context;b.drawImage(h,-p,-f),b.globalCompositeOperation="destination-atop",b.fillStyle=v,b.fillRect(0,0,i,r),b.globalCompositeOperation="source-over",h=g.canvas,p=f=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const g=new Path2D;g.rect(p,f,i,r),t.clip(g),t.globalCompositeOperation="destination-atop",t.fillStyle=v,t.fillRect(p,f,i,r),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?e.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(o));const m=new Path2D;m.rect(l,c,i,r),e.clip(m),e.globalCompositeOperation="destination-in",e.drawImage(h,p,f,i,r,l,c,i,r),e.restore()}save(){this.inSMaskMode?(Oi(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Oi(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,r,s,a){this.ctx.transform(t,e,i,r,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const r=this.ctx,s=this.current;let a=s.x,o=s.y,l,c;const u=Ct(r),d=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,h=d?i.slice(0):null;for(let p=0,f=0,m=t.length;p<m;p++)switch(t[p]|0){case Fe.rectangle:a=e[f++],o=e[f++];const v=e[f++],g=e[f++],b=a+v,y=o+g;r.moveTo(a,o),v===0||g===0?r.lineTo(b,y):(r.lineTo(b,o),r.lineTo(b,y),r.lineTo(a,y)),d||s.updateRectMinMax(u,[a,o,b,y]),r.closePath();break;case Fe.moveTo:a=e[f++],o=e[f++],r.moveTo(a,o),d||s.updatePathMinMax(u,a,o);break;case Fe.lineTo:a=e[f++],o=e[f++],r.lineTo(a,o),d||s.updatePathMinMax(u,a,o);break;case Fe.curveTo:l=a,c=o,a=e[f+4],o=e[f+5],r.bezierCurveTo(e[f],e[f+1],e[f+2],e[f+3],a,o),s.updateCurvePathMinMax(u,l,c,e[f],e[f+1],e[f+2],e[f+3],a,o,h),f+=6;break;case Fe.curveTo2:l=a,c=o,r.bezierCurveTo(a,o,e[f],e[f+1],e[f+2],e[f+3]),s.updateCurvePathMinMax(u,l,c,a,o,e[f],e[f+1],e[f+2],e[f+3],h),a=e[f+2],o=e[f+3],f+=4;break;case Fe.curveTo3:l=a,c=o,a=e[f+2],o=e[f+3],r.bezierCurveTo(e[f],e[f+1],a,o,a,o),s.updateCurvePathMinMax(u,l,c,e[f],e[f+1],a,o,a,o,h),f+=4;break;case Fe.closePath:r.closePath();break}d&&s.updateScalingPathMinMax(u,h),s.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&i?.getPattern?(e.save(),e.strokeStyle=i.getPattern(e,this,Je(e),Jt.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let s=!1;r&&(e.save(),e.fillStyle=i.getPattern(e,this,Je(e),Jt.FILL),s=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),s&&e.restore(),t&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=cv}eoClip(){this.pendingClip=gc}beginText(){this.current.textMatrix=wd,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const i of t)e.setTransform(...i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const i=this.commonObjs.get(t),r=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=i.fontMatrix||ja,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&it("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const s=i.loadedName||"sans-serif",a=i.systemFontInfo?.css||`"${s}", ${i.fallbackName}`;let o="normal";i.black?o="900":i.bold&&(o="bold");const l=i.italic?"italic":"normal";let c=e;e<lc?c=lc:e>cc&&(c=cc),this.current.fontSizeScale=e/c,this.ctx.font=`${l} ${o} ${c}px ${a}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,r,s,a){this.current.textMatrix=[t,e,i,r,s,a],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,r,s){const a=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,d=c&Yt.FILL_STROKE_MASK,h=!!(c&Yt.ADD_TO_PATH_FLAG),p=o.patternFill&&!l.missingFile,f=o.patternStroke&&!l.missingFile;let m;(l.disableFontFace||h||p||f)&&(m=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||p||f?(a.save(),a.translate(e,i),a.beginPath(),m(a,u),(d===Yt.FILL||d===Yt.FILL_STROKE)&&(r&&a.setTransform(...r),a.fill()),(d===Yt.STROKE||d===Yt.FILL_STROKE)&&(s&&a.setTransform(...s),a.stroke()),a.restore()):((d===Yt.FILL||d===Yt.FILL_STROKE)&&a.fillText(t,e,i),(d===Yt.STROKE||d===Yt.FILL_STROKE)&&a.strokeText(t,e,i)),h&&(this.pendingTextPaths||=[]).push({transform:Ct(a),x:e,y:i,fontSize:u,addToPath:m})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){i=!0;break}return st(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const r=e.fontSize;if(r===0)return;const s=this.ctx,a=e.fontSizeScale,o=e.charSpacing,l=e.wordSpacing,c=e.fontDirection,u=e.textHScale*c,d=t.length,h=i.vertical,p=h?1:-1,f=i.defaultVMetrics,m=r*e.fontMatrix[0],v=e.textRenderingMode===Yt.FILL&&!i.disableFontFace&&!e.patternFill;s.save(),s.transform(...e.textMatrix),s.translate(e.x,e.y+e.textRise),c>0?s.scale(u,-1):s.scale(u,1);let g,b;if(e.patternFill){s.save();const S=e.fillColor.getPattern(s,this,Je(s),Jt.FILL);g=Ct(s),s.restore(),s.fillStyle=S}if(e.patternStroke){s.save();const S=e.strokeColor.getPattern(s,this,Je(s),Jt.STROKE);b=Ct(s),s.restore(),s.strokeStyle=S}let y=e.lineWidth;const w=e.textMatrixScale;if(w===0||y===0){const S=e.textRenderingMode&Yt.FILL_STROKE_MASK;(S===Yt.STROKE||S===Yt.FILL_STROKE)&&(y=this.getSinglePixelWidth())}else y/=w;if(a!==1&&(s.scale(a,a),y/=a),s.lineWidth=y,i.isInvalidPDFjsFont){const S=[];let D=0;for(const T of t)S.push(T.unicode),D+=T.width;s.fillText(S.join(""),0,0),e.x+=D*m*u,s.restore(),this.compose();return}let x=0,E;for(E=0;E<d;++E){const S=t[E];if(typeof S=="number"){x+=p*S*r/1e3;continue}let D=!1;const T=(S.isSpace?l:0)+o,L=S.fontChar,k=S.accent;let j,R,P=S.width;if(h){const $=S.vmetric||f,O=-(S.vmetric?$[1]:P*.5)*m,M=$[2]*m;P=$?-$[0]:P,j=O/a,R=(x+M)/a}else j=x/a,R=0;if(i.remeasure&&P>0){const $=s.measureText(L).width*1e3/r*a;if(P<$&&this.isFontSubpixelAAEnabled){const O=P/$;D=!0,s.save(),s.scale(O,1),j/=O}else P!==$&&(j+=(P-$)/2e3*r/a)}if(this.contentVisible&&(S.isInFont||i.missingFile)){if(v&&!k)s.fillText(L,j,R);else if(this.paintChar(L,j,R,g,b),k){const $=j+r*k.offset.x/a,O=R-r*k.offset.y/a;this.paintChar(k.fontChar,$,O,g,b)}}const U=h?P*m-T*c:P*m+T*c;x+=U,D&&s.restore()}h?e.y-=x:e.x+=x*u,s.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,r=i.font,s=i.fontSize,a=i.fontDirection,o=r.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,u=i.textHScale*a,d=i.fontMatrix||ja,h=t.length,p=i.textRenderingMode===Yt.INVISIBLE;let f,m,v,g;if(!(p||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(u,a),f=0;f<h;++f){if(m=t[f],typeof m=="number"){g=o*m*s/1e3,this.ctx.translate(g,0),i.x+=g*u;continue}const b=(m.isSpace?c:0)+l,y=r.charProcOperatorList[m.operatorListId];if(!y){it(`Type3 character "${m.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=m,this.save(),e.scale(s,s),e.transform(...d),this.executeOperatorList(y),this.restore()),v=z.applyTransform([m.width,0],d)[0]*s+b,e.translate(v,0),i.x+=v*u}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,r,s,a){this.ctx.rect(i,r,s-i,a-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=t[1],r=this.baseTransform||Ct(this.ctx),s={createCanvasGraphics:a=>new di(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Po(t,i,this.ctx,s,r)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){this.ctx.strokeStyle=this.current.strokeColor=z.makeHexColor(t,e,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,i){this.ctx.fillStyle=this.current.fillColor=z.makeHexColor(t,e,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=ev(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,Je(e),Jt.SHADING);const r=Je(e);if(r){const{width:s,height:a}=e.canvas,[o,l,c,u]=z.getAxialAlignedBoundingBox([0,0,s,a],r);this.ctx.fillRect(o,l,c-o,u-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){yt("Should not call beginInlineImage")}beginImageData(){yt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Ct(this.ctx),e)){const i=e[2]-e[0],r=e[3]-e[1];this.ctx.rect(e[0],e[1],i,r),this.current.updateRectMinMax(Ct(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||ms("TODO: Support non-isolated groups."),t.knockout&&it("Knockout groups not supported.");const i=Ct(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=z.getAxialAlignedBoundingBox(t.bbox,Ct(e));const s=[0,0,e.canvas.width,e.canvas.height];r=z.intersect(r,s)||[0,0,0,0];const a=Math.floor(r[0]),o=Math.floor(r[1]),l=Math.max(Math.ceil(r[2])-a,1),c=Math.max(Math.ceil(r[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(u,l,c),h=d.context;h.translate(-a,-o),h.transform(...i),t.smask?this.smaskStack.push({canvas:d.canvas,context:h,offsetX:a,offsetY:o,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(a,o),e.save()),Oi(e,h),this.ctx=h,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Ct(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const s=z.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],r);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(t,e,i,r,s){if(this.#t(),Er(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const a=e[2]-e[0],o=e[3]-e[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=a,e[3]=o;const[l,c]=z.singularValueDecompose2dScale(Ct(this.ctx)),{viewportScale:u}=this,d=Math.ceil(a*this.outputScaleX*u),h=Math.ceil(o*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:p,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(t,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,o*c),Er(this.ctx)}else Er(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new hc(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=av(t)),r.compiled)){r.compiled(i);return}const s=this._createMaskCanvas(t),a=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,s.offsetX,s.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,r=0,s,a){if(!this.contentVisible)return;t=this.getObject(t.data,t);const o=this.ctx;o.save();const l=Ct(o);o.transform(e,i,r,s,0,0);const c=this._createMaskCanvas(t);o.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,d=a.length;u<d;u+=2){const h=z.transform(l,[e,i,r,s,a[u],a[u+1]]),[p,f]=z.applyTransform([0,0],h);o.drawImage(c.canvas,p,f)}o.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const s of t){const{data:a,width:o,height:l,transform:c}=s,u=this.cachedCanvases.getCanvas("maskCanvas",o,l),d=u.context;d.save();const h=this.getObject(a,s);fc(d,h),d.globalCompositeOperation="source-in",d.fillStyle=r?i.getPattern(d,this,Je(e),Jt.FILL):i,d.fillRect(0,0,o,l),d.restore(),e.save(),e.transform(...c),e.scale(1,-1),Ar(e,u.canvas,0,0,o,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){it("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,r){if(!this.contentVisible)return;const s=this.getObject(t);if(!s){it("Dependent image isn't ready yet");return}const a=s.width,o=s.height,l=[];for(let c=0,u=r.length;c<u;c+=2)l.push({transform:[e,0,0,i,r[c],r[c+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(s,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:r}=t,s=this.cachedCanvases.getCanvas("inlineImage",i,r),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",s.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,r=this.ctx;if(this.save(),!ae){const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none")}r.scale(1/e,-1/i);let s;if(t.bitmap)s=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)s=t;else{const l=this.cachedCanvases.getCanvas("inlineImage",e,i).context;pc(l,t),s=this.applyTransferMapsToCanvas(l)}const a=this._scaleImage(s,Je(r));r.imageSmoothingEnabled=mc(Ct(r),t.interpolate),Ar(r,a.img,0,0,a.paintWidth,a.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const s=t.width,a=t.height,l=this.cachedCanvases.getCanvas("inlineImage",s,a).context;pc(l,t),r=this.applyTransferMapsToCanvas(l)}for(const s of e)i.save(),i.transform(...s.transform),i.scale(1,-1),Ar(i,r,s.x,s.y,s.w,s.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===gc?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Ct(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:r,d:s}=this.ctx.getTransform();let a,o;if(i===0&&r===0){const l=Math.abs(e),c=Math.abs(s);if(l===c)if(t===0)a=o=1/l;else{const u=l*t;a=o=u<1?1/u:1}else if(t===0)a=1/l,o=1/c;else{const u=l*t,d=c*t;a=u<1?1/u:1,o=d<1?1/d:1}}else{const l=Math.abs(e*s-i*r),c=Math.hypot(e,i),u=Math.hypot(r,s);if(t===0)a=u/l,o=c/l;else{const d=t*l;a=u>d?u/d:1,o=c>d?c/d:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[r,s]=this.getScaleForStroking();if(e.lineWidth=i||1,r===1&&s===1){e.stroke();return}const a=e.getLineDash();if(t&&e.save(),e.scale(r,s),a.length>0){const o=Math.max(r,s);e.setLineDash(a.map(l=>l/o)),e.lineDashOffset/=o}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const n in Fe)di.prototype[n]!==void 0&&(di.prototype[Fe[n]]=di.prototype[n]);class Gi{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}const Sr={UNKNOWN:0,DATA:1,ERROR:2},Ot={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function vc(){}function De(n){switch(n instanceof Error||typeof n=="object"&&n!==null||yt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new ei(n.message);case"MissingPDFException":return new or(n.message);case"PasswordException":return new $a(n.message,n.code);case"UnexpectedResponseException":return new gs(n.message,n.status);case"UnknownErrorException":return new za(n.message,n.details);default:return new za(n.message,n.toString())}}class zi{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const i=t.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===Sr.DATA)r.resolve(t.data);else if(t.callback===Sr.ERROR)r.reject(De(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,r=t.sourceName,s=this.comObj;Promise.try(e,t.data).then(function(a){s.postMessage({sourceName:i,targetName:r,callback:Sr.DATA,callbackId:t.callbackId,data:a})},function(a){s.postMessage({sourceName:i,targetName:r,callback:Sr.ERROR,callbackId:t.callbackId,reason:De(a)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},i)}catch(a){s.reject(a)}return s.promise}sendWithStream(t,e,i,r){const s=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[s]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:t,streamId:s,data:e,desiredSize:c.desiredSize},r),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[s].pullCall=u,l.postMessage({sourceName:a,targetName:o,stream:Ot.PULL,streamId:s,desiredSize:c.desiredSize}),u.promise},cancel:c=>{Mt(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[s].cancelCall=u,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:Ot.CANCEL,streamId:s,reason:De(c)}),u.promise}},i)}#n(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,s=this.comObj,a=this,o=this.actionHandler[t.action],l={enqueue(c,u=1,d){if(this.isCancelled)return;const h=this.desiredSize;this.desiredSize-=u,h>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:r,stream:Ot.ENQUEUE,streamId:e,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:Ot.CLOSE,streamId:e}),delete a.streamSinks[e])},error(c){Mt(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:Ot.ERROR,streamId:e,reason:De(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,Promise.try(o,t.data,l).then(function(){s.postMessage({sourceName:i,targetName:r,stream:Ot.START_COMPLETE,streamId:e,success:!0})},function(c){s.postMessage({sourceName:i,targetName:r,stream:Ot.START_COMPLETE,streamId:e,reason:De(c)})})}#i(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,s=this.comObj,a=this.streamControllers[e],o=this.streamSinks[e];switch(t.stream){case Ot.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(De(t.reason));break;case Ot.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(De(t.reason));break;case Ot.PULL:if(!o){s.postMessage({sourceName:i,targetName:r,stream:Ot.PULL_COMPLETE,streamId:e,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,Promise.try(o.onPull||vc).then(function(){s.postMessage({sourceName:i,targetName:r,stream:Ot.PULL_COMPLETE,streamId:e,success:!0})},function(c){s.postMessage({sourceName:i,targetName:r,stream:Ot.PULL_COMPLETE,streamId:e,reason:De(c)})});break;case Ot.ENQUEUE:if(Mt(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case Ot.CLOSE:if(Mt(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#s(a,e);break;case Ot.ERROR:Mt(a,"error should have stream controller"),a.controller.error(De(t.reason)),this.#s(a,e);break;case Ot.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(De(t.reason)),this.#s(a,e);break;case Ot.CANCEL:if(!o)break;const l=De(t.reason);Promise.try(o.onCancel||vc,l).then(function(){s.postMessage({sourceName:i,targetName:r,stream:Ot.CANCEL_COMPLETE,streamId:e,success:!0})},function(c){s.postMessage({sourceName:i,targetName:r,stream:Ot.CANCEL_COMPLETE,streamId:e,reason:De(c)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#s(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class uv{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}getAll(){return wo(this.#t)}has(t){return this.#t.has(t)}}const li=Symbol("INTERNAL");class dv{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:e,intent:i,usage:r,rbGroups:s}){this.#t=!!(t&me.DISPLAY),this.#e=!!(t&me.PRINT),this.name=e,this.intent=i,this.usage=r,this.rbGroups=s}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==li&&yt("Internal method `_setVisible` called."),this.#n=i,this.#i=e}}class hv{#t=null;#e=new Map;#n=null;#i=null;constructor(t,e=me.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const i of t.groups)this.#e.set(i.id,new dv(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(li,!1);for(const i of t.on)this.#e.get(i)._setVisible(li,!0);for(const i of t.off)this.#e.get(i)._setVisible(li,!1);this.#n=this.getHash()}}#s(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let r=1;r<e;r++){const s=t[r];let a;if(Array.isArray(s))a=this.#s(s);else if(this.#e.has(s))a=this.#e.get(s).visible;else return it(`Optional content group not found: ${s}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return ms("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(it(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#s(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return it(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return it(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return it(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return it(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return it(`Unknown optional content policy ${t.policy}.`),!0}return it(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){const r=this.#e.get(t);if(!r){it(`Optional content group not found: ${t}`);return}if(i&&e&&r.rbGroups.length)for(const s of r.rbGroups)for(const a of s)a!==t&&this.#e.get(a)?._setVisible(li,!1,!0);r._setVisible(li,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const s=this.#e.get(r);if(s)switch(i){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!s.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?wo(this.#e):null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Cd;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}}class pv{constructor(t,{disableRange:e=!1,disableStream:i=!1}){Mt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:a,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,s?.length>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),t.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(s){return s._begin!==t?!1:(s._enqueue(i),!0)});Mt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Mt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new fv(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new mv(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class fv{constructor(t,e,i=!1,r=null){this._stream=t,this._done=i||!1,this._filename=So(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class mv{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function gv(n){let t=!0,e=i("filename\\*","i").exec(n);if(e){e=e[1];let u=o(e);return u=unescape(u),u=l(u),u=c(u),s(u)}if(e=a(n),e){const u=c(e);return s(u)}if(e=i("filename","i").exec(n),e){e=e[1];let u=o(e);return u=c(u),s(u)}function i(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function r(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const h=new TextDecoder(u,{fatal:!0}),p=vs(d);d=h.decode(p),t=!1}catch{}}return d}function s(u){return t&&/[\x80-\xff]/.test(u)&&(u=r("utf-8",u),t&&(u=r("iso-8859-1",u))),u}function a(u){const d=[];let h;const p=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(h=p.exec(u))!==null;){let[,m,v,g]=h;if(m=parseInt(m,10),m in d){if(m===0)break;continue}d[m]=[v,g]}const f=[];for(let m=0;m<d.length&&m in d;++m){let[v,g]=d[m];g=o(g),v&&(g=unescape(g),m===0&&(g=l(g))),f.push(g)}return f.join("")}function o(u){if(u.startsWith('"')){const d=u.slice(1).split('\\"');for(let h=0;h<d.length;++h){const p=d[h].indexOf('"');p!==-1&&(d[h]=d[h].slice(0,p),d.length=h+1),d[h]=d[h].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function l(u){const d=u.indexOf("'");if(d===-1)return u;const h=u.slice(0,d),f=u.slice(d+1).replace(/^[^']*'/,"");return r(h,f)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,h,p,f){if(p==="q"||p==="Q")return f=f.replaceAll("_"," "),f=f.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,v){return String.fromCharCode(parseInt(v,16))}),r(h,f);try{f=atob(f)}catch{}return r(h,f)})}return""}function Md(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const i in t){const r=t[i];r!==void 0&&e.append(i,r)}return e}function xs(n){try{return new URL(n).origin}catch{}return null}function Ld({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*e)||i||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Nd(n){const t=n.get("Content-Disposition");if(t){let e=gv(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(So(e))return e}return null}function ws(n,t){return n===404||n===0&&t.startsWith("file:")?new or('Missing PDF "'+t+'".'):new gs(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n)}function Fd(n){return n===200||n===206}function Bd(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function jd(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(it(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class bc{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Md(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Mt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new vv(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new bv(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class vv{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),r=e.url;fetch(r,Bd(i,this._withCredentials,this._abortController)).then(s=>{if(t._responseOrigin=xs(s.url),!Fd(s.status))throw ws(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:o,suggestedLength:l}=Ld({responseHeaders:a,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=Nd(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ei("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:jd(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class bv{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const s=new Headers(t.headers);s.append("Range",`bytes=${e}-${i-1}`);const a=r.url;fetch(a,Bd(s,this._withCredentials,this._abortController)).then(o=>{const l=xs(o.url);if(l!==t._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${t._responseOrigin}".`);if(!Fd(o.status))throw ws(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:jd(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const ia=200,ra=206;function yv(n){const t=n.response;return typeof t!="string"?t:vs(t).buffer}class xv{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Md(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,i){const r={begin:t,end:e};for(const s in i)r[s]=i[s];return this.request(r)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[s,a]of this.headers)e.setRequestHeader(s,a);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=ra):r.expectedStatus=ia,e.responseType="arraybuffer",t.onError&&(e.onerror=function(s){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){i.onError?.(r.status);return}const s=r.status||ia;if(!(s===ia&&i.expectedStatus===ra)&&s!==i.expectedStatus){i.onError?.(r.status);return}const o=yv(r);if(s===ra){const l=r.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);i.onDone({begin:parseInt(c[1],10),chunk:o})}else o?i.onDone({begin:0,chunk:o}):i.onError?.(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class wv{constructor(t){this._source=t,this._manager=new xv(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Mt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Av(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new Ev(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Av{constructor(t,e){this._manager=t;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=xs(e.responseURL);const i=e.getAllResponseHeaders(),r=new Headers(i?i.trim().split(/[\r\n]+/).map(o=>{const[l,...c]=o.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=Ld({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=Nd(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=ws(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Ev{constructor(t,e,i){this._manager=t;const r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,i,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=xs(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=ws(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Sv=/^[a-z][a-z0-9\-+.]+:/i;function Cv(n){if(Sv.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}class _v{constructor(t){this.source=t,this.url=Cv(t.url),Mt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Mt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Tv(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Rv(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Tv{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new or(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ei("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Rv{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Dv=1e5,ce=30,Pv=.8;class se{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#s=null;#r=null;#c=0;#o=0;#u=null;#l=null;#d=0;#a=0;#h=Object.create(null);#p=[];#f=null;#g=[];#m=new WeakMap;#v=null;static#b=new Map;static#x=new Map;static#w=new WeakMap;static#S=null;static#C=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#f=t;else if(typeof t=="object")this.#f=new ReadableStream({start(l){l.enqueue(t),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#a=i.scale*(globalThis.devicePixelRatio||1),this.#d=i.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:s,pageX:a,pageY:o}=i.rawDims;this.#v=[1,0,0,-1,-a,o+s],this.#o=r,this.#c=s,se.#P(),Xn(e,i),this.#t.promise.finally(()=>{se.#C.delete(this),this.#r=null,this.#h=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=oe.platform;return st(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#u.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#s??=e.lang,Object.assign(this.#h,e.styles),this.#_(e.items),t()},this.#t.reject)};return this.#u=this.#f.getReader(),se.#C.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*(globalThis.devicePixelRatio||1),r=t.rotation;if(r!==this.#d&&(e?.(),this.#d=r,Xn(this.#l,{rotation:r})),i!==this.#a){e?.(),this.#a=i;const s={div:null,properties:null,ctx:se.#D(this.#s)};for(const a of this.#g)s.properties=this.#m.get(a),s.div=a,this.#A(s)}}cancel(){const t=new ei("TextLayer task cancelled.");this.#u?.cancel(t).catch(()=>{}),this.#u=null,this.#t.reject(t)}get textDivs(){return this.#g}get textContentItemsStr(){return this.#p}#_(t){if(this.#n)return;this.#r.ctx??=se.#D(this.#s);const e=this.#g,i=this.#p;for(const r of t){if(e.length>Dv){it("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const s=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id!==null&&this.#e.setAttribute("id",`${r.id}`),s.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(r.str),this.#R(r)}}#R(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#g.push(e);const r=z.transform(this.#v,t.transform);let s=Math.atan2(r[1],r[0]);const a=this.#h[t.fontName];a.vertical&&(s+=Math.PI/2);let o=this.#i&&a.fontSubstitution||a.fontFamily;o=se.fontFamilyMap.get(o)||o;const l=Math.hypot(r[2],r[3]),c=l*se.#M(o,this.#s);let u,d;s===0?(u=r[4],d=r[5]-c):(u=r[4]+c*Math.sin(s),d=r[5]-c*Math.cos(s));const h="calc(var(--scale-factor)*",p=e.style;this.#e===this.#l?(p.left=`${(100*u/this.#o).toFixed(2)}%`,p.top=`${(100*d/this.#c).toFixed(2)}%`):(p.left=`${h}${u.toFixed(2)}px)`,p.top=`${h}${d.toFixed(2)}px)`),p.fontSize=`${h}${(se.#S*l).toFixed(2)}px)`,p.fontFamily=o,i.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),s!==0&&(i.angle=s*(180/Math.PI));let f=!1;if(t.str.length>1)f=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const m=Math.abs(t.transform[0]),v=Math.abs(t.transform[3]);m!==v&&Math.max(m,v)/Math.min(m,v)>1.5&&(f=!0)}if(f&&(i.canvasWidth=a.vertical?t.height:t.width),this.#m.set(e,i),this.#r.div=e,this.#r.properties=i,this.#A(this.#r),i.hasText&&this.#e.append(e),i.hasEOL){const m=document.createElement("br");m.setAttribute("role","presentation"),this.#e.append(m)}}#A(t){const{div:e,properties:i,ctx:r}=t,{style:s}=e;let a="";if(se.#S>1&&(a=`scale(${1/se.#S})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:o}=s,{canvasWidth:l,fontSize:c}=i;se.#T(r,c*this.#a,o);const{width:u}=r.measureText(e.textContent);u>0&&(a=`scaleX(${l*this.#a/u}) ${a}`)}i.angle!==0&&(a=`rotate(${i.angle}deg) ${a}`),a.length>0&&(s.transform=a)}static cleanup(){if(!(this.#C.size>0)){this.#b.clear();for(const{canvas:t}of this.#x.values())t.remove();this.#x.clear()}}static#D(t=null){let e=this.#x.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#x.set(t,e),this.#w.set(e,{size:0,family:""})}return e}static#T(t,e,i){const r=this.#w.get(t);e===r.size&&i===r.family||(t.font=`${e}px ${i}`,r.size=e,r.family=i)}static#P(){if(this.#S!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#S=t.getBoundingClientRect().height,t.remove()}static#M(t,e){const i=this.#b.get(t);if(i)return i;const r=this.#D(e);r.canvas.width=r.canvas.height=ce,this.#T(r,ce,t);const s=r.measureText("");let a=s.fontBoundingBoxAscent,o=Math.abs(s.fontBoundingBoxDescent);if(a){const u=a/(a+o);return this.#b.set(t,u),r.canvas.width=r.canvas.height=0,u}r.strokeStyle="red",r.clearRect(0,0,ce,ce),r.strokeText("g",0,0);let l=r.getImageData(0,0,ce,ce).data;o=0;for(let u=l.length-1-3;u>=0;u-=4)if(l[u]>0){o=Math.ceil(u/4/ce);break}r.clearRect(0,0,ce,ce),r.strokeText("A",0,ce),l=r.getImageData(0,0,ce,ce).data,a=0;for(let u=0,d=l.length;u<d;u+=4)if(l[u]>0){a=ce-Math.floor(u/4/ce);break}r.canvas.width=r.canvas.height=0;const c=a?a/(a+o):Pv;return this.#b.set(t,c),c}}class Ji{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function r(s){if(!s)return;let a=null;const o=s.name;if(o==="#text")a=s.value;else if(Ji.shouldBuildText(o))s?.attributes?.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&e.push({str:a}),!!s.children)for(const l of s.children)r(l)}return r(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const Iv=65536,kv=100,Ov=5e3,Mv=ae?Xg:Gg,Lv=ae?Kg:Dd,Nv=ae?Vg:Wg,Fv=ae?Yg:kd;function Bv(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new Io,{docId:e}=t,i=n.url?jv(n.url):null,r=n.data?$v(n.data):null,s=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,l=n.range instanceof $d?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:Iv;let u=n.worker instanceof Ht?n.worker:null;const d=n.verbosity,h=typeof n.docBaseUrl=="string"&&!ys(n.docBaseUrl)?n.docBaseUrl:null,p=typeof n.cMapUrl=="string"?n.cMapUrl:null,f=n.cMapPacked!==!1,m=n.CMapReaderFactory||Lv,v=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,g=n.StandardFontDataFactory||Fv,b=n.stopAtErrors!==!0,y=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,w=n.isEvalSupported!==!1,x=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!ae,E=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!ae&&(oe.platform.isFirefox||!globalThis.chrome),S=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,D=typeof n.disableFontFace=="boolean"?n.disableFontFace:ae,T=n.fontExtraProperties===!0,L=n.enableXfa===!0,k=n.ownerDocument||globalThis.document,j=n.disableRange===!0,R=n.disableStream===!0,P=n.disableAutoFetch===!0,U=n.pdfBug===!0,$=n.CanvasFactory||Mv,O=n.FilterFactory||Nv,M=n.enableHWA===!0,V=l?l.length:n.length??NaN,at=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!ae&&!D,Y=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:m===Dd&&g===kd&&p&&v&&$i(p,document.baseURI)&&$i(v,document.baseURI);n.canvasFactory&&sc("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&sc("`filterFactory`-instance option, please use `FilterFactory` instead.");const Q=null;Eg(d);const ut={canvasFactory:new $({ownerDocument:k,enableHWA:M}),filterFactory:new O({docId:e,ownerDocument:k}),cMapReaderFactory:Y?null:new m({baseUrl:p,isCompressed:f}),standardFontDataFactory:Y?null:new g({baseUrl:v})};if(!u){const pt={verbosity:d,port:Gi.workerPort};u=pt.port?Ht.fromPort(pt):new Ht(pt),t._worker=u}const _t={docId:e,apiVersion:"4.9.155",data:r,password:o,disableAutoFetch:P,rangeChunkSize:c,length:V,docBaseUrl:h,enableXfa:L,evaluatorOptions:{maxImageSize:y,disableFontFace:D,ignoreErrors:b,isEvalSupported:w,isOffscreenCanvasSupported:x,isImageDecoderSupported:E,canvasMaxAreaInBytes:S,fontExtraProperties:T,useSystemFonts:at,cMapUrl:Y?p:null,standardFontDataUrl:Y?v:null}},Rt={disableFontFace:D,fontExtraProperties:T,ownerDocument:k,pdfBug:U,styleElement:Q,loadingParams:{disableAutoFetch:P,enableXfa:L}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const pt=u.messageHandler.sendWithPromise("GetDocRequest",_t,r?[r.buffer]:null);let rt;if(l)rt=new pv(l,{disableRange:j,disableStream:R});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");let ft;if(ae)if($i(i)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");ft=bc}else ft=_v;else ft=$i(i)?bc:wv;rt=new ft({url:i,length:V,httpHeaders:s,withCredentials:a,rangeChunkSize:c,disableRange:j,disableStream:R})}return pt.then(ft=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Xt=new zi(e,ft,u.port),wt=new qv(Xt,t,rt,Rt,ut);t._transport=wt,Xt.send("Ready",null)})}).catch(t._capability.reject),t}function jv(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(ae&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function $v(n){if(ae&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return vs(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function yc(n){return typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0}class Io{static#t=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Io.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}}class $d{constructor(t,e,i=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){yt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class zv{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return st(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Hv{#t=null;#e=!1;constructor(t,e,i,r=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=r?new rc:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new zd,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:s=!1}={}){return new lr({viewBox:this.view,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:s})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return st(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:r=yn.ENABLE,transform:s=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:d=!1}){this._stats?.time("Overall");const h=this._transport.getRenderingIntent(i,r,u,d),{renderingIntent:p,cacheKey:f}=h;this.#e=!1,this.#i(),o||=this._transport.getOptionalContentConfig(p);let m=this._intentStates.get(f);m||(m=Object.create(null),this._intentStates.set(f,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const v=!!(p&me.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(h));const g=w=>{m.renderTasks.delete(b),(this._maybeCleanupAfterRender||v)&&(this.#e=!0),this.#n(!v),w?(b.capability.reject(w),this._abortOperatorList({intentState:m,reason:w instanceof Error?w:new Error(w)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},b=new ci({callback:g,params:{canvasContext:t,viewport:e,transform:s,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:c});(m.renderTasks||=new Set).add(b);const y=b.task;return Promise.all([m.displayReadyCapability.promise,o]).then(([w,x])=>{if(this.destroyed){g();return}if(this._stats?.time("Rendering"),!(x.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");b.initializeGraphics({transparency:w,optionalContentConfig:x}),b.operatorListChanged()}).catch(g),y}getOperatorList({intent:t="display",annotationMode:e=yn.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(t,e,i,r,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Ji.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,r){function s(){a.read().then(function({value:l,done:c}){if(c){i(o);return}o.lang??=l.lang,Object.assign(o.styles,l.styles),o.items.push(...l.items),s()},r)}const a=e.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#e=!1,this.#i(),Promise.all(t)}cleanup(t=!1){this.#e=!0;const e=this.#n(!1);return t&&e&&(this._stats&&=new rc),e}#n(t=!1){if(this.#i(),!this.#e||this.destroyed)return!1;if(t)return this.#t=setTimeout(()=>{this.#t=null,this.#n(!1)},Ov),!1;for(const{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#i(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,r=t.length;i<r;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:r}){const{map:s,transfer:a}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s,modifiedIds:r},a).getReader(),c=this._intentStates.get(e);c.streamReader=l;const u=()=>{l.read().then(({value:d,done:h})=>{if(h){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,c),u())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const h of c.renderTasks)h.operatorListChanged();this.#n(!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else if(c.opListReadCapability)c.opListReadCapability.reject(d);else throw d}})};u()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Eo){let r=kv;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new ei(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}class Uv{#t=new Map;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,i)})}addEventListener(t,e,i=null){let r=null;if(i?.signal instanceof AbortSignal){const{signal:s}=i;if(s.aborted){it("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(t,e);r=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}this.#t.set(e,r)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}class Ht{static#t=0;static#e=!1;static#n;static{ae&&(this.#e=!0,Gi.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(t,e)=>{let i;try{if(i=new URL(t),!i.origin||i.origin==="null")return!1}catch{return!1}const r=new URL(e,i);return i.origin===r.origin},this._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}}constructor({name:t=null,port:e=null,verbosity:i=Sg()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if(Ht.#n?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(Ht.#n||=new WeakMap).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}#i(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new zi("main","worker",t),this._messageHandler.on("ready",function(){}),this.#i()}_initialize(){if(Ht.#e||Ht.#s){this._setupFakeWorker();return}let{workerSrc:t}=Ht;try{Ht._isSameOrigin(window.location.href,t)||(t=Ht._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new zi("main","worker",e),r=()=>{s.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;e.addEventListener("error",()=>{this._webWorker||r()},{signal:s.signal}),i.on("test",o=>{if(s.abort(),this.destroyed||!o){r();return}this._messageHandler=i,this._port=e,this._webWorker=e,this.#i()}),i.on("ready",o=>{if(s.abort(),this.destroyed){r();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;i.send("test",o,[o.buffer])};a();return}catch{ms("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Ht.#e||(it("Setting up fake worker."),Ht.#e=!0),Ht._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new Uv;this._port=e;const i=`fake${Ht.#t++}`,r=new zi(i+"_worker",i,e);t.setup(r,e),this._messageHandler=new zi(i,i+"_worker",e),this.#i()}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker?.terminate(),this._webWorker=null,Ht.#n?.delete(this._port),this._port=null,this._messageHandler?.destroy(),this._messageHandler=null}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const e=this.#n?.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ht(t)}static get workerSrc(){if(Gi.workerSrc)return Gi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#s(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return st(this,"_setupFakeWorkerGlobal",(async()=>this.#s?this.#s:(await import(this.workerSrc)).WorkerMessageHandler)())}}class qv{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#s=null;constructor(t,e,i,r,s){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new zd,this.fontLoader=new Ug({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#r(t,e=null){const i=this.#t.get(t);if(i)return i;const r=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,r),r}get annotationStorage(){return st(this,"annotationStorage",new Ro)}getRenderingIntent(t,e=yn.ENABLE,i=null,r=!1,s=!1){let a=me.DISPLAY,o=Ua;switch(t){case"any":a=me.ANY;break;case"display":break;case"print":a=me.PRINT;break;default:it(`getRenderingIntent - invalid intent: ${t}`)}const l=a&me.PRINT&&i instanceof _d?i:this.annotationStorage;switch(e){case yn.DISABLE:a+=me.ANNOTATIONS_DISABLE;break;case yn.ENABLE:break;case yn.ENABLE_FORMS:a+=me.ANNOTATIONS_FORMS;break;case yn.ENABLE_STORAGE:a+=me.ANNOTATIONS_STORAGE,o=l.serializable;break;default:it(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(a+=me.IS_EDITING),s&&(a+=me.OPLIST);const{ids:c,hash:u}=l.modifiedIds,d=[a,o.hash,u];return{renderingIntent:a,cacheKey:d.join("_"),annotationStorageSerializable:o,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),se.cleanup(),this._networkStream?.cancelAllRequests(new ei("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,r)=>{Mt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},r.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){r.close();return}Mt(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{this._fullReader.cancel(s),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:s,contentLength:a}=this._fullReader;return(!r||!s)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=o=>{e.onProgress?.({loaded:o.loaded,total:o.total})}),{isStreamingSupported:r,isRangeSupported:s,contentLength:a}}),t.on("GetRangeReader",(i,r)=>{Mt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(i.begin,i.end);if(!s){r.close();return}r.onPull=()=>{s.read().then(function({value:a,done:o}){if(o){r.close();return}Mt(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{s.cancel(a),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new zv(i,this))}),t.on("DocException",function(i){let r;switch(i.name){case"PasswordException":r=new $a(i.message,i.code);break;case"InvalidPDFException":r=new Ad(i.message);break;case"MissingPDFException":r=new or(i.message);break;case"UnexpectedResponseException":r=new gs(i.message,i.status);break;case"UnknownErrorException":r=new za(i.message,i.details);break;default:yt("DocException - expected a valid Error.")}e._capability.reject(r)}),t.on("PasswordRequest",i=>{if(this.#s=Promise.withResolvers(),e.onPassword){const r=s=>{s instanceof Error?this.#s.reject(s):this.#s.resolve({password:s})};try{e.onPassword(r,i.code)}catch(s){this.#s.reject(s)}}else this.#s.reject(new $a(i.message,i.code));return this.#s.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,r,s])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:a,fontExtraProperties:o,pdfBug:l}=this._params;if("error"in s){const h=s.error;it(`Error during font loading: ${h}`),this.commonObjs.resolve(i,h);break}const c=l&&globalThis.FontInspector?.enabled?(h,p)=>globalThis.FontInspector.fontAdded(h,p):null,u=new qg(s,{disableFontFace:a,inspectFont:c});this.fontLoader.bind(u).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!o&&u.data&&(u.data=null),this.commonObjs.resolve(i,u)});break;case"CopyLocalImage":const{imageRef:d}=s;Mt(d,"The imageRef must be defined.");for(const h of this.#e.values())for(const[,p]of h.objs)if(p?.ref===d)return p.dataLen?(this.commonObjs.resolve(i,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([i,r,s,a])=>{if(this.destroyed)return;const o=this.#e.get(r);if(!o.objs.has(i)){if(o._intentStates.size===0){a?.bitmap?.close();return}switch(s){case"Image":o.objs.resolve(i,a),a?.dataLen>yg&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),t.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&it("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#n.get(e);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#i.set(s.refStr,t);const a=new Hv(e,s,this,this._params.pdfBug);return this.#e.set(e,a),a});return this.#n.set(e,r),r}getPageIndex(t){return yc(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#r("GetOptionalContentConfig").then(e=>new hv(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new uv(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),se.cleanup()}}cachedPageNumber(t){if(!yc(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(e)??null}}const Cr=Symbol("INITIAL_DATA");class zd{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Cr}}get(t,e=null){if(e){const r=this.#e(t);return r.promise.then(()=>e(r.data)),null}const i=this.#t[t];if(!i||i.data===Cr)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==Cr}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Cr&&(yield[t,e])}}}class Gv{#t=null;constructor(t){this.#t=t,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class ci{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:h=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Gv(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(ci.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ci.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:s,background:a}=this.params;this.gfx=new di(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:r,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ci.#e.delete(this._canvas),this.callback(t||new Eo(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ci.#e.delete(this._canvas),this.callback())))}}const Wv="4.9.155",Vv="a4eb8407c";function xc(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Mi(n){return Math.max(0,Math.min(255,255*n))}class wc{static CMYK_G([t,e,i,r]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Mi(t),[t,t,t]}static G_HTML([t]){const e=xc(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(Mi)}static RGB_HTML(t){return`#${t.map(xc).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,i+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,i,r]){return[Mi(1-Math.min(1,t+r)),Mi(1-Math.min(1,i+r)),Mi(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const r=1-t,s=1-e,a=1-i,o=Math.min(r,s,a);return["CMYK",r,s,a,o]}}class Xv{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){yt("Abstract method `_createSVG` called.")}}class ko extends Xv{_createSVG(t){return document.createElementNS(dn,t)}}class Hd{static setupStorage(t,e,i,r,s){const a=r.getValue(e,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),s==="print")break;t.addEventListener("input",o=>{r.setValue(e,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?t.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&t.removeAttribute("checked"),s==="print")break;t.addEventListener("change",o=>{r.setValue(e,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),s==="print")break;t.addEventListener("input",o=>{r.setValue(e,{value:o.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(const o of i.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}t.addEventListener("input",o=>{const l=o.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;r.setValue(e,{value:c})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:r,linkService:s}){const{attributes:a}=e,o=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[l,c]of Object.entries(a))if(c!=null)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,c)}o&&s.addLinkAttributes(t,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(t,a.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,r=t.xfaHtml,s=t.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:s,linkService:i});const o=s!=="richText",l=t.div;if(l.append(a),t.viewport){const d=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=d}o&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(r.children.length===0){if(r.value){const d=document.createTextNode(r.value);a.append(d),o&&Ji.shouldBuildText(r.name)&&c.push(d)}return{textDivs:c}}const u=[[r,-1,a]];for(;u.length>0;){const[d,h,p]=u.at(-1);if(h+1===d.children.length){u.pop();continue}const f=d.children[++u.at(-1)[1]];if(f===null)continue;const{name:m}=f;if(m==="#text"){const g=document.createTextNode(f.value);c.push(g),p.append(g);continue}const v=f?.attributes?.xmlns?document.createElementNS(f.attributes.xmlns,m):document.createElement(m);if(p.append(v),f.attributes&&this.setAttributes({html:v,element:f,storage:e,intent:s,linkService:i}),f.children?.length>0)u.push([f,-1,v]);else if(f.value){const g=document.createTextNode(f.value);o&&Ji.shouldBuildText(m)&&c.push(g),v.append(g)}}for(const d of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const ur=1e3,Kv=9,Kn=new WeakSet;function xn(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class Yv{static create(t){switch(t.data.annotationType){case Ft.LINK:return new Ud(t);case Ft.TEXT:return new Jv(t);case Ft.WIDGET:switch(t.data.fieldType){case"Tx":return new Qv(t);case"Btn":return t.data.radioButton?new qd(t):t.data.checkBox?new t1(t):new e1(t);case"Ch":return new n1(t);case"Sig":return new Zv(t)}return new ni(t);case Ft.POPUP:return new Ga(t);case Ft.FREETEXT:return new Gd(t);case Ft.LINE:return new r1(t);case Ft.SQUARE:return new s1(t);case Ft.CIRCLE:return new a1(t);case Ft.POLYLINE:return new Wd(t);case Ft.CARET:return new l1(t);case Ft.INK:return new Oo(t);case Ft.POLYGON:return new o1(t);case Ft.HIGHLIGHT:return new Vd(t);case Ft.UNDERLINE:return new c1(t);case Ft.SQUIGGLY:return new u1(t);case Ft.STRIKEOUT:return new d1(t);case Ft.STAMP:return new Xd(t);case Ft.FILEATTACHMENT:return new h1(t);default:return new kt(t)}}}class kt{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t?.str||e?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return kt._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};const{rect:e}=t;e&&this.#i(e),this.#n?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:e},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}}=this;i?.splice(0,4,...t);const{width:c,height:u}=xn(t);e.left=`${100*(t[0]-o)/s}%`,e.top=`${100*(a-t[3]+l)/a}%`,r===0?(e.width=`${100*c/s}%`,e.height=`${100*u/a}%`):this.setRotation(r)}_createContainer(t){const{data:e,parent:{page:i,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",e.id),this instanceof ni||(s.tabIndex=ur);const{style:a}=s;if(a.zIndex=this.parent.zIndex++,e.alternativeText&&(s.title=e.alternativeText),e.noRotate&&s.classList.add("norotate"),!e.rect||this instanceof Ga){const{rotation:m}=e;return!e.hasOwnCanvas&&m!==0&&this.setRotation(m,s),s}const{width:o,height:l}=xn(e.rect);if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const m=e.borderStyle.horizontalCornerRadius,v=e.borderStyle.verticalCornerRadius;if(m>0||v>0){const b=`calc(${m}px * var(--scale-factor)) / calc(${v}px * var(--scale-factor))`;a.borderRadius=b}else if(this instanceof qd){const b=`calc(${o}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;a.borderRadius=b}switch(e.borderStyle.style){case ki.SOLID:a.borderStyle="solid";break;case ki.DASHED:a.borderStyle="dashed";break;case ki.BEVELED:it("Unimplemented border style: beveled");break;case ki.INSET:it("Unimplemented border style: inset");break;case ki.UNDERLINE:a.borderBottomStyle="solid";break}const g=e.borderColor||null;g?(this.#e=!0,a.borderColor=z.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):a.borderWidth=0}const c=z.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:u,pageHeight:d,pageX:h,pageY:p}=r.rawDims;a.left=`${100*(c[0]-h)/u}%`,a.top=`${100*(c[1]-p)/d}%`;const{rotation:f}=e;return e.hasOwnCanvas||f===0?(a.width=`${100*o/u}%`,a.height=`${100*l/d}%`):this.setRotation(f,s),s}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:s,height:a}=xn(this.data.rect);let o,l;t%180===0?(o=100*s/i,l=100*a/r):(o=100*a/i,l=100*s/r),e.style.width=`${o}%`,e.style.height=`${l}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,r)=>{const s=r.detail[e],a=s[0],o=s.slice(1);r.target.style[i]=wc[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:wc[`${a}_rgb`](o)})};return st(this,"_commonActions",{display:e=>{const{display:i}=e.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const r of Object.keys(e.detail))(t[r]||i[r])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[r,s]of Object.entries(e)){const a=i[r];if(a){const o={detail:{[r]:s},target:t};a(o),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,r,s]=this.data.rect.map(m=>Math.fround(m));if(t.length===8){const[m,v,g,b]=t.subarray(2,6);if(r===m&&s===v&&e===g&&i===b)return}const{style:a}=this.container;let o;if(this.#e){const{borderColor:m,borderWidth:v}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${v}">`],this.container.classList.add("hasBorder")}const l=r-e,c=s-i,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const h=u.createElement("defs");d.append(h);const p=u.createElement("clipPath"),f=`clippath_${this.data.id}`;p.setAttribute("id",f),p.setAttribute("clipPathUnits","objectBoundingBox"),h.append(p);for(let m=2,v=t.length;m<v;m+=8){const g=t[m],b=t[m+1],y=t[m+2],w=t[m+3],x=u.createElement("rect"),E=(y-e)/l,S=(s-b)/c,D=(g-y)/l,T=(b-w)/c;x.setAttribute("x",E),x.setAttribute("y",S),x.setAttribute("width",D),x.setAttribute("height",T),p.append(x),o?.push(`<rect vector-effect="non-scaling-stroke" x="${E}" y="${S}" width="${D}" height="${T}"/>`)}this.#e&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(d),this.container.style.clipPath=`url(#${f})`}_createPopup(){const{data:t}=this,e=this.#n=new Ga({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(e.render())}render(){yt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:s,id:a,exportValues:o}of r){if(s===-1||a===e)continue;const l=typeof o=="string"?o:null,c=document.querySelector(`[data-element-id="${a}"]`);if(c&&!Kn.has(c)){it(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:l,domElement:c})}return i}for(const r of document.getElementsByName(t)){const{exportValue:s}=r,a=r.getAttribute("data-element-id");a!==e&&Kn.has(r)&&i.push({id:a,exportValue:s,domElement:r})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}}class Ud extends kt{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action),r=!0):t.attachment?(this.#e(i,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(this.#n(i,t.setOCGState),r=!0):t.dest?(this._bindLink(i,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#t()}#e(t,e,i=null){t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#t()}#n(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(e.actions)){const s=i.get(r);s&&(t[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:r}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){it('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:r,refs:s,include:a}=e,o=[];if(r.length!==0||s.length!==0){const u=new Set(s);for(const d of r){const h=this._fieldObjects[d]||[];for(const{id:p}of h)u.add(p)}for(const d of Object.values(this._fieldObjects))for(const h of d)u.has(h.id)===a&&o.push(h)}else for(const u of Object.values(this._fieldObjects))o.push(...u);const l=this.annotationStorage,c=[];for(const u of o){const{id:d}=u;switch(c.push(d),u.type){case"text":{const p=u.defaultValue||"";l.setValue(d,{value:p});break}case"checkbox":case"radiobutton":{const p=u.defaultValue===u.exportValues;l.setValue(d,{value:p});break}case"combobox":case"listbox":{const p=u.defaultValue||"";l.setValue(d,{value:p});break}default:continue}const h=document.querySelector(`[data-element-id="${d}"]`);if(h){if(!Kn.has(h)){it(`_bindResetFormAction - element not allowed: ${d}`);continue}}else continue;h.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}}class Jv extends kt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class ni extends kt{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return oe.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,r,s){i.includes("mouse")?t.addEventListener(i,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(i,a=>{if(i==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a)}})})}_setEventListeners(t,e,i,r){for(const[s,a]of i)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,s,a,r),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":z.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||Kv,s=t.style;let a;const o=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o),u=Math.round(c/(Zs*r))||1,d=c/u;a=Math.min(r,l(d/Zs))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(r,l(c/Zs))}s.fontSize=`calc(${a}px * var(--scale-factor))`,s.color=z.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(s.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Qv extends ni{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,r){const s=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=i),s.setValue(a.id,{[r]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const r=t.getValue(e,{value:this.data.fieldValue});let s=r.value||"";const a=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;a&&s.length>a&&(s=s.slice(0,a));let o=r.formattedValue||this.data.textContent?.join(`
`)||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));const l={userValue:s,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=o??s,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",o??s),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Kn.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=ur,this._setRequired(i,this.data.required),a&&(i.maxLength=a),i.addEventListener("input",u=>{t.setValue(e,{value:u.target.value}),this.setPropertyOnSiblings(i,"value",u.target.value,"value"),l.formattedValue=null}),i.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue??"";i.value=l.userValue=d,l.formattedValue=null});let c=u=>{const{formattedValue:d}=l;d!=null&&(u.target.value=d),u.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",d=>{if(l.focused)return;const{target:h}=d;l.userValue&&(h.value=l.userValue),l.lastCommittedValue=h.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),i.addEventListener("updatefromsandbox",d=>{this.showElementAndHideCanvas(d.target);const h={value(p){l.userValue=p.detail.value??"",t.setValue(e,{value:l.userValue.toString()}),p.target.value=l.userValue},formattedValue(p){const{formattedValue:f}=p.detail;l.formattedValue=f,f!=null&&p.target!==document.activeElement&&(p.target.value=f),t.setValue(e,{formattedValue:f})},selRange(p){p.target.setSelectionRange(...p.detail.selRange)},charLimit:p=>{const{charLimit:f}=p.detail,{target:m}=p;if(f===0){m.removeAttribute("maxLength");return}m.setAttribute("maxLength",f);let v=l.userValue;!v||v.length<=f||(v=v.slice(0,f),m.value=l.userValue=v,t.setValue(e,{value:v}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,willCommit:!0,commitKey:1,selStart:m.selectionStart,selEnd:m.selectionEnd}}))}};this._dispatchEventFromSandbox(h,d)}),i.addEventListener("keydown",d=>{l.commitKey=1;let h=-1;if(d.key==="Escape"?h=0:d.key==="Enter"&&!this.data.multiLine?h=2:d.key==="Tab"&&(l.commitKey=3),h===-1)return;const{value:p}=d.target;l.lastCommittedValue!==p&&(l.lastCommittedValue=p,l.userValue=p,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:p,willCommit:!0,commitKey:h,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}))});const u=c;c=null,i.addEventListener("blur",d=>{if(!l.focused||!d.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);const{value:h}=d.target;l.userValue=h,l.lastCommittedValue!==h&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,willCommit:!0,commitKey:l.commitKey,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}),u(d)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",d=>{l.lastCommittedValue=null;const{data:h,target:p}=d,{value:f,selectionStart:m,selectionEnd:v}=p;let g=m,b=v;switch(d.inputType){case"deleteWordBackward":{const y=f.substring(0,m).match(/\w*[^\w]*$/);y&&(g-=y[0].length);break}case"deleteWordForward":{const y=f.substring(m).match(/^[^\w]*\w*/);y&&(b+=y[0].length);break}case"deleteContentBackward":m===v&&(g-=1);break;case"deleteContentForward":m===v&&(b+=1);break}d.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,change:h||"",willCommit:!1,selStart:g,selEnd:b}})}),this._setEventListeners(i,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.value)}if(c&&i.addEventListener("blur",c),this.data.comb){const d=(this.data.rect[2]-this.data.rect[0])/a;i.classList.add("comb"),i.style.letterSpacing=`calc(${d}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Zv extends ni{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class t1 extends ni{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Kn.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=e.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",e.exportValue),s.tabIndex=ur,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,i)){const u=l&&c.exportValue===e.exportValue;c.domElement&&(c.domElement.checked=u),t.setValue(c.id,{value:u})}t.setValue(i,{value:l})}),s.addEventListener("resetform",a=>{const o=e.defaultFieldValue||"Off";a.target.checked=o===e.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class qd extends ni{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(i,{value:r})),r)for(const a of this._getElementsByName(e.fieldName,i))t.setValue(a.id,{value:!1});const s=document.createElement("input");if(Kn.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=e.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=ur,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,i))t.setValue(c.id,{value:!1});t.setValue(i,{value:l})}),s.addEventListener("resetform",a=>{const o=e.defaultFieldValue;a.target.checked=o!=null&&o===e.buttonValue}),this.enableScripting&&this.hasJSActions){const a=e.buttonValue;s.addEventListener("updatefromsandbox",o=>{const l={value:c=>{const u=a===c.detail.value;for(const d of this._getElementsByName(c.target.name)){const h=u&&d.id===i;d.domElement&&(d.domElement.checked=h),t.setValue(d.id,{value:h})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class e1 extends Ud{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class n1 extends ni{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");Kn.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=ur;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue;for(const h of r.options)h.selected=h.value===d});for(const u of this.data.options){const d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,i.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),s=!1),r.append(d)}let a=null;if(s){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),r.prepend(u),a=()=>{u.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const o=u=>{const d=u?"value":"textContent",{options:h,multiple:p}=r;return p?Array.prototype.filter.call(h,f=>f.selected).map(f=>f[d]):h.selectedIndex===-1?null:h[h.selectedIndex][d]};let l=o(!1);const c=u=>{const d=u.target.options;return Array.prototype.map.call(d,h=>({displayValue:h.textContent,exportValue:h.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",u=>{const d={value(h){a?.();const p=h.detail.value,f=new Set(Array.isArray(p)?p:[p]);for(const m of r.options)m.selected=f.has(m.value);t.setValue(e,{value:o(!0)}),l=o(!1)},multipleSelection(h){r.multiple=!0},remove(h){const p=r.options,f=h.detail.remove;p[f].selected=!1,r.remove(f),p.length>0&&Array.prototype.findIndex.call(p,v=>v.selected)===-1&&(p[0].selected=!0),t.setValue(e,{value:o(!0),items:c(h)}),l=o(!1)},clear(h){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),l=o(!1)},insert(h){const{index:p,displayValue:f,exportValue:m}=h.detail.insert,v=r.children[p],g=document.createElement("option");g.textContent=f,g.value=m,v?v.before(g):r.append(g),t.setValue(e,{value:o(!0),items:c(h)}),l=o(!1)},items(h){const{items:p}=h.detail;for(;r.length!==0;)r.remove(0);for(const f of p){const{displayValue:m,exportValue:v}=f,g=document.createElement("option");g.textContent=m,g.value=v,r.append(g)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:o(!0),items:c(h)}),l=o(!1)},indices(h){const p=new Set(h.detail.indices);for(const f of h.target.options)f.selected=p.has(f.index);t.setValue(e,{value:o(!0)}),l=o(!1)},editable(h){h.target.disabled=!h.detail.editable}};this._dispatchEventFromSandbox(d,u)}),r.addEventListener("input",u=>{const d=o(!0),h=o(!1);t.setValue(e,{value:d}),u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:h,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):r.addEventListener("input",function(u){t.setValue(e,{value:o(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Ga extends kt{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:kt._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new i1({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(i=>`${Ao}${i}`).join(",")),this.container}}class i1{#t=this.#_.bind(this);#e=this.#T.bind(this);#n=this.#D.bind(this);#i=this.#A.bind(this);#s=null;#r=null;#c=null;#o=null;#u=null;#l=null;#d=null;#a=!1;#h=null;#p=null;#f=null;#g=null;#m=null;#v=null;#b=!1;constructor({container:t,color:e,elements:i,titleObj:r,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:c,parentRect:u,open:d}){this.#r=t,this.#m=r,this.#c=a,this.#g=o,this.#l=l,this.#s=e,this.#f=c,this.#d=u,this.#u=i,this.#o=Sd.toDateObject(s),this.trigger=i.flatMap(h=>h.getElementsToTriggerPopup());for(const h of this.trigger)h.addEventListener("click",this.#i),h.addEventListener("mouseenter",this.#n),h.addEventListener("mouseleave",this.#e),h.classList.add("popupTriggerArea");for(const h of i)h.container?.addEventListener("keydown",this.#t);this.#r.hidden=!0,d&&this.#A()}render(){if(this.#h)return;const t=this.#h=document.createElement("div");if(t.className="popup",this.#s){const s=t.style.outlineColor=z.makeHexColor(...this.#s);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:t.style.backgroundColor=z.makeHexColor(...this.#s.map(o=>Math.floor(.7*(255-o)+o)))}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=this.#m,t.append(e),this.#o){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#o.valueOf()})),e.append(s)}const r=this.#x;if(r)Hd.render({xfaHtml:r,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(this.#c);t.append(s)}this.#r.append(t)}get#x(){const t=this.#g,e=this.#c;return t?.str&&(!e?.str||e.str===t.str)&&this.#g.html||null}get#w(){return this.#x?.attributes?.style?.fontSize||0}get#S(){return this.#x?.attributes?.style?.color||null}#C(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:this.#S,fontSize:this.#w?`calc(${this.#w}px * var(--scale-factor))`:""}};for(const s of t.split(`
`))e.push({name:"span",value:s,attributes:r});return i}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const r=t.split(/(?:\r\n?|\n)/);for(let s=0,a=r.length;s<a;++s){const o=r[s];i.append(document.createTextNode(o)),s<a-1&&i.append(document.createElement("br"))}return i}#_(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#a)&&this.#A()}updateEdited({rect:t,popupContent:e}){this.#v||={contentsObj:this.#c,richText:this.#g},t&&(this.#p=null),e&&(this.#g=this.#C(e),this.#c=null),this.#h?.remove(),this.#h=null}resetEdited(){this.#v&&({contentsObj:this.#c,richText:this.#g}=this.#v,this.#v=null,this.#h?.remove(),this.#h=null,this.#p=null)}#R(){if(this.#p!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:r,pageY:s}}}=this.#l;let a=!!this.#d,o=a?this.#d:this.#f;for(const f of this.#u)if(!o||z.intersect(f.data.rect,o)!==null){o=f.data.rect,a=!0;break}const l=z.normalizeRect([o[0],t[3]-o[1]+t[1],o[2],t[3]-o[3]+t[1]]),u=a?o[2]-o[0]+5:0,d=l[0]+u,h=l[1];this.#p=[100*(d-r)/e,100*(h-s)/i];const{style:p}=this.#r;p.left=`${this.#p[0]}%`,p.top=`${this.#p[1]}%`}#A(){this.#a=!this.#a,this.#a?(this.#D(),this.#r.addEventListener("click",this.#i),this.#r.addEventListener("keydown",this.#t)):(this.#T(),this.#r.removeEventListener("click",this.#i),this.#r.removeEventListener("keydown",this.#t))}#D(){this.#h||this.render(),this.isVisible?this.#a&&this.#r.classList.add("focused"):(this.#R(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#T(){this.#r.classList.remove("focused"),!(this.#a||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#b=this.isVisible,this.#b&&(this.#r.hidden=!0)}maybeShow(){this.#b&&(this.#h||this.#D(),this.#b=!1,this.#r.hidden=!1)}get isVisible(){return this.#r.hidden===!1}}class Gd extends kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=tt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class r1 extends kt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:e,height:i}=xn(t.rect),r=this.svgFactory.create(e,i,!0),s=this.#t=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class s1 extends kt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:e,height:i}=xn(t.rect),r=this.svgFactory.create(e,i,!0),s=t.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",s/2),a.setAttribute("y",s/2),a.setAttribute("width",e-s),a.setAttribute("height",i-s),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class a1 extends kt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:e,height:i}=xn(t.rect),r=this.svgFactory.create(e,i,!0),s=t.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",e/2),a.setAttribute("cy",i/2),a.setAttribute("rx",e/2-s/2),a.setAttribute("ry",i/2-s/2),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Wd extends kt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:r}}=this;if(!e)return this.container;const{width:s,height:a}=xn(t),o=this.svgFactory.create(s,a,!0);let l=[];for(let u=0,d=e.length;u<d;u+=2){const h=e[u]-t[0],p=t[3]-e[u+1];l.push(`${h},${p}`)}l=l.join(" ");const c=this.#t=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",l),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class o1 extends Wd{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class l1 extends kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Oo extends kt{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?tt.HIGHLIGHT:tt.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:r,popupRef:s}}=this,{transform:a,width:o,height:l}=this.#n(e,t),c=this.svgFactory.create(o,l,!0),u=this.#t=this.svgFactory.createElement("svg:g");c.append(u),u.setAttribute("stroke-width",r.width||1),u.setAttribute("stroke-linecap","round"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("stroke-miterlimit",10),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),u.setAttribute("transform",a);for(let d=0,h=i.length;d<h;d++){const p=this.svgFactory.createElement(this.svgElementName);this.#e.push(p),p.setAttribute("points",i[d].join(",")),u.append(p)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:r}=t,s=this.#t;if(e>=0&&s.setAttribute("stroke-width",e||1),i)for(let a=0,o=this.#e.length;a<o;a++)this.#e[a].setAttribute("points",i[a].join(","));if(r){const{transform:a,width:o,height:l}=this.#n(this.data.rotation,r);s.parentElement.setAttribute("viewBox",`0 0 ${o} ${l}`),s.setAttribute("transform",a)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Vd extends kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=tt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class c1 extends kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class u1 extends kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class d1 extends kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Xd extends kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=tt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class h1 extends kt{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:r}=oe.platform;return t.addEventListener("keydown",s=>{s.key==="Enter"&&(r?s.metaKey:s.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class p1{#t=null;#e=null;#n=new Map;#i=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:o}){this.div=t,this.#t=e,this.#e=i,this.#i=o||null,this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return this.#n.size>0}async#s(t,e){const i=t.firstChild||t,r=i.id=`${Ao}${e}`,s=await this.#i?.getAriaAttributes(r);if(s)for(const[a,o]of s)i.setAttribute(a,o);this.div.append(t),this.#t?.moveElementInDOM(this.div,t,i,!1)}async render(t){const{annotations:e}=t,i=this.div;Xn(i,this.viewport);const r=new Map,s={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ko,annotationStorage:t.annotationStorage||new Ro,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const o=a.annotationType===Ft.POPUP;if(o){const u=r.get(a.id);if(!u)continue;s.elements=u}else{const{width:u,height:d}=xn(a.rect);if(u<=0||d<=0)continue}s.data=a;const l=Yv.create(s);if(!l.isRenderable)continue;if(!o&&a.popupRef){const u=r.get(a.popupRef);u?u.push(l):r.set(a.popupRef,[l])}const c=l.render();a.hidden&&(c.style.visibility="hidden"),await this.#s(c,a.id),l._isEditable&&(this.#n.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#r()}update({viewport:t}){const e=this.div;this.viewport=t,Xn(e,{rotation:t.rotation}),this.#r(),e.hidden=!1}#r(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const r=t.querySelector(`[data-annotation-id="${e}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:s}=r;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):r.append(i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}}const _r=/\r\n?|\n/g;class Bt extends nt{#t;#e="";#n=`${this.id}-editor`;#i=null;#s;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Bt.prototype,e=s=>s.isEmpty(),i=Cn.TRANSLATE_SMALL,r=Cn.TRANSLATE_BIG;return st(this,"_keyboardManager",new cr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:e}]]))}static _type="freetext";static _editorType=tt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||Bt._defaultColor||nt._defaultLineColor,this.#s=t.fontSize||Bt._defaultFontSize}static initialize(t,e){nt.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case ot.FREETEXT_SIZE:Bt._defaultFontSize=e;break;case ot.FREETEXT_COLOR:Bt._defaultColor=e;break}}updateParams(t,e){switch(t){case ot.FREETEXT_SIZE:this.#r(e);break;case ot.FREETEXT_COLOR:this.#c(e);break}}static get defaultPropertiesToUpdate(){return[[ot.FREETEXT_SIZE,Bt._defaultFontSize],[ot.FREETEXT_COLOR,Bt._defaultColor||nt._defaultLineColor]]}get propertiesToUpdate(){return[[ot.FREETEXT_SIZE,this.#s],[ot.FREETEXT_COLOR,this.#t]]}#r(t){const e=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-this.#s)*this.parentScale),this.#s=r,this.#u()},i=this.#s;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ot.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#c(t){const e=r=>{this.#t=this.editorDiv.style.color=r},i=this.#t;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ot.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Bt._internalPadding*t,-(Bt._internalPadding+this.#s)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(tt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#o(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(Bt.#l(i)),e=i);return t.join(`
`)}#u(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:s}=this,a=s.style.display,o=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",r.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=a,s.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,e=this.#e=this.#o().trimEnd();if(t===e)return;const i=r=>{if(this.#e=r,!r){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Bt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#s}px * var(--scale-factor))`,i.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Kr(this,this.div,["dblclick","keydown"]),this.width){const[r,s]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[o,l]=this.getInitialTranslation();[o,l]=this.pageTranslationToScreen(o,l);const[c,u]=this.pageDimensions,[d,h]=this.pageTranslation;let p,f;switch(this.rotation){case 0:p=t+(a[0]-d)/c,f=e+this.height-(a[1]-h)/u;break;case 90:p=t+(a[0]-d)/c,f=e-(a[1]-h)/u,[o,l]=[l,-o];break;case 180:p=t-this.width+(a[0]-d)/c,f=e-(a[1]-h)/u,[o,l]=[-o,-l];break;case 270:p=t+(a[0]-d-this.height*u)/c,f=e+(a[1]-h-this.width*c)/u,[o,l]=[-l,o];break}this.setAt(p*r,f*s,o,l)}else this.setAt(t*r,e*s,this.width*r,this.height*s);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#l(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(_r,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const r=Bt.#h(e.getData("text")||"").replaceAll(_r,`
`);if(!r)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const a=s.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),s.collapseToStart();return}const{startContainer:o,startOffset:l}=a,c=[],u=[];if(o.nodeType===Node.TEXT_NODE){const p=o.parentElement;if(u.push(o.nodeValue.slice(l).replaceAll(_r,"")),p!==this.editorDiv){let f=c;for(const m of this.editorDiv.childNodes){if(m===p){f=u;continue}f.push(Bt.#l(m))}}c.push(o.nodeValue.slice(0,l).replaceAll(_r,""))}else if(o===this.editorDiv){let p=c,f=0;for(const m of this.editorDiv.childNodes)f++===l&&(p=u),p.push(Bt.#l(m))}this.#e=`${c.join(`
`)}${r}${u.join(`
`)}`,this.#d();const d=new Range;let h=c.reduce((p,f)=>p+f.length,0);for(const{firstChild:p}of this.editorDiv.childNodes)if(p.nodeType===Node.TEXT_NODE){const f=p.nodeValue.length;if(h<=f){d.setStart(p,h),d.setEnd(p,h);break}h-=f}s.removeAllRanges(),s.addRange(d)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#a(){return this.#e.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(t,e,i){let r=null;if(t instanceof Gd){const{data:{defaultAppearanceData:{fontSize:a,fontColor:o},rect:l,rotation:c,id:u,popupRef:d},textContent:h,textPosition:p,parent:{page:{pageNumber:f}}}=t;if(!h||h.length===0)return null;r=t={annotationType:tt.FREETEXT,color:Array.from(o),fontSize:a,value:h.join(`
`),position:p,pageIndex:f-1,rect:l.slice(0),rotation:c,id:u,deleted:!1,popupRef:d}}const s=await super.deserialize(t,e,i);return s.#s=t.fontSize,s.#t=z.makeHexColor(...t.color),s.#e=Bt.#h(t.value),s.annotationElementId=t.id||null,s._initialData=r,s}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=Bt._internalPadding*this.parentScale,i=this.getRect(e,e),r=nt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),s={annotationType:tt.FREETEXT,color:r,fontSize:this.#s,value:this.#a(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?s:this.annotationElementId&&!this.#p(s)?null:(s.id=this.annotationElementId,s)}#p(t){const{value:e,fontSize:i,color:r,pageIndex:s}=this._initialData;return this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((a,o)=>a!==r[o])||t.pageIndex!==s}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(this.deleted)return e;const{style:i}=e;i.fontSize=`calc(${this.#s}px * var(--scale-factor))`,i.color=this.#t,e.replaceChildren();for(const s of this.#e.split(`
`)){const a=document.createElement("div");a.append(s?document.createTextNode(s):document.createElement("br")),e.append(a)}const r=Bt._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:this.#e}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class B{static PRECISION=1e-4;toSVGPath(){yt("Abstract method `toSVGPath` must be implemented.")}get box(){yt("Abstract getter `box` must be implemented.")}serialize(t,e){yt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,r,s,a){a||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=e+t[o]*r,a[o+1]=i+t[o+1]*s;return a}static _rescaleAndSwap(t,e,i,r,s,a){a||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=e+t[o+1]*r,a[o+1]=i+t[o]*s;return a}static _translate(t,e,i,r){r||=new Float32Array(t.length);for(let s=0,a=t.length;s<a;s+=2)r[s]=e+t[s],r[s+1]=i+t[s+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,r,s){switch(s){case 90:return[1-e/i,t/r];case 180:return[1-t/i,1-e/r];case 270:return[e/i,1-t/r];default:return[t/i,e/r]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,r,s,a){return[(t+5*i)/6,(e+5*r)/6,(5*i+s)/6,(5*r+a)/6,(i+s)/2,(r+a)/2]}}class Hn{#t;#e=[];#n;#i;#s=[];#r=new Float32Array(18);#c;#o;#u;#l;#d;#a;#h=[];static#p=8;static#f=2;static#g=Hn.#p+Hn.#f;constructor({x:t,y:e},i,r,s,a,o=0){this.#t=i,this.#a=s*r,this.#i=a,this.#r.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=o,this.#l=Hn.#p*r,this.#u=Hn.#g*r,this.#d=r,this.#h.push(t,e)}isEmpty(){return isNaN(this.#r[8])}#m(){const t=this.#r.subarray(4,6),e=this.#r.subarray(16,18),[i,r,s,a]=this.#t;return[(this.#c+(t[0]-e[0])/2-i)/s,(this.#o+(t[1]-e[1])/2-r)/a,(this.#c+(e[0]-t[0])/2-i)/s,(this.#o+(e[1]-t[1])/2-r)/a]}add({x:t,y:e}){this.#c=t,this.#o=e;const[i,r,s,a]=this.#t;let[o,l,c,u]=this.#r.subarray(8,12);const d=t-c,h=e-u,p=Math.hypot(d,h);if(p<this.#u)return!1;const f=p-this.#l,m=f/p,v=m*d,g=m*h;let b=o,y=l;o=c,l=u,c+=v,u+=g,this.#h?.push(t,e);const w=-g/f,x=v/f,E=w*this.#a,S=x*this.#a;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([c+E,u+S],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([c-E,u-S],16),isNaN(this.#r[6])?(this.#s.length===0&&(this.#r.set([o+E,l+S],2),this.#s.push(NaN,NaN,NaN,NaN,(o+E-i)/s,(l+S-r)/a),this.#r.set([o-E,l-S],14),this.#e.push(NaN,NaN,NaN,NaN,(o-E-i)/s,(l-S-r)/a)),this.#r.set([b,y,o,l,c,u],6),!this.isEmpty()):(this.#r.set([b,y,o,l,c,u],6),Math.abs(Math.atan2(y-l,b-o)-Math.atan2(g,v))<Math.PI/2?([o,l,c,u]=this.#r.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((o+c)/2-i)/s,((l+u)/2-r)/a),[o,l,b,y]=this.#r.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((b+o)/2-i)/s,((y+l)/2-r)/a),!0):([b,y,o,l,c,u]=this.#r.subarray(0,6),this.#s.push(((b+5*o)/6-i)/s,((y+5*l)/6-r)/a,((5*o+c)/6-i)/s,((5*l+u)/6-r)/a,((o+c)/2-i)/s,((l+u)/2-r)/a),[c,u,o,l,b,y]=this.#r.subarray(12,18),this.#e.push(((b+5*o)/6-i)/s,((y+5*l)/6-r)/a,((5*o+c)/6-i)/s,((5*l+u)/6-r)/a,((o+c)/2-i)/s,((l+u)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#s,e=this.#e;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#v();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#x(i);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return this.#b(i),i.join(" ")}#v(){const[t,e,i,r]=this.#t,[s,a,o,l]=this.#m();return`M${(this.#r[2]-t)/i} ${(this.#r[3]-e)/r} L${(this.#r[4]-t)/i} ${(this.#r[5]-e)/r} L${s} ${a} L${o} ${l} L${(this.#r[16]-t)/i} ${(this.#r[17]-e)/r} L${(this.#r[14]-t)/i} ${(this.#r[15]-e)/r} Z`}#b(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#x(t){const[e,i,r,s]=this.#t,a=this.#r.subarray(4,6),o=this.#r.subarray(16,18),[l,c,u,d]=this.#m();t.push(`L${(a[0]-e)/r} ${(a[1]-i)/s} L${l} ${c} L${u} ${d} L${(o[0]-e)/r} ${(o[1]-i)/s}`)}newFreeDrawOutline(t,e,i,r,s,a){return new Kd(t,e,i,r,s,a)}getOutlines(){const t=this.#s,e=this.#e,i=this.#r,[r,s,a,o]=this.#t,l=new Float32Array((this.#h?.length??0)+2);for(let d=0,h=l.length-2;d<h;d+=2)l[d]=(this.#h[d]-r)/a,l[d+1]=(this.#h[d+1]-s)/o;if(l[l.length-2]=(this.#c-r)/a,l[l.length-1]=(this.#o-s)/o,isNaN(i[6])&&!this.isEmpty())return this.#w(l);const c=new Float32Array(this.#s.length+24+this.#e.length);let u=t.length;for(let d=0;d<u;d+=2){if(isNaN(t[d])){c[d]=c[d+1]=NaN;continue}c[d]=t[d],c[d+1]=t[d+1]}u=this.#C(c,u);for(let d=e.length-6;d>=6;d-=6)for(let h=0;h<6;h+=2){if(isNaN(e[d+h])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=e[d+h],c[u+1]=e[d+h+1],u+=2}return this.#S(c,u),this.newFreeDrawOutline(c,l,this.#t,this.#d,this.#n,this.#i)}#w(t){const e=this.#r,[i,r,s,a]=this.#t,[o,l,c,u]=this.#m(),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-i)/s,(e[3]-r)/a,NaN,NaN,NaN,NaN,(e[4]-i)/s,(e[5]-r)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(e[16]-i)/s,(e[17]-r)/a,NaN,NaN,NaN,NaN,(e[14]-i)/s,(e[15]-r)/a],0),this.newFreeDrawOutline(d,t,this.#t,this.#d,this.#n,this.#i)}#S(t,e){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#C(t,e){const i=this.#r.subarray(4,6),r=this.#r.subarray(16,18),[s,a,o,l]=this.#t,[c,u,d,h]=this.#m();return t.set([NaN,NaN,NaN,NaN,(i[0]-s)/o,(i[1]-a)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(r[0]-s)/o,(r[1]-a)/l],e),e+=24}}class Kd extends B{#t;#e=new Float32Array(4);#n;#i;#s;#r;#c;constructor(t,e,i,r,s,a){super(),this.#c=t,this.#s=e,this.#t=i,this.#r=r,this.#n=s,this.#i=a,this.lastPoint=[NaN,NaN],this.#o(a);const[o,l,c,u]=this.#e;for(let d=0,h=t.length;d<h;d+=2)t[d]=(t[d]-o)/c,t[d+1]=(t[d+1]-l)/u;for(let d=0,h=e.length;d<h;d+=2)e[d]=(e[d]-o)/c,e[d+1]=(e[d+1]-l)/u}toSVGPath(){const t=[`M${this.#c[4]} ${this.#c[5]}`];for(let e=6,i=this.#c.length;e<i;e+=6){if(isNaN(this.#c[e])){t.push(`L${this.#c[e+4]} ${this.#c[e+5]}`);continue}t.push(`C${this.#c[e]} ${this.#c[e+1]} ${this.#c[e+2]} ${this.#c[e+3]} ${this.#c[e+4]} ${this.#c[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,r],s){const a=i-t,o=r-e;let l,c;switch(s){case 0:l=B._rescale(this.#c,t,r,a,-o),c=B._rescale(this.#s,t,r,a,-o);break;case 90:l=B._rescaleAndSwap(this.#c,t,e,a,o),c=B._rescaleAndSwap(this.#s,t,e,a,o);break;case 180:l=B._rescale(this.#c,i,e,-a,o),c=B._rescale(this.#s,i,e,-a,o);break;case 270:l=B._rescaleAndSwap(this.#c,i,r,-a,-o),c=B._rescaleAndSwap(this.#s,i,r,-a,-o);break}return{outline:Array.from(l),points:[Array.from(c)]}}#o(t){const e=this.#c;let i=e[4],r=e[5],s=i,a=r,o=i,l=r,c=i,u=r;const d=t?Math.max:Math.min;for(let p=6,f=e.length;p<f;p+=6){if(isNaN(e[p]))s=Math.min(s,e[p+4]),a=Math.min(a,e[p+5]),o=Math.max(o,e[p+4]),l=Math.max(l,e[p+5]),u<e[p+5]?(c=e[p+4],u=e[p+5]):u===e[p+5]&&(c=d(c,e[p+4]));else{const m=z.bezierBoundingBox(i,r,...e.slice(p,p+6));s=Math.min(s,m[0]),a=Math.min(a,m[1]),o=Math.max(o,m[2]),l=Math.max(l,m[3]),u<m[3]?(c=m[2],u=m[3]):u===m[3]&&(c=d(c,m[2]))}i=e[p+4],r=e[p+5]}const h=this.#e;h[0]=s-this.#n,h[1]=a-this.#n,h[2]=o-s+2*this.#n,h[3]=l-a+2*this.#n,this.lastPoint=[c,u]}get box(){return this.#e}newOutliner(t,e,i,r,s,a=0){return new Hn(t,e,i,r,s,a)}getNewOutline(t,e){const[i,r,s,a]=this.#e,[o,l,c,u]=this.#t,d=s*c,h=a*u,p=i*c+o,f=r*u+l,m=this.newOutliner({x:this.#s[0]*d+p,y:this.#s[1]*h+f},this.#t,this.#r,t,this.#i,e??this.#n);for(let v=2;v<this.#s.length;v+=2)m.add({x:this.#s[v]*d+p,y:this.#s[v+1]*h+f});return m.getOutlines()}}class Wa{#t;#e;#n=[];#i=[];constructor(t,e=0,i=0,r=!0){let s=1/0,a=-1/0,o=1/0,l=-1/0;const u=10**-4;for(const{x:g,y:b,width:y,height:w}of t){const x=Math.floor((g-e)/u)*u,E=Math.ceil((g+y+e)/u)*u,S=Math.floor((b-e)/u)*u,D=Math.ceil((b+w+e)/u)*u,T=[x,S,D,!0],L=[E,S,D,!1];this.#n.push(T,L),s=Math.min(s,x),a=Math.max(a,E),o=Math.min(o,S),l=Math.max(l,D)}const d=a-s+2*i,h=l-o+2*i,p=s-i,f=o-i,m=this.#n.at(r?-1:-2),v=[m[0],m[2]];for(const g of this.#n){const[b,y,w]=g;g[0]=(b-p)/d,g[1]=(y-f)/h,g[2]=(w-f)/h}this.#t=new Float32Array([p,f,d,h]),this.#e=v}getOutlines(){this.#n.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#u(e)),this.#c(e)):(this.#o(e),t.push(...this.#u(e)));return this.#s(t)}#s(t){const e=[],i=new Set;for(const a of t){const[o,l,c]=a;e.push([o,l,a],[o,c,a])}e.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=e.length;a<o;a+=2){const l=e[a][2],c=e[a+1][2];l.push(c),c.push(l),i.add(l),i.add(c)}const r=[];let s;for(;i.size>0;){const a=i.values().next().value;let[o,l,c,u,d]=a;i.delete(a);let h=o,p=l;for(s=[o,c],r.push(s);;){let f;if(i.has(u))f=u;else if(i.has(d))f=d;else break;i.delete(f),[o,l,c,u,d]=f,h!==o&&(s.push(h,p,o,p===l?l:c),h=o),p=p===l?c:l}s.push(h,p)}return new f1(r,this.#t,this.#e)}#r(t){const e=this.#i;let i=0,r=e.length-1;for(;i<=r;){const s=i+r>>1,a=e[s][0];if(a===t)return s;a<t?i=s+1:r=s-1}return r+1}#c([,t,e]){const i=this.#r(t);this.#i.splice(i,0,[t,e])}#o([,t,e]){const i=this.#r(t);for(let r=i;r<this.#i.length;r++){const[s,a]=this.#i[r];if(s!==t)break;if(s===t&&a===e){this.#i.splice(r,1);return}}for(let r=i-1;r>=0;r--){const[s,a]=this.#i[r];if(s!==t)break;if(s===t&&a===e){this.#i.splice(r,1);return}}}#u(t){const[e,i,r]=t,s=[[e,i,r]],a=this.#r(r);for(let o=0;o<a;o++){const[l,c]=this.#i[o];for(let u=0,d=s.length;u<d;u++){const[,h,p]=s[u];if(!(c<=h||p<=l)){if(h>=l){if(p>c)s[u][1]=c;else{if(d===1)return[];s.splice(u,1),u--,d--}continue}s[u][2]=l,p>c&&s.push([e,c,p])}}}return s}}class f1 extends B{#t;#e;constructor(t,e,i){super(),this.#e=t,this.#t=e,this.lastPoint=i}toSVGPath(){const t=[];for(const e of this.#e){let[i,r]=e;t.push(`M${i} ${r}`);for(let s=2;s<e.length;s+=2){const a=e[s],o=e[s+1];a===i?(t.push(`V${o}`),r=o):o===r&&(t.push(`H${a}`),i=a)}t.push("Z")}return t.join(" ")}serialize([t,e,i,r],s){const a=[],o=i-t,l=r-e;for(const c of this.#e){const u=new Array(c.length);for(let d=0;d<c.length;d+=2)u[d]=t+c[d]*o,u[d+1]=r-c[d+1]*l;a.push(u)}return a}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Va extends Hn{newFreeDrawOutline(t,e,i,r,s,a){return new m1(t,e,i,r,s,a)}}class m1 extends Kd{newOutliner(t,e,i,r,s,a=0){return new Va(t,e,i,r,s,a)}}class ke{#t=null;#e=null;#n;#i=null;#s=!1;#r=!1;#c=null;#o;#u=null;#l=null;#d;static#a=null;static get _keyboardManager(){return st(this,"_keyboardManager",new cr([[["Escape","mac+Escape"],ke.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ke.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ke.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ke.prototype._moveToPrevious],[["Home","mac+Home"],ke.prototype._moveToBeginning],[["End","mac+End"],ke.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#r=!1,this.#d=ot.HIGHLIGHT_COLOR,this.#c=t):(this.#r=!0,this.#d=ot.HIGHLIGHT_DEFAULT_COLOR),this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#n=t?.color||this.#l?.highlightColors.values().next().value||"#FFFF98",ke.#a||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=this.#l._signal;t.addEventListener("click",this.#g.bind(this),{signal:e}),t.addEventListener("keydown",this.#f.bind(this),{signal:e});const i=this.#e=document.createElement("span");return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=this.#n,t.append(i),t}renderMainDropdown(){const t=this.#i=this.#h();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",ze,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of this.#l.highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=i,s.setAttribute("data-l10n-id",ke.#a[i]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=r,s.setAttribute("aria-selected",r===this.#n),s.addEventListener("click",this.#p.bind(this,r),{signal:e}),t.append(s)}return t.addEventListener("keydown",this.#f.bind(this),{signal:e}),t}#p(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const e=t.target.getAttribute("data-color");e&&this.#p(e,t)}_moveToNext(t){if(!this.#v){this.#g(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#v&&this._hideDropdownFromKeyboard();return}this.#v||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#v){this.#g(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#v){this.#g(t);return}this.#i.lastChild?.focus()}#f(t){ke._keyboardManager.exec(this,t)}#g(t){if(this.#v){this.hideDropdown();return}if(this.#s=t.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#m.bind(this),{signal:this.#l.combinedSignal(this.#u)})),this.#i){this.#i.classList.remove("hidden");return}const e=this.#i=this.#h();this.#t.append(e)}#m(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#v(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#v){this.#c?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const e=this.#l.highlightColors.values();for(const i of this.#i.children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class It extends nt{#t=null;#e=0;#n;#i=null;#s=null;#r=null;#c=null;#o=0;#u=null;#l=null;#d=null;#a=!1;#h=null;#p;#f=null;#g="";#m;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=tt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=It.prototype;return st(this,"_keyboardManager",new cr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||It._defaultColor,this.#m=t.thickness||It._defaultThickness,this.#p=t.opacity||It._defaultOpacity,this.#n=t.boxes||null,this.#v=t.methodOfCreation||"",this.#g=t.text||"",this._isDraggable=!1,t.highlightId>-1?(this.#a=!0,this.#x(t),this.#R()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#c=t.focusNode,this.#o=t.focusOffset,this.#b(),this.#R(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#a?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#m,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){const t=new Wa(this.#n,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new Wa(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#r=e.getOutlines();const{lastPoint:i}=this.#r;this.#h=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#x({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#l=t;const r=1.5;if(this.#r=t.getNewOutline(this.#m/2+r,.0025),e>=0)this.#d=e,this.#i=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#f=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const u=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:It.#A(this.#l.box,(u-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#f,{bbox:It.#A(this.#r.box,u),path:{d:this.#r.toSVGPath()}})}const[s,a,o,l]=t.box;switch(this.rotation){case 0:this.x=s,this.y=a,this.width=o,this.height=l;break;case 90:{const[u,d]=this.parentDimensions;this.x=a,this.y=1-s,this.width=o*d/u,this.height=l*u/d;break}case 180:this.x=1-s,this.y=1-a,this.width=o,this.height=l;break;case 270:{const[u,d]=this.parentDimensions;this.x=1-a,this.y=s,this.width=o*d/u,this.height=l*u/d;break}}const{lastPoint:c}=this.#r;this.#h=[(c[0]-s)/o,(c[1]-a)/l]}static initialize(t,e){nt.initialize(t,e),It._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case ot.HIGHLIGHT_DEFAULT_COLOR:It._defaultColor=e;break;case ot.HIGHLIGHT_THICKNESS:It._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#h}updateParams(t,e){switch(t){case ot.HIGHLIGHT_COLOR:this.#w(e);break;case ot.HIGHLIGHT_THICKNESS:this.#S(e);break}}static get defaultPropertiesToUpdate(){return[[ot.HIGHLIGHT_DEFAULT_COLOR,It._defaultColor],[ot.HIGHLIGHT_THICKNESS,It._defaultThickness]]}get propertiesToUpdate(){return[[ot.HIGHLIGHT_COLOR,this.color||It._defaultColor],[ot.HIGHLIGHT_THICKNESS,this.#m||It._defaultThickness],[ot.HIGHLIGHT_FREE,this.#a]]}#w(t){const e=(s,a)=>{this.color=s,this.#p=a,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:s,"fill-opacity":a}}),this.#s?.updateColor(s)},i=this.color,r=this.#p;this.addCommands({cmd:e.bind(this,t,It._defaultOpacity),undo:e.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ot.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#S(t){const e=this.#m,i=r=>{this.#m=r,this.#C(r)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ot.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(this.#s=new ke({editor:this}),t.addColorPicker(this.#s)),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#P())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#P())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#_(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#R(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#_():t&&(this.#R(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#C(t){if(!this.#a)return;this.#x({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}#_(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#R(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#p},rootClass:{highlight:!0,free:this.#a},path:{d:this.#l.toSVGPath()}},!1,!0),this.#f=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#a},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#a),this.#u&&(this.#u.style.clipPath=this.#i))}static#A([t,e,i,r],s){switch(s){case 90:return[1-e-r,t,r,i];case 180:return[1-t-i,1-e-r,i,r];case 270:return[e,1-t-i,r,i]}return[t,e,i,r]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#a?(t=(t-this.rotation+360)%360,i=It.#A(this.#l.box,t)):i=It.#A([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#f,{bbox:It.#A(this.#r.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#g&&(t.setAttribute("aria-label",this.#g),t.setAttribute("role","mark")),this.#a?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const e=this.#u=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i;const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),Kr(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1}})}#D(t){It._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#T(!0);break;case 1:case 3:this.#T(!1);break}}#T(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#c,this.#o)}select(){super.select(),this.#f&&this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{selected:!1}}),this.#a||this.#T(!1))}get _mustFixPosition(){return!this.#a}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#f,{rootClass:{hidden:!t}}))}#P(){return this.#a?this.rotation:0}#M(){if(this.#a)return null;const[t,e]=this.pageDimensions,[i,r]=this.pageTranslation,s=this.#n,a=new Float32Array(s.length*8);let o=0;for(const{x:l,y:c,width:u,height:d}of s){const h=l*t+i,p=(1-c)*e+r;a[o]=a[o+4]=h,a[o+1]=a[o+3]=p,a[o+2]=a[o+6]=h+u*t,a[o+5]=a[o+7]=p-d*e,o+=8}return a}#B(t){return this.#l.serialize(t,this.#P())}static startHighlighting(t,e,{target:i,x:r,y:s}){const{x:a,y:o,width:l,height:c}=i.getBoundingClientRect(),u=new AbortController,d=t.combinedSignal(u),h=p=>{u.abort(),this.#y(t,p)};window.addEventListener("blur",h,{signal:d}),window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("pointerdown",je,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",ze,{signal:d}),i.addEventListener("pointermove",this.#E.bind(this,t),{signal:d}),this._freeHighlight=new Va({x:r,y:s},[a,o,l,c],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#E(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#y(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let r=null;if(t instanceof Vd){const{data:{quadPoints:f,rect:m,rotation:v,id:g,color:b,opacity:y,popupRef:w},parent:{page:{pageNumber:x}}}=t;r=t={annotationType:tt.HIGHLIGHT,color:Array.from(b),opacity:y,quadPoints:f,boxes:null,pageIndex:x-1,rect:m.slice(0),rotation:v,id:g,deleted:!1,popupRef:w}}else if(t instanceof Oo){const{data:{inkLists:f,rect:m,rotation:v,id:g,color:b,borderStyle:{rawWidth:y},popupRef:w},parent:{page:{pageNumber:x}}}=t;r=t={annotationType:tt.HIGHLIGHT,color:Array.from(b),thickness:y,inkLists:f,boxes:null,pageIndex:x-1,rect:m.slice(0),rotation:v,id:g,deleted:!1,popupRef:w}}const{color:s,quadPoints:a,inkLists:o,opacity:l}=t,c=await super.deserialize(t,e,i);c.color=z.makeHexColor(...s),c.#p=l||1,o&&(c.#m=t.thickness),c.annotationElementId=t.id||null,c._initialData=r;const[u,d]=c.pageDimensions,[h,p]=c.pageTranslation;if(a){const f=c.#n=[];for(let m=0;m<a.length;m+=8)f.push({x:(a[m]-h)/u,y:1-(a[m+1]-p)/d,width:(a[m+2]-a[m])/u,height:(a[m+1]-a[m+5])/d});c.#b(),c.#R(),c.rotate(c.rotation)}else if(o){c.#a=!0;const f=o[0],m={x:f[0]-h,y:d-(f[1]-p)},v=new Va(m,[0,0,u,d],1,c.#m/2,!0,.001);for(let y=0,w=f.length;y<w;y+=2)m.x=f[y]-h,m.y=d-(f[y+1]-p),v.add(m);const{id:g,clipPathId:b}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:v.toSVGPath()}},!0,!0);c.#x({highlightOutlines:v.getOutlines(),highlightId:g,clipPathId:b}),c.#R()}return c}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getRect(0,0),i=nt._colorManager.convert(this.color),r={annotationType:tt.HIGHLIGHT,color:i,opacity:this.#p,thickness:this.#m,quadPoints:this.#M(),outlines:this.#B(e),pageIndex:this.pageIndex,rect:e,rotation:this.#P(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#O(r)?null:(r.id=this.annotationElementId,r)}#O(t){const{color:e}=this._initialData;return t.color.some((i,r)=>i!==e[r])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class g1{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){yt("Not implemented")}}class $n extends nt{#t=null;#e;_drawId=null;static _currentDrawId=-1;static _currentDraw=null;static _currentDrawingOptions=null;static _currentParent=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,t.drawOutlines&&(this.#n(t),this.#r())}#n({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#i(t,this.parent),this.#u(t.box)}#i(t,e){const{id:i}=e.drawLayer.draw($n._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[r,s]of Object.entries(e))i.has(r)?Object.assign(t[r],s):t[r]=s;return t}static getDefaultDrawingOptions(t){yt("Not implemented")}static get typesMap(){yt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(this._currentDraw.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)t.push([i,e[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,r]of this.constructor.typesMap)t.push([i,e[r]]);return t}_updateProperty(t,e,i){const r=this._drawingOptions,s=r[e],a=o=>{r.updateProperty(e,o);const l=this.#t.updateProperty(e,o);l&&this.#u(l),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,$n._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#o()),{bbox:this.#l()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,$n._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#o()),{bbox:this.#l()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#l(t,e)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,$n._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#o(),this.parentDimensions),{bbox:this.#l()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),this.isOnScreen&&this.div.focus())}remove(){this.#s(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#r(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#s()):t&&(this._uiManager.addShouldRescale(this),this.#r(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#s(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#r(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#i(this.#t,t)}}#c([t,e,i,r]){const{parentDimensions:[s,a],rotation:o}=this;switch(o){case 90:return[e,1-t,i*(a/s),r*(s/a)];case 180:return[1-t,1-e,i,r];case 270:return[1-e,t,i*(a/s),r*(s/a)];default:return[t,e,i,r]}}#o(){const{x:t,y:e,width:i,height:r,parentDimensions:[s,a],rotation:o}=this;switch(o){case 90:return[1-e,t,i*(s/a),r*(a/s)];case 180:return[1-t,1-e,i,r];case 270:return[e,1-t,i*(s/a),r*(a/s)];default:return[t,e,i,r]}}#u(t){if([this.x,this.y,this.width,this.height]=this.#c(t),this.div){this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}this._onResized()}#l(){const{x:t,y:e,width:i,height:r,rotation:s,parentRotation:a,parentDimensions:[o,l]}=this;switch((s*4+a)/90){case 1:return[1-e-r,t,r,i];case 2:return[1-t-i,1-e-r,i,r];case 3:return[e,1-t-i,r,i];case 4:return[t,e-i*(o/l),r*(l/o),i*(o/l)];case 5:return[1-e,t,i*(o/l),r*(l/o)];case 6:return[1-t-r*(l/o),1-e,r*(l/o),i*(o/l)];case 7:return[e-i*(o/l),1-t-r*(l/o),i*(o/l),r*(l/o)];case 8:return[t-i,e-r,i,r];case 9:return[1-e,t-i,r,i];case 10:return[1-t,1-e,i,r];case 11:return[e-r,1-t,r,i];case 12:return[t-r*(l/o),e,r*(l/o),i*(o/l)];case 13:return[1-e-i*(o/l),t-r*(l/o),i*(o/l),r*(l/o)];case 14:return[1-t,1-e-i*(o/l),r*(l/o),i*(o/l)];case 15:return[e,1-t,i*(o/l),r*(l/o)];default:return[t,e,i,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,$n._mergeSVGProperties({bbox:this.#l()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const e=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal";const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,e,i,r,s){yt("Not implemented")}static startDrawing(t,e,i,{target:r,offsetX:s,offsetY:a}){const{viewport:{rotation:o}}=t,{width:l,height:c}=r.getBoundingClientRect(),u=new AbortController,d=t.combinedSignal(u);if(window.addEventListener("pointerup",h=>{u.abort(),t.toggleDrawing(!0),this._endDraw(h)},{signal:d}),window.addEventListener("pointerdown",je,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",ze,{signal:d}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:d}),t.toggleDrawing(),e._editorUndoBar?.hide(),this._currentDraw){t.drawLayer.updateProperties(this._currentDrawId,this._currentDraw.startNew(s,a,l,c,o));return}e.updateUIForDefaultProperties(this),this._currentDraw=this.createDrawerInstance(s,a,l,c,o),this._currentDrawingOptions=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(this._currentDrawingOptions.toSVGProperties(),this._currentDraw.defaultSVGProperties),!0,!1)}static _drawMove({offsetX:t,offsetY:e}){this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._currentDraw.add(t,e))}static _endDraw({offsetX:t,offsetY:e}){const i=this._currentParent;if(i.drawLayer.updateProperties(this._currentDrawId,this._currentDraw.end(t,e)),this.supportMultipleDrawings){const r=this._currentDraw,s=this._currentDrawId,a=r.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(s,r.setLastElement(a))},undo:()=>{i.drawLayer.updateProperties(s,r.removeLastElement())},mustExec:!1,type:ot.DRAW_STEP});return}this.endDrawing(!1)}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(ot.DRAW_STEP),!this._currentDraw.isEmpty()){const{pageDimensions:[i,r],scale:s}=e,a=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:this._currentDraw.getOutlines(i*s,r*s,s,this._INNER_MARGIN),drawingOptions:this._currentDrawingOptions,mustBeCommitted:!t});return this._cleanup(),a}return e.drawLayer.remove(this._currentDrawId),this._cleanup(),null}static _cleanup(){this._currentDrawId=-1,this._currentDraw=null,this._currentDrawingOptions=null,this._currentParent=null}createDrawingOptions(t){}static deserializeDraw(t,e,i,r,s,a){yt("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:r,pageHeight:s,pageX:a,pageY:o}}=e.viewport,l=this.deserializeDraw(a,o,r,s,this._INNER_MARGIN,t),c=await super.deserialize(t,e,i);return c.createDrawingOptions(t),c.#n({drawOutlines:l}),c.#r(),c.onScaleChanging(),c.rotate(),c}serializeDraw(t){const[e,i]=this.pageTranslation,[r,s]=this.pageDimensions;return this.#t.serialize([e,i,r,s],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class v1{#t=new Float64Array(6);#e;#n;#i;#s;#r;#c="";#o=0;#u=new As;#l;#d;constructor(t,e,i,r,s,a){this.#l=i,this.#d=r,this.#i=s,this.#s=a,[t,e]=this.#a(t,e);const o=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e],this.#n=[{line:o,points:this.#r}],this.#t.set(o,0)}updateProperty(t,e){t==="stroke-width"&&(this.#s=e)}#a(t,e){return B._normalizePoint(t,e,this.#l,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}add(t,e){[t,e]=this.#a(t,e);const[i,r,s,a]=this.#t.subarray(2,6),o=t-s,l=e-a;return Math.hypot(this.#l*o,this.#d*l)<=2?null:(this.#r.push(t,e),isNaN(i)?(this.#t.set([s,a,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,r,s,a,t,e],0),this.#e.push(...B.createBezierPoints(i,r,s,a,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,r,s){this.#l=i,this.#d=r,this.#i=s,[t,e]=this.#a(t,e);const a=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e];const o=this.#n.at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),this.#n.push({line:a,points:this.#r}),this.#t.set(a,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#r=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#u.removeLastElement();this.#n.pop(),this.#c="";for(let t=0,e=this.#n.length;t<e;t++){const{line:i,points:r}=this.#n[t];this.#e=i,this.#r=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#c}}}toSVGPath(){const t=B.svgRound(this.#e[4]),e=B.svgRound(this.#e[5]);if(this.#r.length===2)return this.#c=`${this.#c} M ${t} ${e} Z`,this.#c;if(this.#r.length<=6){const r=this.#c.lastIndexOf("M");this.#c=`${this.#c.slice(0,r)} M ${t} ${e}`,this.#o=6}if(this.#r.length===4){const r=B.svgRound(this.#e[10]),s=B.svgRound(this.#e[11]);return this.#c=`${this.#c} L ${r} ${s}`,this.#o=12,this.#c}const i=[];this.#o===0&&(i.push(`M ${t} ${e}`),this.#o=6);for(let r=this.#o,s=this.#e.length;r<s;r+=6){const[a,o,l,c,u,d]=this.#e.slice(r,r+6).map(B.svgRound);i.push(`C${a} ${o} ${l} ${c} ${u} ${d}`)}return this.#c+=i.join(" "),this.#o=this.#e.length,this.#c}getOutlines(t,e,i,r){const s=this.#n.at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),this.#u.build(this.#n,t,e,i,this.#i,this.#s,r),this.#t=null,this.#e=null,this.#n=null,this.#c=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class As extends B{#t;#e=0;#n;#i;#s;#r;#c;#o;#u;build(t,e,i,r,s,a,o){this.#s=e,this.#r=i,this.#c=r,this.#o=s,this.#u=a,this.#n=o??0,this.#i=t,this.#a()}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#i){if(t.push(`M${B.svgRound(e[4])} ${B.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12){t.push(`L${B.svgRound(e[10])} ${B.svgRound(e[11])}`);continue}for(let i=6,r=e.length;i<r;i+=6){const[s,a,o,l,c,u]=e.subarray(i,i+6).map(B.svgRound);t.push(`C${s} ${a} ${o} ${l} ${c} ${u}`)}}return t.join("")}serialize([t,e,i,r],s){const a=[],o=[],[l,c,u,d]=this.#d();let h,p,f,m,v,g,b,y,w;switch(this.#o){case 0:w=B._rescale,h=t,p=e+r,f=i,m=-r,v=t+l*i,g=e+(1-c-d)*r,b=t+(l+u)*i,y=e+(1-c)*r;break;case 90:w=B._rescaleAndSwap,h=t,p=e,f=i,m=r,v=t+c*i,g=e+l*r,b=t+(c+d)*i,y=e+(l+u)*r;break;case 180:w=B._rescale,h=t+i,p=e,f=-i,m=r,v=t+(1-l-u)*i,g=e+c*r,b=t+(1-l)*i,y=e+(c+d)*r;break;case 270:w=B._rescaleAndSwap,h=t+i,p=e+r,f=-i,m=-r,v=t+(1-c-d)*i,g=e+(1-l-u)*r,b=t+(1-c)*i,y=e+(1-l)*r;break}for(const{line:x,points:E}of this.#i)a.push(w(x,h,p,f,m,s?new Array(x.length):null)),o.push(w(E,h,p,f,m,s?new Array(E.length):null));return{lines:a,points:o,rect:[v,g,b,y]}}static deserialize(t,e,i,r,s,{paths:{lines:a,points:o},rotation:l,thickness:c}){const u=[];let d,h,p,f,m;switch(l){case 0:m=B._rescale,d=-t/i,h=e/r+1,p=1/i,f=-1/r;break;case 90:m=B._rescaleAndSwap,d=-e/r,h=-t/i,p=1/r,f=1/i;break;case 180:m=B._rescale,d=t/i+1,h=-e/r,p=-1/i,f=1/r;break;case 270:m=B._rescaleAndSwap,d=e/r+1,h=t/i+1,p=-1/r,f=-1/i;break}if(!a){a=[];for(const g of o){const b=g.length;if(b===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,g[0],g[1]]));continue}if(b===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,g[0],g[1],NaN,NaN,NaN,NaN,g[2],g[3]]));continue}const y=new Float32Array(3*(b-2));a.push(y);let[w,x,E,S]=g.subarray(0,4);y.set([NaN,NaN,NaN,NaN,w,x],0);for(let D=4;D<b;D+=2){const T=g[D],L=g[D+1];y.set(B.createBezierPoints(w,x,E,S,T,L),(D-2)*3),[w,x,E,S]=[E,S,T,L]}}}for(let g=0,b=a.length;g<b;g++)u.push({line:m(a[g].map(y=>y??NaN),d,h,p,f),points:m(o[g].map(y=>y??NaN),d,h,p,f)});const v=new As;return v.build(u,i,r,1,l,c,s),v}#l(t=this.#u){const e=this.#n+t/2*this.#c;return this.#o%180===0?[e/this.#s,e/this.#r]:[e/this.#r,e/this.#s]}#d(){const[t,e,i,r]=this.#t,[s,a]=this.#l(0);return[t+s,e+a,i-2*s,r-2*a]}#a(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let o=4,l=r.length;o<l;o+=6){const[c,u]=r.subarray(o,o+2);t[0]=Math.min(t[0],c),t[1]=Math.min(t[1],u),t[2]=Math.max(t[2],c),t[3]=Math.max(t[3],u)}continue}let s=r[4],a=r[5];for(let o=6,l=r.length;o<l;o+=6){const[c,u,d,h,p,f]=r.subarray(o,o+6);z.bezierBoundingBox(s,a,c,u,d,h,p,f,t),s=p,a=f}}const[e,i]=this.#l();t[0]=Math.min(1,Math.max(0,t[0]-e)),t[1]=Math.min(1,Math.max(0,t[1]-i)),t[2]=Math.min(1,Math.max(0,t[2]+e)),t[3]=Math.min(1,Math.max(0,t[3]+i)),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#h(e):null}#h(t){const[e,i]=this.#l();this.#u=t;const[r,s]=this.#l(),[a,o]=[r-e,s-i],l=this.#t;return l[0]-=a,l[1]-=o,l[2]+=2*a,l[3]+=2*o,l}updateParentDimensions([t,e],i){const[r,s]=this.#l();this.#s=t,this.#r=e,this.#c=i;const[a,o]=this.#l(),l=a-r,c=o-s,u=this.#t;return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(B.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${B.svgRound(t)} ${B.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let i=0,r=0,s=0,a=0,o=0,l=0;switch(this.#e){case 90:r=e/t,s=-t/e,o=t;break;case 180:i=-1,a=-1,o=t,l=e;break;case 270:r=-e/t,s=t/e,l=e;break;default:return""}return`matrix(${i} ${r} ${s} ${a} ${B.svgRound(o)} ${B.svgRound(l)})`}getPathResizingSVGProperties([t,e,i,r]){const[s,a]=this.#l(),[o,l,c,u]=this.#t;if(Math.abs(c-s)<=B.PRECISION||Math.abs(u-a)<=B.PRECISION){const m=t+i/2-(o+c/2),v=e+r/2-(l+u/2);return{path:{"transform-origin":`${B.svgRound(t)} ${B.svgRound(e)}`,transform:`${this.rotationTransform} translate(${m} ${v})`}}}const d=(i-2*s)/(c-2*s),h=(r-2*a)/(u-2*a),p=c/i,f=u/r;return{path:{"transform-origin":`${B.svgRound(o)} ${B.svgRound(l)}`,transform:`${this.rotationTransform} scale(${p} ${f}) translate(${B.svgRound(s)} ${B.svgRound(a)}) scale(${d} ${h}) translate(${B.svgRound(-s)} ${B.svgRound(-a)})`}}}getPathResizedSVGProperties([t,e,i,r]){const[s,a]=this.#l(),o=this.#t,[l,c,u,d]=o;if(o[0]=t,o[1]=e,o[2]=i,o[3]=r,Math.abs(u-s)<=B.PRECISION||Math.abs(d-a)<=B.PRECISION){const v=t+i/2-(l+u/2),g=e+r/2-(c+d/2);for(const{line:b,points:y}of this.#i)B._translate(b,v,g,b),B._translate(y,v,g,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${B.svgRound(t)} ${B.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const h=(i-2*s)/(u-2*s),p=(r-2*a)/(d-2*a),f=-h*(l+s)+t+s,m=-p*(c+a)+e+a;if(h!==1||p!==1||f!==0||m!==0)for(const{line:v,points:g}of this.#i)B._rescale(v,f,m,h,p,v),B._rescale(g,f,m,h,p,g);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${B.svgRound(t)} ${B.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[r,s]=i,a=this.#t,o=t-a[0],l=e-a[1];if(this.#s===r&&this.#r===s)for(const{line:c,points:u}of this.#i)B._translate(c,o,l,c),B._translate(u,o,l,u);else{const c=this.#s/r,u=this.#r/s;this.#s=r,this.#r=s;for(const{line:d,points:h}of this.#i)B._rescale(d,o,l,c,u,d),B._rescale(h,o,l,c,u,h);a[2]*=c,a[3]*=u}return a[0]=t,a[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${B.svgRound(t)} ${B.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${B.svgRound(t[0])} ${B.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Mo extends g1{#t;constructor(t){super(),this.#t=t,super.updateProperties({fill:"none",stroke:nt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this.#t.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Mo(this.#t);return t.updateAll(this),t}}class Lo extends $n{static _type="ink";static _editorType=tt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0}static initialize(t,e){nt.initialize(t,e),this._defaultDrawingOptions=new Mo(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return st(this,"typesMap",new Map([[ot.INK_THICKNESS,"stroke-width"],[ot.INK_COLOR,"stroke"],[ot.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,r,s){return new v1(t,e,i,r,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,r,s,a){return As.deserialize(t,e,i,r,s,a)}static async deserialize(t,e,i){let r=null;if(t instanceof Oo){const{data:{inkLists:a,rect:o,rotation:l,id:c,color:u,opacity:d,borderStyle:{rawWidth:h},popupRef:p},parent:{page:{pageNumber:f}}}=t;r=t={annotationType:tt.INK,color:Array.from(u),thickness:h,opacity:d,paths:{points:a},boxes:null,pageIndex:f-1,rect:o.slice(0),rotation:l,id:c,deleted:!1,popupRef:p}}const s=await super.deserialize(t,e,i);return s.annotationElementId=t.id||null,s._initialData=r,s}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=Lo.getDefaultDrawingOptions({stroke:z.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i,rect:r}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":a,"stroke-width":o}}=this,l={annotationType:tt.INK,color:nt._colorManager.convert(s),opacity:a,thickness:o,paths:{lines:e,points:i},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?l:this.annotationElementId&&!this.#t(l)?null:(l.id=this.annotationElementId,l)}#t(t){const{color:e,thickness:i,opacity:r,pageIndex:s}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((a,o)=>a!==e[o])||t.thickness!==i||t.opacity!==r||t.pageIndex!==s}renderAnnotationElement(t){const{points:e,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e}),null}}class No extends nt{#t=null;#e=null;#n=null;#i=null;#s=null;#r="";#c=null;#o=null;#u=null;#l=!1;#d=!1;static _type="stamp";static _editorType=tt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#s=t.bitmapFile}static initialize(t,e){nt.initialize(t,e)}static get supportedTypes(){return st(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>`image/${e}`))}static get supportedTypesStr(){return st(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(tt.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#a(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#r=t.file.name),this.#f()}#h(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#c){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:s,height:a}=t||this.copyCanvas(null,null,!0).imageData,o=await i.guess({name:"altText",request:{data:r,width:s,height:a,channels:r.length/(s*a)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");const l=o.output;return await this.setGuessedAltText(l),e&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l}#p(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#a(i,!0)).finally(()=>this.#h());return}if(this.#i){const i=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(i).then(r=>this.#a(r)).finally(()=>this.#h());return}if(this.#s){const i=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(i).then(r=>this.#a(r)).finally(()=>this.#h());return}const t=document.createElement("input");t.type="file",t.accept=No.supportedTypesStr;const e=this._uiManager._signal;this.#n=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#a(r)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#h()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#c?.remove(),this.#c=null,this.#o?.disconnect(),this.#o=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#p();return}super.rebuild(),this.div!==null&&(this.#e&&this.#c===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#s||this.#e)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;if(this.width&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#t?this.#f():this.#p(),this.width&&!this.annotationElementId){const[i,r]=this.parentDimensions;this.setAt(t*i,e*r,this.width*i,this.height*r)}return this.div}#f(){const{div:t}=this;let{width:e,height:i}=this.#t;const[r,s]=this.pageDimensions,a=.75;if(this.width)e=this.width*r,i=this.height*s;else if(e>a*r||i>a*s){const u=Math.min(a*r/e,a*s/i);e*=u,i*=u}const[o,l]=this.parentDimensions;this.setDims(e*o/r,i*l/s),this._uiManager.enableWaiting(!1);const c=this.#c=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#v(e,i),this.#x(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&c.setAttribute("aria-label",this.#r)}copyCanvas(t,e,i=!1){t||(t=224);const{width:r,height:s}=this.#t,a=new Ha;let o=this.#t,l=r,c=s,u=null;if(e){if(r>e||s>e){const E=Math.min(e/r,e/s);l=Math.floor(r*E),c=Math.floor(s*E)}u=document.createElement("canvas");const h=u.width=Math.ceil(l*a.sx),p=u.height=Math.ceil(c*a.sy);this.#l||(o=this.#m(h,p));const f=u.getContext("2d");f.filter=this._uiManager.hcmFilter;let m="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(m="#8f8f9d",v="#42414d");const g=15,b=g*a.sx,y=g*a.sy,w=new OffscreenCanvas(b*2,y*2),x=w.getContext("2d");x.fillStyle=m,x.fillRect(0,0,b*2,y*2),x.fillStyle=v,x.fillRect(0,0,b,y),x.fillRect(b,y,b,y),f.fillStyle=f.createPattern(w,"repeat"),f.fillRect(0,0,h,p),f.drawImage(o,0,0,o.width,o.height,0,0,h,p)}let d=null;if(i){let h,p;if(a.symmetric&&o.width<t&&o.height<t)h=o.width,p=o.height;else if(o=this.#t,r>t||s>t){const v=Math.min(t/r,t/s);h=Math.floor(r*v),p=Math.floor(s*v),this.#l||(o=this.#m(h,p))}const m=new OffscreenCanvas(h,p).getContext("2d",{willReadFrequently:!0});m.drawImage(o,0,0,o.width,o.height,0,0,h,p),d={width:h,height:p,data:m.getImageData(0,0,h,p).data}}return{canvas:u,width:l,height:c,imageData:d}}#g(t,e){const[i,r]=this.parentDimensions;this.width=t/i,this.height=e/r,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#u!==null&&clearTimeout(this.#u);const s=200;this.#u=setTimeout(()=>{this.#u=null,this.#v(t,e)},s)}#m(t,e){const{width:i,height:r}=this.#t;let s=i,a=r,o=this.#t;for(;s>2*t||a>2*e;){const l=s,c=a;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const u=new OffscreenCanvas(s,a);u.getContext("2d").drawImage(o,0,0,l,c,0,0,s,a),o=u.transferToImageBitmap()}return o}#v(t,e){const i=new Ha,r=Math.ceil(t*i.sx),s=Math.ceil(e*i.sy),a=this.#c;if(!a||a.width===r&&a.height===s)return;a.width=r,a.height=s;const o=this.#l?this.#t:this.#m(r,s),l=a.getContext("2d");l.filter=this._uiManager.hcmFilter,l.drawImage(o,0,0,o.width,o.height,0,0,r,s)}getImageForAltText(){return this.#c}#b(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,i]=this.pageDimensions,r=Math.round(this.width*e*mi.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*mi.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,s);return a.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,s),a.transferToImageBitmap()}return structuredClone(this.#t)}#x(){this._uiManager._signal&&(this.#o=new ResizeObserver(t=>{const e=t[0].contentRect;e.width&&e.height&&this.#g(e.width,e.height)}),this.#o.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#o?.disconnect(),this.#o=null},{once:!0}))}static async deserialize(t,e,i){let r=null;if(t instanceof Xd){const{data:{rect:f,rotation:m,id:v,structParent:g,popupRef:b},container:y,parent:{page:{pageNumber:w}}}=t,x=y.querySelector("canvas"),E=i.imageManager.getFromCanvas(y.id,x);x.remove();const S=(await e._structTree.getAriaAttributes(`${Ao}${v}`))?.get("aria-label")||"";r=t={annotationType:tt.STAMP,bitmapId:E.id,bitmap:E.bitmap,pageIndex:w-1,rect:f.slice(0),rotation:m,id:v,deleted:!1,accessibilityData:{decorative:!1,altText:S},isSvg:!1,structParent:g,popupRef:b}}const s=await super.deserialize(t,e,i),{rect:a,bitmap:o,bitmapUrl:l,bitmapId:c,isSvg:u,accessibilityData:d}=t;c&&i.imageManager.isValidId(c)?(s.#e=c,o&&(s.#t=o)):s.#i=l,s.#l=u;const[h,p]=s.pageDimensions;return s.width=(a[2]-a[0])/h,s.height=(a[3]-a[1])/p,s.annotationElementId=t.id||null,d&&(s.altTextData=d),s._initialData=r,s.#d=!!r,s}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:tt.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#l,structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=this.#b(!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:r,altText:s}=this.serializeAltText(!1);if(!r&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const o=this.#w(i);if(o.isSame)return null;o.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,e===null)return i;e.stamps||=new Map;const a=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:a,serialized:i}),i.bitmap=this.#b(!1);else if(this.#l){const o=e.stamps.get(this.#e);a>o.area&&(o.area=a,o.serialized.bitmap.close(),o.serialized.bitmap=this.#b(!1))}return i}#w(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===e,s=(t.accessibilityData?.alt||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&s,isSameAltText:s}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}class hn{#t;#e=!1;#n=null;#i=null;#s=null;#r=new Map;#c=!1;#o=!1;#u=null;#l=null;#d=null;#a;static _initialized=!1;static#h=new Map([Bt,Lo,No,It].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:r,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:c,l10n:u}){const d=[...hn.#h.values()];if(!hn._initialized){hn._initialized=!0;for(const h of d)h.initialize(u,t)}t.registerEditorTypes(d),this.#a=t,this.pageIndex=e,this.div=i,this.#t=s,this.#n=a,this.viewport=c,this.#l=l,this.drawLayer=o,this._structTree=r,this.#a.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#a.getMode()===tt.NONE}updateToolbar(t){this.#a.updateToolbar(t)}updateMode(t=this.#a.getMode()){switch(this.#v(),t){case tt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case tt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case tt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of hn.#h.values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#l?.div}setEditingState(t){this.#a.setEditingState(t)}addCommands(t){this.#a.addCommands(t)}cleanUndoStack(t){this.#a.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of this.#r.values())i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#a.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!this.#n)return;const e=this.#n.getEditableAnnotations();for(const i of e){if(i.hide(),this.#a.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}}disable(){this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of this.#r.values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);this.getEditableAnnotation(r.annotationElementId)?.show(),r.remove()}if(this.#n){const r=this.#n.getEditableAnnotations();for(const s of r){const{id:a}=s.data;if(this.#a.isDeletedAnnotationElement(a))continue;let o=e.get(a);if(o){o.resetAnnotationElement(s),o.show(!1),s.show();continue}o=t.get(a),o&&(this.#a.addChangedExistingAnnotation(o),o.renderAnnotationElement(s)&&o.show(!1)),s.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of hn.#h.values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#a.getActive()!==t&&this.#a.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#l?.div&&!this.#d){this.#d=new AbortController;const t=this.#a.combinedSignal(this.#d);this.#l.div.addEventListener("pointerdown",this.#p.bind(this),{signal:t}),this.#l.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#l?.div&&this.#d&&(this.#d.abort(),this.#d=null,this.#l.div.classList.remove("highlighting"))}#p(t){this.#a.unselectAll();const{target:e}=t;if(e===this.#l.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#l.div.contains(e)){const{isMac:i}=oe.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#a.showAllEditors("highlight",!0,!0),this.#l.div.classList.add("free"),this.toggleDrawing(),It.startHighlighting(this,this.#a.direction==="ltr",{target:this.#l.div,x:t.x,y:t.y}),this.#l.div.addEventListener("pointerup",()=>{this.#l.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#a._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#a.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#r.set(t.id,t);const{annotationElementId:e}=t;e&&this.#a.isDeletedAnnotationElement(e)&&this.#a.removeDeletedAnnotationElement(t)}detach(t){this.#r.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#a.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#a.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#a.addDeletedAnnotationElement(t.annotationElementId),nt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#a.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#a.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#s&&(t._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#a._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return this.#a.getId()}get#f(){return hn.#h.get(this.#a.getMode())}combinedSignal(t){return this.#a.combinedSignal(t)}#g(t){const e=this.#f;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#f?.canCreateNewEmptyEditor()}pasteEditor(t,e){this.#a.updateToolbar(t),this.#a.updateMode(t);const{offsetX:i,offsetY:r}=this.#m(),s=this.getNextId(),a=this.#g({parent:this,id:s,x:i,y:r,uiManager:this.#a,isCentered:!0,...e});a&&this.add(a)}async deserialize(t){return await hn.#h.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#a)||null}createAndAddNewEditor(t,e,i={}){const r=this.getNextId(),s=this.#g({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#a,isCentered:e,...i});return s&&this.add(s),s}#m(){const{x:t,y:e,width:i,height:r}=this.div.getBoundingClientRect(),s=Math.max(0,t),a=Math.max(0,e),o=Math.min(window.innerWidth,t+i),l=Math.min(window.innerHeight,e+r),c=(s+o)/2-t,u=(a+l)/2-e,[d,h]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:d,offsetY:h}}addNewEditor(){this.createAndAddNewEditor(this.#m(),!0)}setSelected(t){this.#a.setSelected(t)}toggleSelected(t){this.#a.toggleSelected(t)}unselect(t){this.#a.unselect(t)}pointerup(t){const{isMac:e}=oe.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&this.#c&&(this.#c=!1,!(this.#f?.isDrawer&&this.#f.supportMultipleDrawings))){if(!this.#e){this.#e=!0;return}if(this.#a.getMode()===tt.STAMP){this.#a.unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(this.#a.getMode()===tt.HIGHLIGHT&&this.enableTextSelection(),this.#c){this.#c=!1;return}const{isMac:e}=oe.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#c=!0,this.#f?.isDrawer){this.startDrawingSession(t);return}const i=this.#a.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus(),this.#u){this.#f.startDrawing(this,this.#a,!1,t);return}this.#a.setCurrentDrawingSession(this),this.#u=new AbortController;const e=this.#a.combinedSignal(this.#u);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&this.commitOrRemove()},{signal:e}),this.#f.startDrawing(this,this.#a,!1,t)}endDrawingSession(t=!1){return this.#u?(this.#a.setCurrentDrawingSession(null),this.#u.abort(),this.#u=null,this.#f.endDrawing(t)):null}findNewParent(t,e,i){const r=this.#a.findParent(e,i);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#u?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#u&&this.#f.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#a.getActive()?.parent===this&&(this.#a.commitOrRemove(),this.#a.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(const t of this.#r.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#r.clear(),this.#a.removeLayer(this)}#v(){for(const t of this.#r.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Xn(this.div,t);for(const e of this.#a.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#a.commitOrRemove(),this.#v();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Xn(this.div,{rotation:i}),e!==i)for(const r of this.#r.values())r.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#a.viewParameters.realScale}}class re{#t=null;#e=0;#n=new Map;#i=new Map;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#n.size>0)for(const e of this.#n.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return st(this,"_svgFactory",new ko)}static#s(t,[e,i,r,s]){const{style:a}=t;a.top=`${100*i}%`,a.left=`${100*e}%`,a.width=`${100*r}%`,a.height=`${100*s}%`}#r(){const t=re._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#c(t,e){const i=re._svgFactory.createElement("clipPath");t.append(i);const r=`clip_${e}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const s=re._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${e}`),s.classList.add("clip"),r}#o(t,e){for(const[i,r]of Object.entries(e))r===null?t.removeAttribute(i):t.setAttribute(i,r)}draw(t,e=!1,i=!1){const r=this.#e++,s=this.#r(),a=re._svgFactory.createElement("defs");s.append(a);const o=re._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(r,o);const c=i?this.#c(a,l):null,u=re._svgFactory.createElement("use");return s.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(s,t),this.#n.set(r,s),{id:r,clipPathId:`url(#${c})`}}drawOutline(t,e){const i=this.#e++,r=this.#r(),s=re._svgFactory.createElement("defs");r.append(s);const a=re._svgFactory.createElement("path");s.append(a);const o=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let l;if(e){const d=re._svgFactory.createElement("mask");s.append(d),l=`mask_p${this.pageIndex}_${i}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");const h=re._svgFactory.createElement("rect");d.append(h),h.setAttribute("width","1"),h.setAttribute("height","1"),h.setAttribute("fill","white");const p=re._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${o}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const c=re._svgFactory.createElement("use");r.append(c),c.setAttribute("href",`#${o}`),l&&c.setAttribute("mask",`url(#${l})`);const u=c.cloneNode();return r.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#n.set(i,r),i}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:r,rootClass:s,path:a}=e,o=typeof t=="number"?this.#n.get(t):t;if(o){if(i&&this.#o(o,i),r&&re.#s(o,r),s){const{classList:l}=o;for(const[c,u]of Object.entries(s))l.toggle(c,u)}if(a){const c=o.firstChild.firstChild;this.#o(c,a)}}}updateParent(t,e){if(e===this)return;const i=this.#n.get(t);i&&(e.#t.append(i),this.#n.delete(t),e.#n.set(t,i))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#n.get(t).remove(),this.#n.delete(t))}destroy(){this.#t=null;for(const t of this.#n.values())t.remove();this.#n.clear(),this.#i.clear()}}globalThis.pdfjsTestingUtils={HighlightOutliner:Wa};K.AbortException;K.AnnotationEditorLayer;K.AnnotationEditorParamsType;K.AnnotationEditorType;K.AnnotationEditorUIManager;K.AnnotationLayer;K.AnnotationMode;K.ColorPicker;K.DOMSVGFactory;K.DrawLayer;K.FeatureTest;K.GlobalWorkerOptions;K.ImageKind;K.InvalidPDFException;K.MissingPDFException;var Ac=K.OPS;K.OutputScale;K.PDFDataRangeTransport;K.PDFDateString;K.PDFWorker;K.PasswordResponses;K.PermissionFlag;K.PixelsPerInch;K.RenderingCancelledException;K.TextLayer;K.UnexpectedResponseException;K.Util;K.VerbosityLevel;K.XfaLayer;K.build;K.createValidAbsoluteUrl;K.fetchData;var Es=K.getDocument;K.getFilenameFromUrl;K.getPdfFilenameFromUrl;K.getXfaPageViewport;K.isDataScheme;K.isPdfFile;K.noContextMenu;K.normalizeUnicode;K.setLayerDimensions;K.shadow;K.stopEvent;K.version;function Yd(n,t){return function(){return n.apply(t,arguments)}}const{toString:b1}=Object.prototype,{getPrototypeOf:Fo}=Object,Ss=(n=>t=>{const e=b1.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Ge=n=>(n=n.toLowerCase(),t=>Ss(t)===n),Cs=n=>t=>typeof t===n,{isArray:Ei}=Array,Qi=Cs("undefined");function y1(n){return n!==null&&!Qi(n)&&n.constructor!==null&&!Qi(n.constructor)&&be(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Jd=Ge("ArrayBuffer");function x1(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&Jd(n.buffer),t}const w1=Cs("string"),be=Cs("function"),Qd=Cs("number"),_s=n=>n!==null&&typeof n=="object",A1=n=>n===!0||n===!1,Mr=n=>{if(Ss(n)!=="object")return!1;const t=Fo(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},E1=Ge("Date"),S1=Ge("File"),C1=Ge("Blob"),_1=Ge("FileList"),T1=n=>_s(n)&&be(n.pipe),R1=n=>{let t;return n&&(typeof FormData=="function"&&n instanceof FormData||be(n.append)&&((t=Ss(n))==="formdata"||t==="object"&&be(n.toString)&&n.toString()==="[object FormData]"))},D1=Ge("URLSearchParams"),[P1,I1,k1,O1]=["ReadableStream","Request","Response","Headers"].map(Ge),M1=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function dr(n,t,{allOwnKeys:e=!1}={}){if(n===null||typeof n>"u")return;let i,r;if(typeof n!="object"&&(n=[n]),Ei(n))for(i=0,r=n.length;i<r;i++)t.call(null,n[i],i,n);else{const s=e?Object.getOwnPropertyNames(n):Object.keys(n),a=s.length;let o;for(i=0;i<a;i++)o=s[i],t.call(null,n[o],o,n)}}function Zd(n,t){t=t.toLowerCase();const e=Object.keys(n);let i=e.length,r;for(;i-- >0;)if(r=e[i],t===r.toLowerCase())return r;return null}const Un=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,th=n=>!Qi(n)&&n!==Un;function Xa(){const{caseless:n}=th(this)&&this||{},t={},e=(i,r)=>{const s=n&&Zd(t,r)||r;Mr(t[s])&&Mr(i)?t[s]=Xa(t[s],i):Mr(i)?t[s]=Xa({},i):Ei(i)?t[s]=i.slice():t[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&dr(arguments[i],e);return t}const L1=(n,t,e,{allOwnKeys:i}={})=>(dr(t,(r,s)=>{e&&be(r)?n[s]=Yd(r,e):n[s]=r},{allOwnKeys:i}),n),N1=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),F1=(n,t,e,i)=>{n.prototype=Object.create(t.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),e&&Object.assign(n.prototype,e)},B1=(n,t,e,i)=>{let r,s,a;const o={};if(t=t||{},n==null)return t;do{for(r=Object.getOwnPropertyNames(n),s=r.length;s-- >0;)a=r[s],(!i||i(a,n,t))&&!o[a]&&(t[a]=n[a],o[a]=!0);n=e!==!1&&Fo(n)}while(n&&(!e||e(n,t))&&n!==Object.prototype);return t},j1=(n,t,e)=>{n=String(n),(e===void 0||e>n.length)&&(e=n.length),e-=t.length;const i=n.indexOf(t,e);return i!==-1&&i===e},$1=n=>{if(!n)return null;if(Ei(n))return n;let t=n.length;if(!Qd(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=n[t];return e},z1=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&Fo(Uint8Array)),H1=(n,t)=>{const i=(n&&n[Symbol.iterator]).call(n);let r;for(;(r=i.next())&&!r.done;){const s=r.value;t.call(n,s[0],s[1])}},U1=(n,t)=>{let e;const i=[];for(;(e=n.exec(t))!==null;)i.push(e);return i},q1=Ge("HTMLFormElement"),G1=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,i,r){return i.toUpperCase()+r}),Ec=(({hasOwnProperty:n})=>(t,e)=>n.call(t,e))(Object.prototype),W1=Ge("RegExp"),eh=(n,t)=>{const e=Object.getOwnPropertyDescriptors(n),i={};dr(e,(r,s)=>{let a;(a=t(r,s,n))!==!1&&(i[s]=a||r)}),Object.defineProperties(n,i)},V1=n=>{eh(n,(t,e)=>{if(be(n)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const i=n[e];if(be(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},X1=(n,t)=>{const e={},i=r=>{r.forEach(s=>{e[s]=!0})};return Ei(n)?i(n):i(String(n).split(t)),e},K1=()=>{},Y1=(n,t)=>n!=null&&Number.isFinite(n=+n)?n:t,sa="abcdefghijklmnopqrstuvwxyz",Sc="0123456789",nh={DIGIT:Sc,ALPHA:sa,ALPHA_DIGIT:sa+sa.toUpperCase()+Sc},J1=(n=16,t=nh.ALPHA_DIGIT)=>{let e="";const{length:i}=t;for(;n--;)e+=t[Math.random()*i|0];return e};function Q1(n){return!!(n&&be(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const Z1=n=>{const t=new Array(10),e=(i,r)=>{if(_s(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[r]=i;const s=Ei(i)?[]:{};return dr(i,(a,o)=>{const l=e(a,r+1);!Qi(l)&&(s[o]=l)}),t[r]=void 0,s}}return i};return e(n,0)},t0=Ge("AsyncFunction"),e0=n=>n&&(_s(n)||be(n))&&be(n.then)&&be(n.catch),ih=((n,t)=>n?setImmediate:t?((e,i)=>(Un.addEventListener("message",({source:r,data:s})=>{r===Un&&s===e&&i.length&&i.shift()()},!1),r=>{i.push(r),Un.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",be(Un.postMessage)),n0=typeof queueMicrotask<"u"?queueMicrotask.bind(Un):typeof process<"u"&&process.nextTick||ih,_={isArray:Ei,isArrayBuffer:Jd,isBuffer:y1,isFormData:R1,isArrayBufferView:x1,isString:w1,isNumber:Qd,isBoolean:A1,isObject:_s,isPlainObject:Mr,isReadableStream:P1,isRequest:I1,isResponse:k1,isHeaders:O1,isUndefined:Qi,isDate:E1,isFile:S1,isBlob:C1,isRegExp:W1,isFunction:be,isStream:T1,isURLSearchParams:D1,isTypedArray:z1,isFileList:_1,forEach:dr,merge:Xa,extend:L1,trim:M1,stripBOM:N1,inherits:F1,toFlatObject:B1,kindOf:Ss,kindOfTest:Ge,endsWith:j1,toArray:$1,forEachEntry:H1,matchAll:U1,isHTMLForm:q1,hasOwnProperty:Ec,hasOwnProp:Ec,reduceDescriptors:eh,freezeMethods:V1,toObjectSet:X1,toCamelCase:G1,noop:K1,toFiniteNumber:Y1,findKey:Zd,global:Un,isContextDefined:th,ALPHABET:nh,generateString:J1,isSpecCompliantForm:Q1,toJSONObject:Z1,isAsyncFn:t0,isThenable:e0,setImmediate:ih,asap:n0};function Z(n,t,e,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}_.inherits(Z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_.toJSONObject(this.config),code:this.code,status:this.status}}});const rh=Z.prototype,sh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{sh[n]={value:n}});Object.defineProperties(Z,sh);Object.defineProperty(rh,"isAxiosError",{value:!0});Z.from=(n,t,e,i,r,s)=>{const a=Object.create(rh);return _.toFlatObject(n,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),Z.call(a,n.message,t,e,i,r),a.cause=n,a.name=n.name,s&&Object.assign(a,s),a};const i0=null;function Ka(n){return _.isPlainObject(n)||_.isArray(n)}function ah(n){return _.endsWith(n,"[]")?n.slice(0,-2):n}function Cc(n,t,e){return n?n.concat(t).map(function(r,s){return r=ah(r),!e&&s?"["+r+"]":r}).join(e?".":""):t}function r0(n){return _.isArray(n)&&!n.some(Ka)}const s0=_.toFlatObject(_,{},null,function(t){return/^is[A-Z]/.test(t)});function Ts(n,t,e){if(!_.isObject(n))throw new TypeError("target must be an object");t=t||new FormData,e=_.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,v){return!_.isUndefined(v[m])});const i=e.metaTokens,r=e.visitor||u,s=e.dots,a=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&_.isSpecCompliantForm(t);if(!_.isFunction(r))throw new TypeError("visitor must be a function");function c(f){if(f===null)return"";if(_.isDate(f))return f.toISOString();if(!l&&_.isBlob(f))throw new Z("Blob is not supported. Use a Buffer instead.");return _.isArrayBuffer(f)||_.isTypedArray(f)?l&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function u(f,m,v){let g=f;if(f&&!v&&typeof f=="object"){if(_.endsWith(m,"{}"))m=i?m:m.slice(0,-2),f=JSON.stringify(f);else if(_.isArray(f)&&r0(f)||(_.isFileList(f)||_.endsWith(m,"[]"))&&(g=_.toArray(f)))return m=ah(m),g.forEach(function(y,w){!(_.isUndefined(y)||y===null)&&t.append(a===!0?Cc([m],w,s):a===null?m:m+"[]",c(y))}),!1}return Ka(f)?!0:(t.append(Cc(v,m,s),c(f)),!1)}const d=[],h=Object.assign(s0,{defaultVisitor:u,convertValue:c,isVisitable:Ka});function p(f,m){if(!_.isUndefined(f)){if(d.indexOf(f)!==-1)throw Error("Circular reference detected in "+m.join("."));d.push(f),_.forEach(f,function(g,b){(!(_.isUndefined(g)||g===null)&&r.call(t,g,_.isString(b)?b.trim():b,m,h))===!0&&p(g,m?m.concat(b):[b])}),d.pop()}}if(!_.isObject(n))throw new TypeError("data must be an object");return p(n),t}function _c(n){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Bo(n,t){this._pairs=[],n&&Ts(n,this,t)}const oh=Bo.prototype;oh.append=function(t,e){this._pairs.push([t,e])};oh.toString=function(t){const e=t?function(i){return t.call(this,i,_c)}:_c;return this._pairs.map(function(r){return e(r[0])+"="+e(r[1])},"").join("&")};function a0(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function lh(n,t,e){if(!t)return n;const i=e&&e.encode||a0;_.isFunction(e)&&(e={serialize:e});const r=e&&e.serialize;let s;if(r?s=r(t,e):s=_.isURLSearchParams(t)?t.toString():new Bo(t,e).toString(i),s){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class Tc{constructor(){this.handlers=[]}use(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){_.forEach(this.handlers,function(i){i!==null&&t(i)})}}const ch={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},o0=typeof URLSearchParams<"u"?URLSearchParams:Bo,l0=typeof FormData<"u"?FormData:null,c0=typeof Blob<"u"?Blob:null,u0={isBrowser:!0,classes:{URLSearchParams:o0,FormData:l0,Blob:c0},protocols:["http","https","file","blob","url","data"]},jo=typeof window<"u"&&typeof document<"u",Ya=typeof navigator=="object"&&navigator||void 0,d0=jo&&(!Ya||["ReactNative","NativeScript","NS"].indexOf(Ya.product)<0),h0=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",p0=jo&&window.location.href||"http://localhost",f0=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:jo,hasStandardBrowserEnv:d0,hasStandardBrowserWebWorkerEnv:h0,navigator:Ya,origin:p0},Symbol.toStringTag,{value:"Module"})),Qt={...f0,...u0};function m0(n,t){return Ts(n,new Qt.classes.URLSearchParams,Object.assign({visitor:function(e,i,r,s){return Qt.isNode&&_.isBuffer(e)?(this.append(i,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function g0(n){return _.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function v0(n){const t={},e=Object.keys(n);let i;const r=e.length;let s;for(i=0;i<r;i++)s=e[i],t[s]=n[s];return t}function uh(n){function t(e,i,r,s){let a=e[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=s>=e.length;return a=!a&&_.isArray(r)?r.length:a,l?(_.hasOwnProp(r,a)?r[a]=[r[a],i]:r[a]=i,!o):((!r[a]||!_.isObject(r[a]))&&(r[a]=[]),t(e,i,r[a],s)&&_.isArray(r[a])&&(r[a]=v0(r[a])),!o)}if(_.isFormData(n)&&_.isFunction(n.entries)){const e={};return _.forEachEntry(n,(i,r)=>{t(g0(i),r,e,0)}),e}return null}function b0(n,t,e){if(_.isString(n))try{return(t||JSON.parse)(n),_.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(0,JSON.stringify)(n)}const hr={transitional:ch,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const i=e.getContentType()||"",r=i.indexOf("application/json")>-1,s=_.isObject(t);if(s&&_.isHTMLForm(t)&&(t=new FormData(t)),_.isFormData(t))return r?JSON.stringify(uh(t)):t;if(_.isArrayBuffer(t)||_.isBuffer(t)||_.isStream(t)||_.isFile(t)||_.isBlob(t)||_.isReadableStream(t))return t;if(_.isArrayBufferView(t))return t.buffer;if(_.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return m0(t,this.formSerializer).toString();if((o=_.isFileList(t))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ts(o?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||r?(e.setContentType("application/json",!1),b0(t)):t}],transformResponse:[function(t){const e=this.transitional||hr.transitional,i=e&&e.forcedJSONParsing,r=this.responseType==="json";if(_.isResponse(t)||_.isReadableStream(t))return t;if(t&&_.isString(t)&&(i&&!this.responseType||r)){const a=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(o){if(a)throw o.name==="SyntaxError"?Z.from(o,Z.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qt.classes.FormData,Blob:Qt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_.forEach(["delete","get","head","post","put","patch"],n=>{hr.headers[n]={}});const y0=_.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),x0=n=>{const t={};let e,i,r;return n&&n.split(`
`).forEach(function(a){r=a.indexOf(":"),e=a.substring(0,r).trim().toLowerCase(),i=a.substring(r+1).trim(),!(!e||t[e]&&y0[e])&&(e==="set-cookie"?t[e]?t[e].push(i):t[e]=[i]:t[e]=t[e]?t[e]+", "+i:i)}),t},Rc=Symbol("internals");function Li(n){return n&&String(n).trim().toLowerCase()}function Lr(n){return n===!1||n==null?n:_.isArray(n)?n.map(Lr):String(n)}function w0(n){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=e.exec(n);)t[i[1]]=i[2];return t}const A0=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function aa(n,t,e,i,r){if(_.isFunction(i))return i.call(this,t,e);if(r&&(t=e),!!_.isString(t)){if(_.isString(i))return t.indexOf(i)!==-1;if(_.isRegExp(i))return i.test(t)}}function E0(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,i)=>e.toUpperCase()+i)}function S0(n,t){const e=_.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+e,{value:function(r,s,a){return this[i].call(this,t,r,s,a)},configurable:!0})})}class he{constructor(t){t&&this.set(t)}set(t,e,i){const r=this;function s(o,l,c){const u=Li(l);if(!u)throw new Error("header name must be a non-empty string");const d=_.findKey(r,u);(!d||r[d]===void 0||c===!0||c===void 0&&r[d]!==!1)&&(r[d||l]=Lr(o))}const a=(o,l)=>_.forEach(o,(c,u)=>s(c,u,l));if(_.isPlainObject(t)||t instanceof this.constructor)a(t,e);else if(_.isString(t)&&(t=t.trim())&&!A0(t))a(x0(t),e);else if(_.isHeaders(t))for(const[o,l]of t.entries())s(l,o,i);else t!=null&&s(e,t,i);return this}get(t,e){if(t=Li(t),t){const i=_.findKey(this,t);if(i){const r=this[i];if(!e)return r;if(e===!0)return w0(r);if(_.isFunction(e))return e.call(this,r,i);if(_.isRegExp(e))return e.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Li(t),t){const i=_.findKey(this,t);return!!(i&&this[i]!==void 0&&(!e||aa(this,this[i],i,e)))}return!1}delete(t,e){const i=this;let r=!1;function s(a){if(a=Li(a),a){const o=_.findKey(i,a);o&&(!e||aa(i,i[o],o,e))&&(delete i[o],r=!0)}}return _.isArray(t)?t.forEach(s):s(t),r}clear(t){const e=Object.keys(this);let i=e.length,r=!1;for(;i--;){const s=e[i];(!t||aa(this,this[s],s,t,!0))&&(delete this[s],r=!0)}return r}normalize(t){const e=this,i={};return _.forEach(this,(r,s)=>{const a=_.findKey(i,s);if(a){e[a]=Lr(r),delete e[s];return}const o=t?E0(s):String(s).trim();o!==s&&delete e[s],e[o]=Lr(r),i[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return _.forEach(this,(i,r)=>{i!=null&&i!==!1&&(e[r]=t&&_.isArray(i)?i.join(", "):i)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const i=new this(t);return e.forEach(r=>i.set(r)),i}static accessor(t){const i=(this[Rc]=this[Rc]={accessors:{}}).accessors,r=this.prototype;function s(a){const o=Li(a);i[o]||(S0(r,a),i[o]=!0)}return _.isArray(t)?t.forEach(s):s(t),this}}he.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_.reduceDescriptors(he.prototype,({value:n},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(i){this[e]=i}}});_.freezeMethods(he);function oa(n,t){const e=this||hr,i=t||e,r=he.from(i.headers);let s=i.data;return _.forEach(n,function(o){s=o.call(e,s,r.normalize(),t?t.status:void 0)}),r.normalize(),s}function dh(n){return!!(n&&n.__CANCEL__)}function Si(n,t,e){Z.call(this,n??"canceled",Z.ERR_CANCELED,t,e),this.name="CanceledError"}_.inherits(Si,Z,{__CANCEL__:!0});function hh(n,t,e){const i=e.config.validateStatus;!e.status||!i||i(e.status)?n(e):t(new Z("Request failed with status code "+e.status,[Z.ERR_BAD_REQUEST,Z.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function C0(n){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function _0(n,t){n=n||10;const e=new Array(n),i=new Array(n);let r=0,s=0,a;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=i[s];a||(a=c),e[r]=l,i[r]=c;let d=s,h=0;for(;d!==r;)h+=e[d++],d=d%n;if(r=(r+1)%n,r===s&&(s=(s+1)%n),c-a<t)return;const p=u&&c-u;return p?Math.round(h*1e3/p):void 0}}function T0(n,t){let e=0,i=1e3/t,r,s;const a=(c,u=Date.now())=>{e=u,r=null,s&&(clearTimeout(s),s=null),n.apply(null,c)};return[(...c)=>{const u=Date.now(),d=u-e;d>=i?a(c,u):(r=c,s||(s=setTimeout(()=>{s=null,a(r)},i-d)))},()=>r&&a(r)]}const Yr=(n,t,e=3)=>{let i=0;const r=_0(50,250);return T0(s=>{const a=s.loaded,o=s.lengthComputable?s.total:void 0,l=a-i,c=r(l),u=a<=o;i=a;const d={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:c||void 0,estimated:c&&o&&u?(o-a)/c:void 0,event:s,lengthComputable:o!=null,[t?"download":"upload"]:!0};n(d)},e)},Dc=(n,t)=>{const e=n!=null;return[i=>t[0]({lengthComputable:e,total:n,loaded:i}),t[1]]},Pc=n=>(...t)=>_.asap(()=>n(...t)),R0=Qt.hasStandardBrowserEnv?((n,t)=>e=>(e=new URL(e,Qt.origin),n.protocol===e.protocol&&n.host===e.host&&(t||n.port===e.port)))(new URL(Qt.origin),Qt.navigator&&/(msie|trident)/i.test(Qt.navigator.userAgent)):()=>!0,D0=Qt.hasStandardBrowserEnv?{write(n,t,e,i,r,s){const a=[n+"="+encodeURIComponent(t)];_.isNumber(e)&&a.push("expires="+new Date(e).toGMTString()),_.isString(i)&&a.push("path="+i),_.isString(r)&&a.push("domain="+r),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(n){const t=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function P0(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function I0(n,t){return t?n.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):n}function ph(n,t){return n&&!P0(t)?I0(n,t):t}const Ic=n=>n instanceof he?{...n}:n;function Yn(n,t){t=t||{};const e={};function i(c,u,d,h){return _.isPlainObject(c)&&_.isPlainObject(u)?_.merge.call({caseless:h},c,u):_.isPlainObject(u)?_.merge({},u):_.isArray(u)?u.slice():u}function r(c,u,d,h){if(_.isUndefined(u)){if(!_.isUndefined(c))return i(void 0,c,d,h)}else return i(c,u,d,h)}function s(c,u){if(!_.isUndefined(u))return i(void 0,u)}function a(c,u){if(_.isUndefined(u)){if(!_.isUndefined(c))return i(void 0,c)}else return i(void 0,u)}function o(c,u,d){if(d in t)return i(c,u);if(d in n)return i(void 0,c)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(c,u,d)=>r(Ic(c),Ic(u),d,!0)};return _.forEach(Object.keys(Object.assign({},n,t)),function(u){const d=l[u]||r,h=d(n[u],t[u],u);_.isUndefined(h)&&d!==o||(e[u]=h)}),e}const fh=n=>{const t=Yn({},n);let{data:e,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:s,headers:a,auth:o}=t;t.headers=a=he.from(a),t.url=lh(ph(t.baseURL,t.url),n.params,n.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let l;if(_.isFormData(e)){if(Qt.hasStandardBrowserEnv||Qt.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((l=a.getContentType())!==!1){const[c,...u]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];a.setContentType([c||"multipart/form-data",...u].join("; "))}}if(Qt.hasStandardBrowserEnv&&(i&&_.isFunction(i)&&(i=i(t)),i||i!==!1&&R0(t.url))){const c=r&&s&&D0.read(s);c&&a.set(r,c)}return t},k0=typeof XMLHttpRequest<"u",O0=k0&&function(n){return new Promise(function(e,i){const r=fh(n);let s=r.data;const a=he.from(r.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:c}=r,u,d,h,p,f;function m(){p&&p(),f&&f(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(r.method.toUpperCase(),r.url,!0),v.timeout=r.timeout;function g(){if(!v)return;const y=he.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),x={data:!o||o==="text"||o==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:y,config:n,request:v};hh(function(S){e(S),m()},function(S){i(S),m()},x),v=null}"onloadend"in v?v.onloadend=g:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(g)},v.onabort=function(){v&&(i(new Z("Request aborted",Z.ECONNABORTED,n,v)),v=null)},v.onerror=function(){i(new Z("Network Error",Z.ERR_NETWORK,n,v)),v=null},v.ontimeout=function(){let w=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const x=r.transitional||ch;r.timeoutErrorMessage&&(w=r.timeoutErrorMessage),i(new Z(w,x.clarifyTimeoutError?Z.ETIMEDOUT:Z.ECONNABORTED,n,v)),v=null},s===void 0&&a.setContentType(null),"setRequestHeader"in v&&_.forEach(a.toJSON(),function(w,x){v.setRequestHeader(x,w)}),_.isUndefined(r.withCredentials)||(v.withCredentials=!!r.withCredentials),o&&o!=="json"&&(v.responseType=r.responseType),c&&([h,f]=Yr(c,!0),v.addEventListener("progress",h)),l&&v.upload&&([d,p]=Yr(l),v.upload.addEventListener("progress",d),v.upload.addEventListener("loadend",p)),(r.cancelToken||r.signal)&&(u=y=>{v&&(i(!y||y.type?new Si(null,n,v):y),v.abort(),v=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const b=C0(r.url);if(b&&Qt.protocols.indexOf(b)===-1){i(new Z("Unsupported protocol "+b+":",Z.ERR_BAD_REQUEST,n));return}v.send(s||null)})},M0=(n,t)=>{const{length:e}=n=n?n.filter(Boolean):[];if(t||e){let i=new AbortController,r;const s=function(c){if(!r){r=!0,o();const u=c instanceof Error?c:this.reason;i.abort(u instanceof Z?u:new Si(u instanceof Error?u.message:u))}};let a=t&&setTimeout(()=>{a=null,s(new Z(`timeout ${t} of ms exceeded`,Z.ETIMEDOUT))},t);const o=()=>{n&&(a&&clearTimeout(a),a=null,n.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),n=null)};n.forEach(c=>c.addEventListener("abort",s));const{signal:l}=i;return l.unsubscribe=()=>_.asap(o),l}},L0=function*(n,t){let e=n.byteLength;if(e<t){yield n;return}let i=0,r;for(;i<e;)r=i+t,yield n.slice(i,r),i=r},N0=async function*(n,t){for await(const e of F0(n))yield*L0(e,t)},F0=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const t=n.getReader();try{for(;;){const{done:e,value:i}=await t.read();if(e)break;yield i}}finally{await t.cancel()}},kc=(n,t,e,i)=>{const r=N0(n,t);let s=0,a,o=l=>{a||(a=!0,i&&i(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await r.next();if(c){o(),l.close();return}let d=u.byteLength;if(e){let h=s+=d;e(h)}l.enqueue(new Uint8Array(u))}catch(c){throw o(c),c}},cancel(l){return o(l),r.return()}},{highWaterMark:2})},Rs=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",mh=Rs&&typeof ReadableStream=="function",B0=Rs&&(typeof TextEncoder=="function"?(n=>t=>n.encode(t))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),gh=(n,...t)=>{try{return!!n(...t)}catch{return!1}},j0=mh&&gh(()=>{let n=!1;const t=new Request(Qt.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!t}),Oc=64*1024,Ja=mh&&gh(()=>_.isReadableStream(new Response("").body)),Jr={stream:Ja&&(n=>n.body)};Rs&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Jr[t]&&(Jr[t]=_.isFunction(n[t])?e=>e[t]():(e,i)=>{throw new Z(`Response type '${t}' is not supported`,Z.ERR_NOT_SUPPORT,i)})})})(new Response);const $0=async n=>{if(n==null)return 0;if(_.isBlob(n))return n.size;if(_.isSpecCompliantForm(n))return(await new Request(Qt.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(_.isArrayBufferView(n)||_.isArrayBuffer(n))return n.byteLength;if(_.isURLSearchParams(n)&&(n=n+""),_.isString(n))return(await B0(n)).byteLength},z0=async(n,t)=>{const e=_.toFiniteNumber(n.getContentLength());return e??$0(t)},H0=Rs&&(async n=>{let{url:t,method:e,data:i,signal:r,cancelToken:s,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=fh(n);c=c?(c+"").toLowerCase():"text";let p=M0([r,s&&s.toAbortSignal()],a),f;const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let v;try{if(l&&j0&&e!=="get"&&e!=="head"&&(v=await z0(u,i))!==0){let x=new Request(t,{method:"POST",body:i,duplex:"half"}),E;if(_.isFormData(i)&&(E=x.headers.get("content-type"))&&u.setContentType(E),x.body){const[S,D]=Dc(v,Yr(Pc(l)));i=kc(x.body,Oc,S,D)}}_.isString(d)||(d=d?"include":"omit");const g="credentials"in Request.prototype;f=new Request(t,{...h,signal:p,method:e.toUpperCase(),headers:u.normalize().toJSON(),body:i,duplex:"half",credentials:g?d:void 0});let b=await fetch(f);const y=Ja&&(c==="stream"||c==="response");if(Ja&&(o||y&&m)){const x={};["status","statusText","headers"].forEach(T=>{x[T]=b[T]});const E=_.toFiniteNumber(b.headers.get("content-length")),[S,D]=o&&Dc(E,Yr(Pc(o),!0))||[];b=new Response(kc(b.body,Oc,S,()=>{D&&D(),m&&m()}),x)}c=c||"text";let w=await Jr[_.findKey(Jr,c)||"text"](b,n);return!y&&m&&m(),await new Promise((x,E)=>{hh(x,E,{data:w,headers:he.from(b.headers),status:b.status,statusText:b.statusText,config:n,request:f})})}catch(g){throw m&&m(),g&&g.name==="TypeError"&&/fetch/i.test(g.message)?Object.assign(new Z("Network Error",Z.ERR_NETWORK,n,f),{cause:g.cause||g}):Z.from(g,g&&g.code,n,f)}}),Qa={http:i0,xhr:O0,fetch:H0};_.forEach(Qa,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});const Mc=n=>`- ${n}`,U0=n=>_.isFunction(n)||n===null||n===!1,vh={getAdapter:n=>{n=_.isArray(n)?n:[n];const{length:t}=n;let e,i;const r={};for(let s=0;s<t;s++){e=n[s];let a;if(i=e,!U0(e)&&(i=Qa[(a=String(e)).toLowerCase()],i===void 0))throw new Z(`Unknown adapter '${a}'`);if(i)break;r[a||"#"+s]=i}if(!i){const s=Object.entries(r).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=t?s.length>1?`since :
`+s.map(Mc).join(`
`):" "+Mc(s[0]):"as no adapter specified";throw new Z("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:Qa};function la(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Si(null,n)}function Lc(n){return la(n),n.headers=he.from(n.headers),n.data=oa.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),vh.getAdapter(n.adapter||hr.adapter)(n).then(function(i){return la(n),i.data=oa.call(n,n.transformResponse,i),i.headers=he.from(i.headers),i},function(i){return dh(i)||(la(n),i&&i.response&&(i.response.data=oa.call(n,n.transformResponse,i.response),i.response.headers=he.from(i.response.headers))),Promise.reject(i)})}const bh="1.7.9",Ds={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{Ds[n]=function(i){return typeof i===n||"a"+(t<1?"n ":" ")+n}});const Nc={};Ds.transitional=function(t,e,i){function r(s,a){return"[Axios v"+bh+"] Transitional option '"+s+"'"+a+(i?". "+i:"")}return(s,a,o)=>{if(t===!1)throw new Z(r(a," has been removed"+(e?" in "+e:"")),Z.ERR_DEPRECATED);return e&&!Nc[a]&&(Nc[a]=!0,console.warn(r(a," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(s,a,o):!0}};Ds.spelling=function(t){return(e,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function q0(n,t,e){if(typeof n!="object")throw new Z("options must be an object",Z.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let r=i.length;for(;r-- >0;){const s=i[r],a=t[s];if(a){const o=n[s],l=o===void 0||a(o,s,n);if(l!==!0)throw new Z("option "+s+" must be "+l,Z.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Z("Unknown option "+s,Z.ERR_BAD_OPTION)}}const Nr={assertOptions:q0,validators:Ds},Ze=Nr.validators;class qn{constructor(t){this.defaults=t,this.interceptors={request:new Tc,response:new Tc}}async request(t,e){try{return await this._request(t,e)}catch(i){if(i instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Yn(this.defaults,e);const{transitional:i,paramsSerializer:r,headers:s}=e;i!==void 0&&Nr.assertOptions(i,{silentJSONParsing:Ze.transitional(Ze.boolean),forcedJSONParsing:Ze.transitional(Ze.boolean),clarifyTimeoutError:Ze.transitional(Ze.boolean)},!1),r!=null&&(_.isFunction(r)?e.paramsSerializer={serialize:r}:Nr.assertOptions(r,{encode:Ze.function,serialize:Ze.function},!0)),Nr.assertOptions(e,{baseUrl:Ze.spelling("baseURL"),withXsrfToken:Ze.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let a=s&&_.merge(s.common,s[e.method]);s&&_.forEach(["delete","get","head","post","put","patch","common"],f=>{delete s[f]}),e.headers=he.concat(a,s);const o=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(e)===!1||(l=l&&m.synchronous,o.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,d=0,h;if(!l){const f=[Lc.bind(this),void 0];for(f.unshift.apply(f,o),f.push.apply(f,c),h=f.length,u=Promise.resolve(e);d<h;)u=u.then(f[d++],f[d++]);return u}h=o.length;let p=e;for(d=0;d<h;){const f=o[d++],m=o[d++];try{p=f(p)}catch(v){m.call(this,v);break}}try{u=Lc.call(this,p)}catch(f){return Promise.reject(f)}for(d=0,h=c.length;d<h;)u=u.then(c[d++],c[d++]);return u}getUri(t){t=Yn(this.defaults,t);const e=ph(t.baseURL,t.url);return lh(e,t.params,t.paramsSerializer)}}_.forEach(["delete","get","head","options"],function(t){qn.prototype[t]=function(e,i){return this.request(Yn(i||{},{method:t,url:e,data:(i||{}).data}))}});_.forEach(["post","put","patch"],function(t){function e(i){return function(s,a,o){return this.request(Yn(o||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}qn.prototype[t]=e(),qn.prototype[t+"Form"]=e(!0)});class $o{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(s){e=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const a=new Promise(o=>{i.subscribe(o),s=o}).then(r);return a.cancel=function(){i.unsubscribe(s)},a},t(function(s,a,o){i.reason||(i.reason=new Si(s,a,o),e(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=i=>{t.abort(i)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new $o(function(r){t=r}),cancel:t}}}function G0(n){return function(e){return n.apply(null,e)}}function W0(n){return _.isObject(n)&&n.isAxiosError===!0}const Za={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Za).forEach(([n,t])=>{Za[t]=n});function yh(n){const t=new qn(n),e=Yd(qn.prototype.request,t);return _.extend(e,qn.prototype,t,{allOwnKeys:!0}),_.extend(e,t,null,{allOwnKeys:!0}),e.create=function(r){return yh(Yn(n,r))},e}const Dt=yh(hr);Dt.Axios=qn;Dt.CanceledError=Si;Dt.CancelToken=$o;Dt.isCancel=dh;Dt.VERSION=bh;Dt.toFormData=Ts;Dt.AxiosError=Z;Dt.Cancel=Dt.CanceledError;Dt.all=function(t){return Promise.all(t)};Dt.spread=G0;Dt.isAxiosError=W0;Dt.mergeConfig=Yn;Dt.AxiosHeaders=he;Dt.formToJSON=n=>uh(_.isHTMLForm(n)?new FormData(n):n);Dt.getAdapter=vh.getAdapter;Dt.HttpStatusCode=Za;Dt.default=Dt;var Fc={};const Bc="";async function V0(){try{const n=jr.get("userInfo");if(n){const e=JSON.parse(decodeURIComponent(n)),i=await Dt.get(`${Bc}/subscription/${e.id}`,{headers:{Authorization:`Bearer ${Fc.API_SECRET_KEY}`}});return i.data.success&&i.data.data?.status==="active"}const t=jr.get("userToken");if(t){const e=ef(t),i=await Dt.get(`${Bc}/subscription/${e.id}`,{headers:{Authorization:`Bearer ${Fc.API_SECRET_KEY}`}});return i.data.success&&i.data.data?.status==="active"}return!1}catch(n){return console.error("Error fetching subscription status:",n),!1}}const X0=(n=10)=>{const t=new Date().toISOString().split("T")[0],e=JSON.parse(jr.get("dailySiteUsage")||"{}");return e[t]=(e[t]||0)+1,e[t]>n?!1:(jr.set("dailySiteUsage",JSON.stringify(e),{expires:1,path:"/"}),!0)};await bg(()=>import("./pdf.worker.min.CkWdBUdP.js"),[]);const xh="/images/corrupted.png";function Fr(n,t){return n(ht({errorMessage:t.EMPTY_FILE.message})),n(ht({errorCode:"ERR_EMPTY_FILE"})),xh}const K0=async(n,t,e,i,r,s)=>{const a=n.size;let o="",l=i==="fr"?"fr-FR":i==""?"en":i;o=new Intl.NumberFormat(l,{notation:"compact",style:"unit",unit:"byte",unitDisplay:"narrow"}).format(a);let c="<bdi>"+o;if(n.size===0)throw Fr(r,s),Error("ERROR: FILE_SIZE_ZERO");if(n.type!=="image/png"&&n.type!=="image/jpeg"&&n.type!=="application/pdf")return c;try{if(n.type==="image/jpeg"||n.type==="image/png"){const u=new Image;u.src=URL.createObjectURL(n),await new Promise(d=>{u.onload=()=>{c+=`</bdi> - <bdi>${u.width} x ${u.height}</bdi>`,d()}})}else if(n.type==="application/pdf"){const u=URL.createObjectURL(n),h=(await Es(u).promise).numPages||0;h===2&&i==="ar"?c+=" - </bdi>":c+=` - ${i==="ar"&&h===1?"":h+" "}${h>1?t:e}</bdi>`,URL.revokeObjectURL(u),n.size||Fr(r,s)}}catch{n.size||Fr(r,s)}return c},Y0=n=>{switch(n){case".docx":return"/images/word.png";case".html":return"/images/html.png";case".pptx":return"/images/powerpoint.png";case".xlsx":return"/images/excel.png";default:return"images/pdf.png"}},jc=(n,t)=>n===".jpg"||t.includes("merge-pdf"),J0=async(n,t,e,i,r)=>{const s=Array.from(n),a=await V0();if(!X0(100)&&!a)return i(ht({errorMessage:e.ERR_MAX_USAGE.message})),i(ht({errorCode:"ERR_MAX_USAGE"})),!1;if(await wh(s[0])>10)return i(ht({errorMessage:e.ERR_FILE_PAGE_LIMIT.message})),i(ht({errorCode:"ERR_FILE_PAGE_LIMIT"})),!1;let l=["application/pdf","text/html","image/jpeg","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint","application/vnd.ms-excel"];if(s.length==0)return i(ht({errorMessage:e.NO_FILES_SELECTED.message})),i(ht({errorCode:"ERR_NO_FILES_SELECTED"})),!1;const c=50*1024*1024;for(let u=0;u<s.length;u++){const d=s[u]||null;t=t.replace(".","").toUpperCase();let h=d.name.split(".").pop()?.toUpperCase()||"";const p=["ppt","pptx","doc","docx","xls","xlsx","html","htm","jpg","pdf"];if(!d||!d.name)return i(ht({errorMessage:e.FILE_CORRUPT.message})),!1;if(d.type)if(!l.includes(d.type)||!p.includes(h.toLowerCase())){const f=e.NOT_SUPPORTED_TYPE.types[t]||e.NOT_SUPPORTED_TYPE.message;return i(ht({errorMessage:f})),!1}else{if(d.size>c)return i(ht({errorMessage:e.FILE_TOO_LARGE.message})),!1;if(d.size){if(d.type.startsWith("image/")){const f=new FileReader;return f.readAsDataURL(d),f.onload=()=>{const m=new Image;m.src=f.result,m.onerror=()=>(i(ht({errorMessage:e.INVALID_IMAGE_DATA.message})),!1)},!0}}else return i(ht({errorMessage:e.EMPTY_FILE.message})),i(ht({errorCode:"ERR_EMPTY_FILE"})),!1}else return i(ht({errorMessage:e.NOT_SUPPORTED_TYPE.message})),!1}return!0};async function wh(n){const t=new FileReader;return t.readAsArrayBuffer(n),new Promise((e,i)=>{t.onload=async r=>{try{const s=new Uint8Array(r.target?.result),a=await Es(s).promise;e(a.numPages)}catch(s){i(s)}}})}async function Q0(n,t,e,i){const r=URL.createObjectURL(n);if(n.size)try{const o=await(await Es(r).promise).getPage(i),c=o.getViewport({scale:1.5}),u=document.createElement("canvas"),d=u.getContext("2d");if(!d)throw new Error("Canvas context not available.");return u.height=c.height,u.width=c.width,await o.render({canvasContext:d,viewport:c}).promise,u.toDataURL()}catch{return xh}else return Fr(t,e)}async function Z0(n){try{const t=await n.arrayBuffer(),e=await Es({data:t}).promise;let i=e.numPages,r="",s=0,a=0,o=0;for(let p=1;p<=i;p++){const f=await e.getPage(p),m=await f.getTextContent();r+=m.items.map(b=>"str"in b?b.str:"").join(" ");const v=await f.getOperatorList(),g=f.getViewport({scale:1});a+=g.width*g.height;for(let b=0;b<v.fnArray.length;b++)if(v.fnArray[b]===Ac.paintImageXObject||v.fnArray[b]===Ac.paintInlineImageXObject){s++;const y=v.argsArray[b];y&&y.length>=2&&(o+=y[0]*y[1])}}const l=r.trim().length,c=o/a,u=r.split(/\s+/).length/i;let d=0;return c>.5&&u<50&&(d+=.4),l<100&&s>0&&(d+=.3),s>=i&&(d+=.3),!/^[A-Za-z0-9\s.,!?-]+$/.test(r)&&s>0&&(d+=.2),d=Math.min(1,d),{scanned:d>.6,confidence:d}}catch(t){throw console.error("Error analyzing PDF:",t),t}}const Dn=nf(n=>({files:[],fileInput:null,downloadBtn:null,submitBtn:null,imageUrls:[],filesOnSubmit:[],setFiles:t=>{const e=new Set;t instanceof FileList?Array.from(t).forEach(i=>e.add(i)):t.forEach(i=>e.add(i)),n({files:Array.from(e)})},setFileInput(t){n({fileInput:t})},setSubmitBtn(t){n({submitBtn:t})},setDownloadBtn(t){n({downloadBtn:t})},setImageUrls(t){n(e=>({imageUrls:typeof t=="function"?t(e.imageUrls):t}))},setFilesOnSubmit(t){n({filesOnSubmit:t})}})),tb=({index:n,extension:t,errors:e,fileName:i})=>{const{files:r,setFiles:s}=Dn();qe();const a=o=>{const l=r.filter(c=>c.name!==i);s(l)};return C.jsx("div",{className:`action-div d-flex ${t==".html"?"justify-content-end":"justify-content-between"}`,children:C.jsx("button",{className:"btn btn-light",onClick:o=>a(),children:C.jsx(mg,{className:"icon hero-icon"})})})},gi=Math.min,Gn=Math.max,Qr=Math.round,Tr=Math.floor,en=n=>({x:n,y:n}),eb={left:"right",right:"left",bottom:"top",top:"bottom"},nb={start:"end",end:"start"};function to(n,t,e){return Gn(n,gi(t,e))}function pr(n,t){return typeof n=="function"?n(t):n}function Jn(n){return n.split("-")[0]}function fr(n){return n.split("-")[1]}function Ah(n){return n==="x"?"y":"x"}function zo(n){return n==="y"?"height":"width"}function vi(n){return["top","bottom"].includes(Jn(n))?"y":"x"}function Ho(n){return Ah(vi(n))}function ib(n,t,e){e===void 0&&(e=!1);const i=fr(n),r=Ho(n),s=zo(r);let a=r==="x"?i===(e?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=Zr(a)),[a,Zr(a)]}function rb(n){const t=Zr(n);return[eo(n),t,eo(t)]}function eo(n){return n.replace(/start|end/g,t=>nb[t])}function sb(n,t,e){const i=["left","right"],r=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(n){case"top":case"bottom":return e?t?r:i:t?i:r;case"left":case"right":return t?s:a;default:return[]}}function ab(n,t,e,i){const r=fr(n);let s=sb(Jn(n),e==="start",i);return r&&(s=s.map(a=>a+"-"+r),t&&(s=s.concat(s.map(eo)))),s}function Zr(n){return n.replace(/left|right|bottom|top/g,t=>eb[t])}function ob(n){return{top:0,right:0,bottom:0,left:0,...n}}function Eh(n){return typeof n!="number"?ob(n):{top:n,right:n,bottom:n,left:n}}function ts(n){const{x:t,y:e,width:i,height:r}=n;return{width:i,height:r,top:e,left:t,right:t+i,bottom:e+r,x:t,y:e}}function $c(n,t,e){let{reference:i,floating:r}=n;const s=vi(t),a=Ho(t),o=zo(a),l=Jn(t),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,h=i[o]/2-r[o]/2;let p;switch(l){case"top":p={x:u,y:i.y-r.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-r.width,y:d};break;default:p={x:i.x,y:i.y}}switch(fr(t)){case"start":p[a]-=h*(e&&c?-1:1);break;case"end":p[a]+=h*(e&&c?-1:1);break}return p}const lb=async(n,t,e)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:a}=e,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(t));let c=await a.getElementRects({reference:n,floating:t,strategy:r}),{x:u,y:d}=$c(c,i,l),h=i,p={},f=0;for(let m=0;m<o.length;m++){const{name:v,fn:g}=o[m],{x:b,y,data:w,reset:x}=await g({x:u,y:d,initialPlacement:i,placement:h,strategy:r,middlewareData:p,rects:c,platform:a,elements:{reference:n,floating:t}});u=b??u,d=y??d,p={...p,[v]:{...p[v],...w}},x&&f<=50&&(f++,typeof x=="object"&&(x.placement&&(h=x.placement),x.rects&&(c=x.rects===!0?await a.getElementRects({reference:n,floating:t,strategy:r}):x.rects),{x:u,y:d}=$c(c,h,l)),m=-1)}return{x:u,y:d,placement:h,strategy:r,middlewareData:p}};async function Sh(n,t){var e;t===void 0&&(t={});const{x:i,y:r,platform:s,rects:a,elements:o,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=pr(t,n),f=Eh(p),v=o[h?d==="floating"?"reference":"floating":d],g=ts(await s.getClippingRect({element:(e=await(s.isElement==null?void 0:s.isElement(v)))==null||e?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),b=d==="floating"?{x:i,y:r,width:a.floating.width,height:a.floating.height}:a.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),w=await(s.isElement==null?void 0:s.isElement(y))?await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1}:{x:1,y:1},x=ts(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:b,offsetParent:y,strategy:l}):b);return{top:(g.top-x.top+f.top)/w.y,bottom:(x.bottom-g.bottom+f.bottom)/w.y,left:(g.left-x.left+f.left)/w.x,right:(x.right-g.right+f.right)/w.x}}const cb=n=>({name:"arrow",options:n,async fn(t){const{x:e,y:i,placement:r,rects:s,platform:a,elements:o,middlewareData:l}=t,{element:c,padding:u=0}=pr(n,t)||{};if(c==null)return{};const d=Eh(u),h={x:e,y:i},p=Ho(r),f=zo(p),m=await a.getDimensions(c),v=p==="y",g=v?"top":"left",b=v?"bottom":"right",y=v?"clientHeight":"clientWidth",w=s.reference[f]+s.reference[p]-h[p]-s.floating[f],x=h[p]-s.reference[p],E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let S=E?E[y]:0;(!S||!await(a.isElement==null?void 0:a.isElement(E)))&&(S=o.floating[y]||s.floating[f]);const D=w/2-x/2,T=S/2-m[f]/2-1,L=gi(d[g],T),k=gi(d[b],T),j=L,R=S-m[f]-k,P=S/2-m[f]/2+D,U=to(j,P,R),$=!l.arrow&&fr(r)!=null&&P!==U&&s.reference[f]/2-(P<j?L:k)-m[f]/2<0,O=$?P<j?P-j:P-R:0;return{[p]:h[p]+O,data:{[p]:U,centerOffset:P-U-O,...$&&{alignmentOffset:O}},reset:$}}}),ub=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(t){var e,i;const{placement:r,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:m=!0,...v}=pr(n,t);if((e=s.arrow)!=null&&e.alignmentOffset)return{};const g=Jn(r),b=vi(o),y=Jn(o)===o,w=await(l.isRTL==null?void 0:l.isRTL(c.floating)),x=h||(y||!m?[Zr(o)]:rb(o)),E=f!=="none";!h&&E&&x.push(...ab(o,m,f,w));const S=[o,...x],D=await Sh(t,v),T=[];let L=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&T.push(D[g]),d){const P=ib(r,a,w);T.push(D[P[0]],D[P[1]])}if(L=[...L,{placement:r,overflows:T}],!T.every(P=>P<=0)){var k,j;const P=(((k=s.flip)==null?void 0:k.index)||0)+1,U=S[P];if(U)return{data:{index:P,overflows:L},reset:{placement:U}};let $=(j=L.filter(O=>O.overflows[0]<=0).sort((O,M)=>O.overflows[1]-M.overflows[1])[0])==null?void 0:j.placement;if(!$)switch(p){case"bestFit":{var R;const O=(R=L.filter(M=>{if(E){const V=vi(M.placement);return V===b||V==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(V=>V>0).reduce((V,at)=>V+at,0)]).sort((M,V)=>M[1]-V[1])[0])==null?void 0:R[0];O&&($=O);break}case"initialPlacement":$=o;break}if(r!==$)return{reset:{placement:$}}}return{}}}};async function db(n,t){const{placement:e,platform:i,elements:r}=n,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),a=Jn(e),o=fr(e),l=vi(e)==="y",c=["left","top"].includes(a)?-1:1,u=s&&l?-1:1,d=pr(t,n);let{mainAxis:h,crossAxis:p,alignmentAxis:f}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&typeof f=="number"&&(p=o==="end"?f*-1:f),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}const hb=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(t){var e,i;const{x:r,y:s,placement:a,middlewareData:o}=t,l=await db(t,n);return a===((e=o.offset)==null?void 0:e.placement)&&(i=o.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:a}}}}},pb=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(t){const{x:e,y:i,placement:r}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:v=>{let{x:g,y:b}=v;return{x:g,y:b}}},...l}=pr(n,t),c={x:e,y:i},u=await Sh(t,l),d=vi(Jn(r)),h=Ah(d);let p=c[h],f=c[d];if(s){const v=h==="y"?"top":"left",g=h==="y"?"bottom":"right",b=p+u[v],y=p-u[g];p=to(b,p,y)}if(a){const v=d==="y"?"top":"left",g=d==="y"?"bottom":"right",b=f+u[v],y=f-u[g];f=to(b,f,y)}const m=o.fn({...t,[h]:p,[d]:f});return{...m,data:{x:m.x-e,y:m.y-i,enabled:{[h]:s,[d]:a}}}}}};function Ps(){return typeof window<"u"}function Ci(n){return Ch(n)?(n.nodeName||"").toLowerCase():"#document"}function ye(n){var t;return(n==null||(t=n.ownerDocument)==null?void 0:t.defaultView)||window}function sn(n){var t;return(t=(Ch(n)?n.ownerDocument:n.document)||window.document)==null?void 0:t.documentElement}function Ch(n){return Ps()?n instanceof Node||n instanceof ye(n).Node:!1}function He(n){return Ps()?n instanceof Element||n instanceof ye(n).Element:!1}function nn(n){return Ps()?n instanceof HTMLElement||n instanceof ye(n).HTMLElement:!1}function zc(n){return!Ps()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof ye(n).ShadowRoot}function mr(n){const{overflow:t,overflowX:e,overflowY:i,display:r}=Ue(n);return/auto|scroll|overlay|hidden|clip/.test(t+i+e)&&!["inline","contents"].includes(r)}function fb(n){return["table","td","th"].includes(Ci(n))}function Is(n){return[":popover-open",":modal"].some(t=>{try{return n.matches(t)}catch{return!1}})}function Uo(n){const t=qo(),e=He(n)?Ue(n):n;return e.transform!=="none"||e.perspective!=="none"||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(e.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(e.contain||"").includes(i))}function mb(n){let t=_n(n);for(;nn(t)&&!bi(t);){if(Uo(t))return t;if(Is(t))return null;t=_n(t)}return null}function qo(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function bi(n){return["html","body","#document"].includes(Ci(n))}function Ue(n){return ye(n).getComputedStyle(n)}function ks(n){return He(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function _n(n){if(Ci(n)==="html")return n;const t=n.assignedSlot||n.parentNode||zc(n)&&n.host||sn(n);return zc(t)?t.host:t}function _h(n){const t=_n(n);return bi(t)?n.ownerDocument?n.ownerDocument.body:n.body:nn(t)&&mr(t)?t:_h(t)}function Zi(n,t,e){var i;t===void 0&&(t=[]),e===void 0&&(e=!0);const r=_h(n),s=r===((i=n.ownerDocument)==null?void 0:i.body),a=ye(r);if(s){const o=no(a);return t.concat(a,a.visualViewport||[],mr(r)?r:[],o&&e?Zi(o):[])}return t.concat(r,Zi(r,[],e))}function no(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Th(n){const t=Ue(n);let e=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const r=nn(n),s=r?n.offsetWidth:e,a=r?n.offsetHeight:i,o=Qr(e)!==s||Qr(i)!==a;return o&&(e=s,i=a),{width:e,height:i,$:o}}function Go(n){return He(n)?n:n.contextElement}function hi(n){const t=Go(n);if(!nn(t))return en(1);const e=t.getBoundingClientRect(),{width:i,height:r,$:s}=Th(t);let a=(s?Qr(e.width):e.width)/i,o=(s?Qr(e.height):e.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const gb=en(0);function Rh(n){const t=ye(n);return!qo()||!t.visualViewport?gb:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function vb(n,t,e){return t===void 0&&(t=!1),!e||t&&e!==ye(n)?!1:t}function Qn(n,t,e,i){t===void 0&&(t=!1),e===void 0&&(e=!1);const r=n.getBoundingClientRect(),s=Go(n);let a=en(1);t&&(i?He(i)&&(a=hi(i)):a=hi(n));const o=vb(s,e,i)?Rh(s):en(0);let l=(r.left+o.x)/a.x,c=(r.top+o.y)/a.y,u=r.width/a.x,d=r.height/a.y;if(s){const h=ye(s),p=i&&He(i)?ye(i):i;let f=h,m=no(f);for(;m&&i&&p!==f;){const v=hi(m),g=m.getBoundingClientRect(),b=Ue(m),y=g.left+(m.clientLeft+parseFloat(b.paddingLeft))*v.x,w=g.top+(m.clientTop+parseFloat(b.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=y,c+=w,f=ye(m),m=no(f)}}return ts({width:u,height:d,x:l,y:c})}function Wo(n,t){const e=ks(n).scrollLeft;return t?t.left+e:Qn(sn(n)).left+e}function Dh(n,t,e){e===void 0&&(e=!1);const i=n.getBoundingClientRect(),r=i.left+t.scrollLeft-(e?0:Wo(n,i)),s=i.top+t.scrollTop;return{x:r,y:s}}function bb(n){let{elements:t,rect:e,offsetParent:i,strategy:r}=n;const s=r==="fixed",a=sn(i),o=t?Is(t.floating):!1;if(i===a||o&&s)return e;let l={scrollLeft:0,scrollTop:0},c=en(1);const u=en(0),d=nn(i);if((d||!d&&!s)&&((Ci(i)!=="body"||mr(a))&&(l=ks(i)),nn(i))){const p=Qn(i);c=hi(i),u.x=p.x+i.clientLeft,u.y=p.y+i.clientTop}const h=a&&!d&&!s?Dh(a,l,!0):en(0);return{width:e.width*c.x,height:e.height*c.y,x:e.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:e.y*c.y-l.scrollTop*c.y+u.y+h.y}}function yb(n){return Array.from(n.getClientRects())}function xb(n){const t=sn(n),e=ks(n),i=n.ownerDocument.body,r=Gn(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),s=Gn(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let a=-e.scrollLeft+Wo(n);const o=-e.scrollTop;return Ue(i).direction==="rtl"&&(a+=Gn(t.clientWidth,i.clientWidth)-r),{width:r,height:s,x:a,y:o}}function wb(n,t){const e=ye(n),i=sn(n),r=e.visualViewport;let s=i.clientWidth,a=i.clientHeight,o=0,l=0;if(r){s=r.width,a=r.height;const c=qo();(!c||c&&t==="fixed")&&(o=r.offsetLeft,l=r.offsetTop)}return{width:s,height:a,x:o,y:l}}function Ab(n,t){const e=Qn(n,!0,t==="fixed"),i=e.top+n.clientTop,r=e.left+n.clientLeft,s=nn(n)?hi(n):en(1),a=n.clientWidth*s.x,o=n.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:a,height:o,x:l,y:c}}function Hc(n,t,e){let i;if(t==="viewport")i=wb(n,e);else if(t==="document")i=xb(sn(n));else if(He(t))i=Ab(t,e);else{const r=Rh(n);i={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return ts(i)}function Ph(n,t){const e=_n(n);return e===t||!He(e)||bi(e)?!1:Ue(e).position==="fixed"||Ph(e,t)}function Eb(n,t){const e=t.get(n);if(e)return e;let i=Zi(n,[],!1).filter(o=>He(o)&&Ci(o)!=="body"),r=null;const s=Ue(n).position==="fixed";let a=s?_n(n):n;for(;He(a)&&!bi(a);){const o=Ue(a),l=Uo(a);!l&&o.position==="fixed"&&(r=null),(s?!l&&!r:!l&&o.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||mr(a)&&!l&&Ph(n,a))?i=i.filter(u=>u!==a):r=o,a=_n(a)}return t.set(n,i),i}function Sb(n){let{element:t,boundary:e,rootBoundary:i,strategy:r}=n;const a=[...e==="clippingAncestors"?Is(t)?[]:Eb(t,this._c):[].concat(e),i],o=a[0],l=a.reduce((c,u)=>{const d=Hc(t,u,r);return c.top=Gn(d.top,c.top),c.right=gi(d.right,c.right),c.bottom=gi(d.bottom,c.bottom),c.left=Gn(d.left,c.left),c},Hc(t,o,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Cb(n){const{width:t,height:e}=Th(n);return{width:t,height:e}}function _b(n,t,e){const i=nn(t),r=sn(t),s=e==="fixed",a=Qn(n,!0,s,t);let o={scrollLeft:0,scrollTop:0};const l=en(0);if(i||!i&&!s)if((Ci(t)!=="body"||mr(r))&&(o=ks(t)),i){const h=Qn(t,!0,s,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else r&&(l.x=Wo(r));const c=r&&!i&&!s?Dh(r,o):en(0),u=a.left+o.scrollLeft-l.x-c.x,d=a.top+o.scrollTop-l.y-c.y;return{x:u,y:d,width:a.width,height:a.height}}function ca(n){return Ue(n).position==="static"}function Uc(n,t){if(!nn(n)||Ue(n).position==="fixed")return null;if(t)return t(n);let e=n.offsetParent;return sn(n)===e&&(e=e.ownerDocument.body),e}function Ih(n,t){const e=ye(n);if(Is(n))return e;if(!nn(n)){let r=_n(n);for(;r&&!bi(r);){if(He(r)&&!ca(r))return r;r=_n(r)}return e}let i=Uc(n,t);for(;i&&fb(i)&&ca(i);)i=Uc(i,t);return i&&bi(i)&&ca(i)&&!Uo(i)?e:i||mb(n)||e}const Tb=async function(n){const t=this.getOffsetParent||Ih,e=this.getDimensions,i=await e(n.floating);return{reference:_b(n.reference,await t(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Rb(n){return Ue(n).direction==="rtl"}const Db={convertOffsetParentRelativeRectToViewportRelativeRect:bb,getDocumentElement:sn,getClippingRect:Sb,getOffsetParent:Ih,getElementRects:Tb,getClientRects:yb,getDimensions:Cb,getScale:hi,isElement:He,isRTL:Rb};function Pb(n,t){let e=null,i;const r=sn(n);function s(){var o;clearTimeout(i),(o=e)==null||o.disconnect(),e=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:h}=n.getBoundingClientRect();if(o||t(),!d||!h)return;const p=Tr(u),f=Tr(r.clientWidth-(c+d)),m=Tr(r.clientHeight-(u+h)),v=Tr(c),b={rootMargin:-p+"px "+-f+"px "+-m+"px "+-v+"px",threshold:Gn(0,gi(1,l))||1};let y=!0;function w(x){const E=x[0].intersectionRatio;if(E!==l){if(!y)return a();E?a(!1,E):i=setTimeout(()=>{a(!1,1e-7)},1e3)}y=!1}try{e=new IntersectionObserver(w,{...b,root:r.ownerDocument})}catch{e=new IntersectionObserver(w,b)}e.observe(n)}return a(!0),s}function Ib(n,t,e,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=Go(n),u=r||s?[...c?Zi(c):[],...Zi(t)]:[];u.forEach(g=>{r&&g.addEventListener("scroll",e,{passive:!0}),s&&g.addEventListener("resize",e)});const d=c&&o?Pb(c,e):null;let h=-1,p=null;a&&(p=new ResizeObserver(g=>{let[b]=g;b&&b.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var y;(y=p)==null||y.observe(t)})),e()}),c&&!l&&p.observe(c),p.observe(t));let f,m=l?Qn(n):null;l&&v();function v(){const g=Qn(n);m&&(g.x!==m.x||g.y!==m.y||g.width!==m.width||g.height!==m.height)&&e(),m=g,f=requestAnimationFrame(v)}return e(),()=>{var g;u.forEach(b=>{r&&b.removeEventListener("scroll",e),s&&b.removeEventListener("resize",e)}),d?.(),(g=p)==null||g.disconnect(),p=null,l&&cancelAnimationFrame(f)}}const kb=hb,Ob=pb,Mb=ub,Lb=cb,qc=(n,t,e)=>{const i=new Map,r={platform:Db,...e},s={...r.platform,_c:i};return lb(n,t,{...r,platform:s})};var ua={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Gc;function Nb(){return Gc||(Gc=1,function(n){(function(){var t={}.hasOwnProperty;function e(){for(var s="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(s=r(s,i(o)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return e.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var o in s)t.call(s,o)&&s[o]&&(a=r(a,o));return a}function r(s,a){return a?s?s+" "+a:s+a:s}n.exports?(e.default=e,n.exports=e):window.classNames=e})()}(ua)),ua.exports}var Fb=Nb();const rn=ar(Fb);var Wc={};const Bb="react-tooltip-core-styles",jb="react-tooltip-base-styles",Vc={core:!1,base:!1};function Xc({css:n,id:t=jb,type:e="base",ref:i}){var r,s;if(!n||typeof document>"u"||Vc[e]||e==="core"&&typeof process<"u"&&(!((r=process==null?void 0:Wc)===null||r===void 0)&&r.REACT_TOOLTIP_DISABLE_CORE_STYLES)||e!=="base"&&typeof process<"u"&&(!((s=process==null?void 0:Wc)===null||s===void 0)&&s.REACT_TOOLTIP_DISABLE_BASE_STYLES))return;e==="core"&&(t=Bb),i||(i={});const{insertAt:a}=i;if(document.getElementById(t))return;const o=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.id=t,l.type="text/css",a==="top"&&o.firstChild?o.insertBefore(l,o.firstChild):o.appendChild(l),l.styleSheet?l.styleSheet.cssText=n:l.appendChild(document.createTextNode(n)),Vc[e]=!0}const Kc=async({elementReference:n=null,tooltipReference:t=null,tooltipArrowReference:e=null,place:i="top",offset:r=10,strategy:s="absolute",middlewares:a=[kb(Number(r)),Mb({fallbackAxisSideDirection:"start"}),Ob({padding:5})],border:o})=>{if(!n)return{tooltipStyles:{},tooltipArrowStyles:{},place:i};if(t===null)return{tooltipStyles:{},tooltipArrowStyles:{},place:i};const l=a;return e?(l.push(Lb({element:e,padding:5})),qc(n,t,{placement:i,strategy:s,middleware:l}).then(({x:c,y:u,placement:d,middlewareData:h})=>{var p,f;const m={left:`${c}px`,top:`${u}px`,border:o},{x:v,y:g}=(p=h.arrow)!==null&&p!==void 0?p:{x:0,y:0},b=(f={top:"bottom",right:"left",bottom:"top",left:"right"}[d.split("-")[0]])!==null&&f!==void 0?f:"bottom",y=o&&{borderBottom:o,borderRight:o};let w=0;if(o){const x=`${o}`.match(/(\d+)px/);w=x?.[1]?Number(x[1]):1}return{tooltipStyles:m,tooltipArrowStyles:{left:v!=null?`${v}px`:"",top:g!=null?`${g}px`:"",right:"",bottom:"",...y,[b]:`-${4+w}px`},place:d}})):qc(n,t,{placement:"bottom",strategy:s,middleware:l}).then(({x:c,y:u,placement:d})=>({tooltipStyles:{left:`${c}px`,top:`${u}px`},tooltipArrowStyles:{},place:d}))},Yc=(n,t)=>!("CSS"in window&&"supports"in window.CSS)||window.CSS.supports(n,t),Jc=(n,t,e)=>{let i=null;const r=function(...s){const a=()=>{i=null};!i&&(n.apply(this,s),i=setTimeout(a,t))};return r.cancel=()=>{i&&(clearTimeout(i),i=null)},r},Qc=n=>n!==null&&!Array.isArray(n)&&typeof n=="object",io=(n,t)=>{if(n===t)return!0;if(Array.isArray(n)&&Array.isArray(t))return n.length===t.length&&n.every((r,s)=>io(r,t[s]));if(Array.isArray(n)!==Array.isArray(t))return!1;if(!Qc(n)||!Qc(t))return n===t;const e=Object.keys(n),i=Object.keys(t);return e.length===i.length&&e.every(r=>io(n[r],t[r]))},$b=n=>{if(!(n instanceof HTMLElement||n instanceof SVGElement))return!1;const t=getComputedStyle(n);return["overflow","overflow-x","overflow-y"].some(e=>{const i=t.getPropertyValue(e);return i==="auto"||i==="scroll"})},Zc=n=>{if(!n)return null;let t=n.parentElement;for(;t;){if($b(t))return t;t=t.parentElement}return document.scrollingElement||document.documentElement},zb=typeof window<"u"?A.useLayoutEffect:A.useEffect,Pe=n=>{n.current&&(clearTimeout(n.current),n.current=null)},Hb="DEFAULT_TOOLTIP_ID",Ub={anchorRefs:new Set,activeAnchor:{current:null},attach:()=>{},detach:()=>{},setActiveAnchor:()=>{}},qb=A.createContext({getTooltipData:()=>Ub});function kh(n=Hb){return A.useContext(qb).getTooltipData(n)}var si={tooltip:"core-styles-module_tooltip__3vRRp",fixed:"core-styles-module_fixed__pcSol",arrow:"core-styles-module_arrow__cvMwQ",noArrow:"core-styles-module_noArrow__xock6",clickable:"core-styles-module_clickable__ZuTTB",show:"core-styles-module_show__Nt9eE",closing:"core-styles-module_closing__sGnxF"},da={tooltip:"styles-module_tooltip__mnnfp",arrow:"styles-module_arrow__K0L3T",dark:"styles-module_dark__xNqje",light:"styles-module_light__Z6W-X",success:"styles-module_success__A2AKt",warning:"styles-module_warning__SCK0X",error:"styles-module_error__JvumD",info:"styles-module_info__BWdHW"};const Gb=({forwardRef:n,id:t,className:e,classNameArrow:i,variant:r="dark",anchorId:s,anchorSelect:a,place:o="top",offset:l=10,events:c=["hover"],openOnClick:u=!1,positionStrategy:d="absolute",middlewares:h,wrapper:p,delayShow:f=0,delayHide:m=0,float:v=!1,hidden:g=!1,noArrow:b=!1,clickable:y=!1,closeOnEsc:w=!1,closeOnScroll:x=!1,closeOnResize:E=!1,openEvents:S,closeEvents:D,globalCloseEvents:T,imperativeModeOnly:L,style:k,position:j,afterShow:R,afterHide:P,disableTooltip:U,content:$,contentWrapperRef:O,isOpen:M,defaultIsOpen:V=!1,setIsOpen:at,activeAnchor:Y,setActiveAnchor:Q,border:ut,opacity:_t,arrowColor:Rt,role:pt="tooltip"})=>{var rt;const ft=A.useRef(null),Xt=A.useRef(null),wt=A.useRef(null),Gt=A.useRef(null),Zt=A.useRef(null),[te,Le]=A.useState({tooltipStyles:{},tooltipArrowStyles:{},place:o}),[Lt,Ne]=A.useState(!1),[$t,pe]=A.useState(!1),[lt,le]=A.useState(null),In=A.useRef(!1),kn=A.useRef(null),{anchorRefs:On,setActiveAnchor:N}=kh(t),q=A.useRef(!1),[vt,Et]=A.useState([]),Pt=A.useRef(!1),Se=u||c.includes("click"),Ce=Se||S?.click||S?.dblclick||S?.mousedown,We=S?{...S}:{mouseover:!0,focus:!0,mouseenter:!1,click:!1,dblclick:!1,mousedown:!1};!S&&Se&&Object.assign(We,{mouseenter:!1,focus:!1,mouseover:!1,click:!0});const an=D?{...D}:{mouseout:!0,blur:!0,mouseleave:!1,click:!1,dblclick:!1,mouseup:!1};!D&&Se&&Object.assign(an,{mouseleave:!1,blur:!1,mouseout:!1});const ee=T?{...T}:{escape:w||!1,scroll:x||!1,resize:E||!1,clickOutsideAnchor:Ce||!1};L&&(Object.assign(We,{mouseenter:!1,focus:!1,click:!1,dblclick:!1,mousedown:!1}),Object.assign(an,{mouseleave:!1,blur:!1,click:!1,dblclick:!1,mouseup:!1}),Object.assign(ee,{escape:!1,scroll:!1,resize:!1,clickOutsideAnchor:!1})),zb(()=>(Pt.current=!0,()=>{Pt.current=!1}),[]);const At=F=>{Pt.current&&(F&&pe(!0),setTimeout(()=>{Pt.current&&(at?.(F),M===void 0&&Ne(F))},10))};A.useEffect(()=>{if(M===void 0)return()=>null;M&&pe(!0);const F=setTimeout(()=>{Ne(M)},10);return()=>{clearTimeout(F)}},[M]),A.useEffect(()=>{if(Lt!==In.current)if(Pe(Zt),In.current=Lt,Lt)R?.();else{const F=(X=>{const J=X.match(/^([\d.]+)(ms|s)$/);if(!J)return 0;const[,Nt,Kt]=J;return Number(Nt)*(Kt==="ms"?1:1e3)})(getComputedStyle(document.body).getPropertyValue("--rt-transition-show-delay"));Zt.current=setTimeout(()=>{pe(!1),le(null),P?.()},F+25)}},[Lt]);const gn=F=>{Le(X=>io(X,F)?X:F)},on=(F=f)=>{Pe(wt),$t?At(!0):wt.current=setTimeout(()=>{At(!0)},F)},Ve=(F=m)=>{Pe(Gt),Gt.current=setTimeout(()=>{q.current||At(!1)},F)},ln=F=>{var X;if(!F)return;const J=(X=F.currentTarget)!==null&&X!==void 0?X:F.target;if(!J?.isConnected)return Q(null),void N({current:null});f?on():At(!0),Q(J),N({current:J}),Pe(Gt)},vn=()=>{y?Ve(m||100):m?Ve():At(!1),Pe(wt)},ii=({x:F,y:X})=>{var J;const Nt={getBoundingClientRect:()=>({x:F,y:X,width:0,height:0,top:X,left:F,right:F,bottom:X})};Kc({place:(J=lt?.place)!==null&&J!==void 0?J:o,offset:l,elementReference:Nt,tooltipReference:ft.current,tooltipArrowReference:Xt.current,strategy:d,middlewares:h,border:ut}).then(Kt=>{gn(Kt)})},ri=F=>{if(!F)return;const X=F,J={x:X.clientX,y:X.clientY};ii(J),kn.current=J},Di=F=>{var X;if(!Lt)return;const J=F.target;J.isConnected&&(!((X=ft.current)===null||X===void 0)&&X.contains(J)||[document.querySelector(`[id='${s}']`),...vt].some(Nt=>Nt?.contains(J))||(At(!1),Pe(wt)))},br=Jc(ln,50),zt=Jc(vn,50),_e=F=>{zt.cancel(),br(F)},W=()=>{br.cancel(),zt()},ct=A.useCallback(()=>{var F,X;const J=(F=lt?.position)!==null&&F!==void 0?F:j;J?ii(J):v?kn.current&&ii(kn.current):Y?.isConnected&&Kc({place:(X=lt?.place)!==null&&X!==void 0?X:o,offset:l,elementReference:Y,tooltipReference:ft.current,tooltipArrowReference:Xt.current,strategy:d,middlewares:h,border:ut}).then(Nt=>{Pt.current&&gn(Nt)})},[Lt,Y,$,k,o,lt?.place,l,d,j,lt?.position,v]);A.useEffect(()=>{var F,X;const J=new Set(On);vt.forEach(xt=>{U?.(xt)||J.add({current:xt})});const Nt=document.querySelector(`[id='${s}']`);Nt&&!U?.(Nt)&&J.add({current:Nt});const Kt=()=>{At(!1)},Xe=Zc(Y),Ke=Zc(ft.current);ee.scroll&&(window.addEventListener("scroll",Kt),Xe?.addEventListener("scroll",Kt),Ke?.addEventListener("scroll",Kt));let ne=null;ee.resize?window.addEventListener("resize",Kt):Y&&ft.current&&(ne=Ib(Y,ft.current,ct,{ancestorResize:!0,elementResize:!0,layoutShift:!0}));const Te=xt=>{xt.key==="Escape"&&At(!1)};ee.escape&&window.addEventListener("keydown",Te),ee.clickOutsideAnchor&&window.addEventListener("click",Di);const St=[],Pi=xt=>{Lt&&xt?.target===Y||ln(xt)},Qp=xt=>{Lt&&xt?.target===Y&&vn()},xl=["mouseover","mouseout","mouseenter","mouseleave","focus","blur"],wl=["click","dblclick","mousedown","mouseup"];Object.entries(We).forEach(([xt,cn])=>{cn&&(xl.includes(xt)?St.push({event:xt,listener:_e}):wl.includes(xt)&&St.push({event:xt,listener:Pi}))}),Object.entries(an).forEach(([xt,cn])=>{cn&&(xl.includes(xt)?St.push({event:xt,listener:W}):wl.includes(xt)&&St.push({event:xt,listener:Qp}))}),v&&St.push({event:"pointermove",listener:ri});const Al=()=>{q.current=!0},El=()=>{q.current=!1,vn()};return y&&!Ce&&((F=ft.current)===null||F===void 0||F.addEventListener("mouseenter",Al),(X=ft.current)===null||X===void 0||X.addEventListener("mouseleave",El)),St.forEach(({event:xt,listener:cn})=>{J.forEach(zs=>{var Ii;(Ii=zs.current)===null||Ii===void 0||Ii.addEventListener(xt,cn)})}),()=>{var xt,cn;ee.scroll&&(window.removeEventListener("scroll",Kt),Xe?.removeEventListener("scroll",Kt),Ke?.removeEventListener("scroll",Kt)),ee.resize?window.removeEventListener("resize",Kt):ne?.(),ee.clickOutsideAnchor&&window.removeEventListener("click",Di),ee.escape&&window.removeEventListener("keydown",Te),y&&!Ce&&((xt=ft.current)===null||xt===void 0||xt.removeEventListener("mouseenter",Al),(cn=ft.current)===null||cn===void 0||cn.removeEventListener("mouseleave",El)),St.forEach(({event:zs,listener:Ii})=>{J.forEach(Zp=>{var Hs;(Hs=Zp.current)===null||Hs===void 0||Hs.removeEventListener(zs,Ii)})})}},[Y,ct,$t,On,vt,S,D,T,Se,f,m]),A.useEffect(()=>{var F,X;let J=(X=(F=lt?.anchorSelect)!==null&&F!==void 0?F:a)!==null&&X!==void 0?X:"";!J&&t&&(J=`[data-tooltip-id='${t.replace(/'/g,"\\'")}']`);const Nt=new MutationObserver(Kt=>{const Xe=[],Ke=[];Kt.forEach(ne=>{if(ne.type==="attributes"&&ne.attributeName==="data-tooltip-id"&&(ne.target.getAttribute("data-tooltip-id")===t?Xe.push(ne.target):ne.oldValue===t&&Ke.push(ne.target)),ne.type==="childList"){if(Y){const Te=[...ne.removedNodes].filter(St=>St.nodeType===1);if(J)try{Ke.push(...Te.filter(St=>St.matches(J))),Ke.push(...Te.flatMap(St=>[...St.querySelectorAll(J)]))}catch{}Te.some(St=>{var Pi;return!!(!((Pi=St?.contains)===null||Pi===void 0)&&Pi.call(St,Y))&&(pe(!1),At(!1),Q(null),Pe(wt),Pe(Gt),!0)})}if(J)try{const Te=[...ne.addedNodes].filter(St=>St.nodeType===1);Xe.push(...Te.filter(St=>St.matches(J))),Xe.push(...Te.flatMap(St=>[...St.querySelectorAll(J)]))}catch{}}}),(Xe.length||Ke.length)&&Et(ne=>[...ne.filter(Te=>!Ke.includes(Te)),...Xe])});return Nt.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-tooltip-id"],attributeOldValue:!0}),()=>{Nt.disconnect()}},[t,a,lt?.anchorSelect,Y]),A.useEffect(()=>{ct()},[ct]),A.useEffect(()=>{if(!O?.current)return()=>null;const F=new ResizeObserver(()=>{setTimeout(()=>ct())});return F.observe(O.current),()=>{F.disconnect()}},[$,O?.current]),A.useEffect(()=>{var F;const X=document.querySelector(`[id='${s}']`),J=[...vt,X];Y&&J.includes(Y)||Q((F=vt[0])!==null&&F!==void 0?F:X)},[s,vt,Y]),A.useEffect(()=>(V&&At(!0),()=>{Pe(wt),Pe(Gt)}),[]),A.useEffect(()=>{var F;let X=(F=lt?.anchorSelect)!==null&&F!==void 0?F:a;if(!X&&t&&(X=`[data-tooltip-id='${t.replace(/'/g,"\\'")}']`),X)try{const J=Array.from(document.querySelectorAll(X));Et(J)}catch{Et([])}},[t,a,lt?.anchorSelect]),A.useEffect(()=>{wt.current&&(Pe(wt),on(f))},[f]);const fe=(rt=lt?.content)!==null&&rt!==void 0?rt:$,Mn=Lt&&Object.keys(te.tooltipStyles).length>0;return A.useImperativeHandle(n,()=>({open:F=>{if(F?.anchorSelect)try{document.querySelector(F.anchorSelect)}catch{return void console.warn(`[react-tooltip] "${F.anchorSelect}" is not a valid CSS selector`)}le(F??null),F?.delay?on(F.delay):At(!0)},close:F=>{F?.delay?Ve(F.delay):At(!1)},activeAnchor:Y,place:te.place,isOpen:!!($t&&!g&&fe&&Mn)})),$t&&!g&&fe?et.createElement(p,{id:t,role:pt,className:rn("react-tooltip",si.tooltip,da.tooltip,da[r],e,`react-tooltip__place-${te.place}`,si[Mn?"show":"closing"],Mn?"react-tooltip__show":"react-tooltip__closing",d==="fixed"&&si.fixed,y&&si.clickable),onTransitionEnd:F=>{Pe(Zt),Lt||F.propertyName!=="opacity"||(pe(!1),le(null),P?.())},style:{...k,...te.tooltipStyles,opacity:_t!==void 0&&Mn?_t:void 0},ref:ft},fe,et.createElement(p,{className:rn("react-tooltip-arrow",si.arrow,da.arrow,i,b&&si.noArrow),style:{...te.tooltipArrowStyles,background:Rt?`linear-gradient(to right bottom, transparent 50%, ${Rt} 50%)`:void 0},ref:Xt})):null},Wb=({content:n})=>et.createElement("span",{dangerouslySetInnerHTML:{__html:n}}),Vo=et.forwardRef(({id:n,anchorId:t,anchorSelect:e,content:i,html:r,render:s,className:a,classNameArrow:o,variant:l="dark",place:c="top",offset:u=10,wrapper:d="div",children:h=null,events:p=["hover"],openOnClick:f=!1,positionStrategy:m="absolute",middlewares:v,delayShow:g=0,delayHide:b=0,float:y=!1,hidden:w=!1,noArrow:x=!1,clickable:E=!1,closeOnEsc:S=!1,closeOnScroll:D=!1,closeOnResize:T=!1,openEvents:L,closeEvents:k,globalCloseEvents:j,imperativeModeOnly:R=!1,style:P,position:U,isOpen:$,defaultIsOpen:O=!1,disableStyleInjection:M=!1,border:V,opacity:at,arrowColor:Y,setIsOpen:Q,afterShow:ut,afterHide:_t,disableTooltip:Rt,role:pt="tooltip"},rt)=>{const[ft,Xt]=A.useState(i),[wt,Gt]=A.useState(r),[Zt,te]=A.useState(c),[Le,Lt]=A.useState(l),[Ne,$t]=A.useState(u),[pe,lt]=A.useState(g),[le,In]=A.useState(b),[kn,On]=A.useState(y),[N,q]=A.useState(w),[vt,Et]=A.useState(d),[Pt,Se]=A.useState(p),[Ce,We]=A.useState(m),[an,ee]=A.useState(null),[At,gn]=A.useState(null),on=A.useRef(M),{anchorRefs:Ve,activeAnchor:ln}=kh(n),vn=zt=>zt?.getAttributeNames().reduce((_e,W)=>{var ct;return W.startsWith("data-tooltip-")&&(_e[W.replace(/^data-tooltip-/,"")]=(ct=zt?.getAttribute(W))!==null&&ct!==void 0?ct:null),_e},{}),ii=zt=>{const _e={place:W=>{var ct;te((ct=W)!==null&&ct!==void 0?ct:c)},content:W=>{Xt(W??i)},html:W=>{Gt(W??r)},variant:W=>{var ct;Lt((ct=W)!==null&&ct!==void 0?ct:l)},offset:W=>{$t(W===null?u:Number(W))},wrapper:W=>{var ct;Et((ct=W)!==null&&ct!==void 0?ct:d)},events:W=>{const ct=W?.split(" ");Se(ct??p)},"position-strategy":W=>{var ct;We((ct=W)!==null&&ct!==void 0?ct:m)},"delay-show":W=>{lt(W===null?g:Number(W))},"delay-hide":W=>{In(W===null?b:Number(W))},float:W=>{On(W===null?y:W==="true")},hidden:W=>{q(W===null?w:W==="true")},"class-name":W=>{ee(W)}};Object.values(_e).forEach(W=>W(null)),Object.entries(zt).forEach(([W,ct])=>{var fe;(fe=_e[W])===null||fe===void 0||fe.call(_e,ct)})};A.useEffect(()=>{Xt(i)},[i]),A.useEffect(()=>{Gt(r)},[r]),A.useEffect(()=>{te(c)},[c]),A.useEffect(()=>{Lt(l)},[l]),A.useEffect(()=>{$t(u)},[u]),A.useEffect(()=>{lt(g)},[g]),A.useEffect(()=>{In(b)},[b]),A.useEffect(()=>{On(y)},[y]),A.useEffect(()=>{q(w)},[w]),A.useEffect(()=>{We(m)},[m]),A.useEffect(()=>{on.current!==M&&console.warn("[react-tooltip] Do not change `disableStyleInjection` dynamically.")},[M]),A.useEffect(()=>{typeof window<"u"&&window.dispatchEvent(new CustomEvent("react-tooltip-inject-styles",{detail:{disableCore:M==="core",disableBase:M}}))},[]),A.useEffect(()=>{var zt;const _e=new Set(Ve);let W=e;if(!W&&n&&(W=`[data-tooltip-id='${n.replace(/'/g,"\\'")}']`),W)try{document.querySelectorAll(W).forEach(X=>{_e.add({current:X})})}catch{console.warn(`[react-tooltip] "${W}" is not a valid CSS selector`)}const ct=document.querySelector(`[id='${t}']`);if(ct&&_e.add({current:ct}),!_e.size)return()=>null;const fe=(zt=At??ct)!==null&&zt!==void 0?zt:ln.current,Mn=new MutationObserver(X=>{X.forEach(J=>{var Nt;if(!fe||J.type!=="attributes"||!(!((Nt=J.attributeName)===null||Nt===void 0)&&Nt.startsWith("data-tooltip-")))return;const Kt=vn(fe);ii(Kt)})}),F={attributes:!0,childList:!1,subtree:!1};if(fe){const X=vn(fe);ii(X),Mn.observe(fe,F)}return()=>{Mn.disconnect()}},[Ve,ln,At,t,e]),A.useEffect(()=>{P?.border&&console.warn("[react-tooltip] Do not set `style.border`. Use `border` prop instead."),V&&!Yc("border",`${V}`)&&console.warn(`[react-tooltip] "${V}" is not a valid \`border\`.`),P?.opacity&&console.warn("[react-tooltip] Do not set `style.opacity`. Use `opacity` prop instead."),at&&!Yc("opacity",`${at}`)&&console.warn(`[react-tooltip] "${at}" is not a valid \`opacity\`.`)},[]);let ri=h;const Di=A.useRef(null);if(s){const zt=s({content:At?.getAttribute("data-tooltip-content")||ft||null,activeAnchor:At});ri=zt?et.createElement("div",{ref:Di,className:"react-tooltip-content-wrapper"},zt):null}else ft&&(ri=ft);wt&&(ri=et.createElement(Wb,{content:wt}));const br={forwardRef:rt,id:n,anchorId:t,anchorSelect:e,className:rn(a,an),classNameArrow:o,content:ri,contentWrapperRef:Di,place:Zt,variant:Le,offset:Ne,wrapper:vt,events:Pt,openOnClick:f,positionStrategy:Ce,middlewares:v,delayShow:pe,delayHide:le,float:kn,hidden:N,noArrow:x,clickable:E,closeOnEsc:S,closeOnScroll:D,closeOnResize:T,openEvents:L,closeEvents:k,globalCloseEvents:j,imperativeModeOnly:R,style:P,position:U,isOpen:$,defaultIsOpen:O,border:V,opacity:at,arrowColor:Y,setIsOpen:Q,afterShow:ut,afterHide:_t,disableTooltip:Rt,activeAnchor:At,setActiveAnchor:zt=>gn(zt),role:pt};return et.createElement(Gb,{...br})});typeof window<"u"&&window.addEventListener("react-tooltip-inject-styles",n=>{n.detail.disableCore||Xc({css:":root{--rt-color-white:#fff;--rt-color-dark:#222;--rt-color-success:#8dc572;--rt-color-error:#be6464;--rt-color-warning:#f0ad4e;--rt-color-info:#337ab7;--rt-opacity:0.9;--rt-transition-show-delay:0.15s;--rt-transition-closing-delay:0.15s}.core-styles-module_tooltip__3vRRp{position:absolute;top:0;left:0;pointer-events:none;opacity:0;will-change:opacity}.core-styles-module_fixed__pcSol{position:fixed}.core-styles-module_arrow__cvMwQ{position:absolute;background:inherit}.core-styles-module_noArrow__xock6{display:none}.core-styles-module_clickable__ZuTTB{pointer-events:auto}.core-styles-module_show__Nt9eE{opacity:var(--rt-opacity);transition:opacity var(--rt-transition-show-delay)ease-out}.core-styles-module_closing__sGnxF{opacity:0;transition:opacity var(--rt-transition-closing-delay)ease-in}",type:"core"}),n.detail.disableBase||Xc({css:`
.styles-module_tooltip__mnnfp{padding:8px 16px;border-radius:3px;font-size:90%;width:max-content}.styles-module_arrow__K0L3T{width:8px;height:8px}[class*='react-tooltip__place-top']>.styles-module_arrow__K0L3T{transform:rotate(45deg)}[class*='react-tooltip__place-right']>.styles-module_arrow__K0L3T{transform:rotate(135deg)}[class*='react-tooltip__place-bottom']>.styles-module_arrow__K0L3T{transform:rotate(225deg)}[class*='react-tooltip__place-left']>.styles-module_arrow__K0L3T{transform:rotate(315deg)}.styles-module_dark__xNqje{background:var(--rt-color-dark);color:var(--rt-color-white)}.styles-module_light__Z6W-X{background-color:var(--rt-color-white);color:var(--rt-color-dark)}.styles-module_success__A2AKt{background-color:var(--rt-color-success);color:var(--rt-color-white)}.styles-module_warning__SCK0X{background-color:var(--rt-color-warning);color:var(--rt-color-white)}.styles-module_error__JvumD{background-color:var(--rt-color-error);color:var(--rt-color-white)}.styles-module_info__BWdHW{background-color:var(--rt-color-info);color:var(--rt-color-white)}`,type:"base"})});const Xo=({loader_text:n})=>C.jsx("div",{className:"loader",children:C.jsx("div",{className:"inner-loader",children:n})}),Vb=({index:n,provided:t,extension:e,errors:i,file:r,fileDetailProps:s,loader_text:a})=>{const[o,l]=A.useState(!0),[c,u]=A.useState(!1),[d,h]=A.useState(""),[p,f]=A.useState(""),m=qe();let v=!0;return K0(r,...s,m,i).then(b=>{f(b)}),A.useEffect(()=>((async()=>{try{if(l(!0),e&&e===".jpg"){const y=new FileReader;y.onload=function(w){const x=w.target.result;v&&h(x)},y.readAsDataURL(r)}}catch(y){console.error("Error processing files:",y)}finally{}})(),()=>{v=!1}),[e,r]),C.jsxs("div",{className:"drag-element-img","data-tooltip-id":`image_tooltip_${n}`,"data-tooltip-content":p,"data-tooltip-place":"top",...t.dragHandleProps,style:{height:c?"auto":"126px"},children:[C.jsx(tb,{extension:e,index:n,errors:i,fileName:r.name}),o?C.jsx(Xo,{loader_text:a}):null,C.jsx("bdi",{children:C.jsx(Vo,{id:`image_tooltip_${n}`})}),C.jsx("div",{children:C.jsx("img",{className:"img-fluid-custom object-fit-cover border rounded",src:d,alt:`Selected file ${n}`,draggable:!1,style:{opacity:c?"1":"0"},onError:()=>u(!1),onLoad:()=>{l(!1),u(!0)}})}),C.jsx("p",{className:"text-center",children:r.name})]})},Xb=({imageUrl:n,loader_text:t})=>{const[e,i]=A.useState(!0),r=()=>{i(!1)};return C.jsxs(C.Fragment,{children:[e&&C.jsx(Xo,{loader_text:t}),C.jsx("img",{className:"img-fluid-custom object-fit-contain rounded item-img border",src:n,alt:"Selected file",draggable:!1,onLoad:r})]})},Kb=n=>({"1x1":"single-1x1","2x1":"horizontal-2x1","3x1":"horizontal-3x1","4x1":"horizontal-4x1","1x2":"vertical-1x2","1x3":"vertical-1x3","1x4":"vertical-1x4","2x2":"grid-2x2","3x2":"grid-3x2","4x2":"grid-4x2","3x3":"grid-3x3","4x4":"grid-4x4"})[n]||"",Yb=({imageUrls:n,loader_text:t})=>{const e=qe(),i=jt(s=>s.tool.arrangement),r=Kb(i);return A.useEffect(()=>{},[n,e]),C.jsx("div",{className:`pages ${r}`,style:{overflowX:"hidden"},children:n.map((s,a)=>C.jsx("div",{className:"page",children:C.jsx(Xb,{imageUrl:s.url,loader_text:t})},a.toString()))})},Jb=({file:n,errors:t,extension:e,loader_text:i})=>{const[r,s]=A.useState([]),[a,o]=A.useState(0),l=qe();let c=!0;const u=async()=>{try{if(e&&e===".pdf"){if(c){const h=[];for(let p=1;p<=a;p+=1){let f=await Q0(n,l,t,p);h.push({url:f,id:p})}s(h)}const d=await Z0(n);l(ht({isScanned:d.scanned}))}else e&&e!==".jpg"&&c&&s(n.size?[{url:Y0(e),id:1}]:[{url:"/images/corrupted.png",id:1}])}catch(d){console.error("Error processing files:",d)}};return A.useEffect(()=>((async()=>{let d=await wh(n);l(ht({pageCount:d})),o(d<=16?d:16)})(),u(),()=>{c=!1}),[e,n,a]),C.jsxs(C.Fragment,{children:[r.length==0?C.jsx("div",{className:"initial-loader",children:C.jsx(Xo,{loader_text:i})}):null,C.jsx(Yb,{imageUrls:r,loader_text:i})]})};function ro(n,t){return ro=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},ro(n,t)}function Ko(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,ro(n,t)}function G(){return G=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)({}).hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},G.apply(null,arguments)}function tr(n){"@babel/helpers - typeof";return tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tr(n)}function Qb(n,t){if(tr(n)!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t||"default");if(tr(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function Zb(n){var t=Qb(n,"string");return tr(t)=="symbol"?t:t+""}function ty(n,t,e){return(t=Zb(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function tu(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function eu(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?tu(Object(e),!0).forEach(function(i){ty(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):tu(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function ue(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var nu=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),ha=function(){return Math.random().toString(36).substring(7).split("").join(".")},iu={INIT:"@@redux/INIT"+ha(),REPLACE:"@@redux/REPLACE"+ha(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ha()}};function ey(n){if(typeof n!="object"||n===null)return!1;for(var t=n;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(n)===t}function Oh(n,t,e){var i;if(typeof t=="function"&&typeof e=="function"||typeof e=="function"&&typeof arguments[3]=="function")throw new Error(ue(0));if(typeof t=="function"&&typeof e>"u"&&(e=t,t=void 0),typeof e<"u"){if(typeof e!="function")throw new Error(ue(1));return e(Oh)(n,t)}if(typeof n!="function")throw new Error(ue(2));var r=n,s=t,a=[],o=a,l=!1;function c(){o===a&&(o=a.slice())}function u(){if(l)throw new Error(ue(3));return s}function d(m){if(typeof m!="function")throw new Error(ue(4));if(l)throw new Error(ue(5));var v=!0;return c(),o.push(m),function(){if(v){if(l)throw new Error(ue(6));v=!1,c();var b=o.indexOf(m);o.splice(b,1),a=null}}}function h(m){if(!ey(m))throw new Error(ue(7));if(typeof m.type>"u")throw new Error(ue(8));if(l)throw new Error(ue(9));try{l=!0,s=r(s,m)}finally{l=!1}for(var v=a=o,g=0;g<v.length;g++){var b=v[g];b()}return m}function p(m){if(typeof m!="function")throw new Error(ue(10));r=m,h({type:iu.REPLACE})}function f(){var m,v=d;return m={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(ue(11));function y(){b.next&&b.next(u())}y();var w=v(y);return{unsubscribe:w}}},m[nu]=function(){return this},m}return h({type:iu.INIT}),i={dispatch:h,subscribe:d,getState:u,replaceReducer:p},i[nu]=f,i}function ru(n,t){return function(){return t(n.apply(this,arguments))}}function su(n,t){if(typeof n=="function")return ru(n,t);if(typeof n!="object"||n===null)throw new Error(ue(16));var e={};for(var i in n){var r=n[i];typeof r=="function"&&(e[i]=ru(r,t))}return e}function Mh(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return t.length===0?function(i){return i}:t.length===1?t[0]:t.reduce(function(i,r){return function(){return i(r.apply(void 0,arguments))}})}function ny(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return function(i){return function(){var r=i.apply(void 0,arguments),s=function(){throw new Error(ue(15))},a={getState:r.getState,dispatch:function(){return s.apply(void 0,arguments)}},o=t.map(function(l){return l(a)});return s=Mh.apply(void 0,o)(r.dispatch),eu(eu({},r),{},{dispatch:s})}}}var Lh=et.createContext(null);function iy(n){n()}var Nh=iy,ry=function(t){return Nh=t},sy=function(){return Nh};function ay(){var n=sy(),t=null,e=null;return{clear:function(){t=null,e=null},notify:function(){n(function(){for(var r=t;r;)r.callback(),r=r.next})},get:function(){for(var r=[],s=t;s;)r.push(s),s=s.next;return r},subscribe:function(r){var s=!0,a=e={callback:r,next:null,prev:e};return a.prev?a.prev.next=a:t=a,function(){!s||t===null||(s=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var au={notify:function(){},get:function(){return[]}};function Fh(n,t){var e,i=au;function r(d){return l(),i.subscribe(d)}function s(){i.notify()}function a(){u.onStateChange&&u.onStateChange()}function o(){return!!e}function l(){e||(e=t?t.addNestedSub(a):n.subscribe(a),i=ay())}function c(){e&&(e(),e=void 0,i.clear(),i=au)}var u={addNestedSub:r,notifyNestedSubs:s,handleChangeWrapper:a,isSubscribed:o,trySubscribe:l,tryUnsubscribe:c,getListeners:function(){return i}};return u}var Bh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?A.useLayoutEffect:A.useEffect;function oy(n){var t=n.store,e=n.context,i=n.children,r=A.useMemo(function(){var o=Fh(t);return{store:t,subscription:o}},[t]),s=A.useMemo(function(){return t.getState()},[t]);Bh(function(){var o=r.subscription;return o.onStateChange=o.notifyNestedSubs,o.trySubscribe(),s!==t.getState()&&o.notifyNestedSubs(),function(){o.tryUnsubscribe(),o.onStateChange=null}},[r,s]);var a=e||Lh;return et.createElement(a.Provider,{value:r},i)}function yi(n,t){if(n==null)return{};var e={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(t.includes(i))continue;e[i]=n[i]}return e}var pa={exports:{}},mt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ou;function ly(){if(ou)return mt;ou=1;var n=typeof Symbol=="function"&&Symbol.for,t=n?Symbol.for("react.element"):60103,e=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,r=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,a=n?Symbol.for("react.provider"):60109,o=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,c=n?Symbol.for("react.concurrent_mode"):60111,u=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,f=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,g=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function y(x){if(typeof x=="object"&&x!==null){var E=x.$$typeof;switch(E){case t:switch(x=x.type,x){case l:case c:case i:case s:case r:case d:return x;default:switch(x=x&&x.$$typeof,x){case o:case u:case f:case p:case a:return x;default:return E}}case e:return E}}}function w(x){return y(x)===c}return mt.AsyncMode=l,mt.ConcurrentMode=c,mt.ContextConsumer=o,mt.ContextProvider=a,mt.Element=t,mt.ForwardRef=u,mt.Fragment=i,mt.Lazy=f,mt.Memo=p,mt.Portal=e,mt.Profiler=s,mt.StrictMode=r,mt.Suspense=d,mt.isAsyncMode=function(x){return w(x)||y(x)===l},mt.isConcurrentMode=w,mt.isContextConsumer=function(x){return y(x)===o},mt.isContextProvider=function(x){return y(x)===a},mt.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},mt.isForwardRef=function(x){return y(x)===u},mt.isFragment=function(x){return y(x)===i},mt.isLazy=function(x){return y(x)===f},mt.isMemo=function(x){return y(x)===p},mt.isPortal=function(x){return y(x)===e},mt.isProfiler=function(x){return y(x)===s},mt.isStrictMode=function(x){return y(x)===r},mt.isSuspense=function(x){return y(x)===d},mt.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===i||x===c||x===s||x===r||x===d||x===h||typeof x=="object"&&x!==null&&(x.$$typeof===f||x.$$typeof===p||x.$$typeof===a||x.$$typeof===o||x.$$typeof===u||x.$$typeof===v||x.$$typeof===g||x.$$typeof===b||x.$$typeof===m)},mt.typeOf=y,mt}var lu;function cy(){return lu||(lu=1,pa.exports=ly()),pa.exports}var fa,cu;function uy(){if(cu)return fa;cu=1;var n=cy(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[n.ForwardRef]=i,s[n.Memo]=r;function a(f){return n.isMemo(f)?r:s[f.$$typeof]||t}var o=Object.defineProperty,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,h=Object.prototype;function p(f,m,v){if(typeof m!="string"){if(h){var g=d(m);g&&g!==h&&p(f,g,v)}var b=l(m);c&&(b=b.concat(c(m)));for(var y=a(f),w=a(m),x=0;x<b.length;++x){var E=b[x];if(!e[E]&&!(v&&v[E])&&!(w&&w[E])&&!(y&&y[E])){var S=u(m,E);try{o(f,E,S)}catch{}}}}return f}return fa=p,fa}var dy=uy();const uu=ar(dy);var ma={exports:{}},bt={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var du;function hy(){if(du)return bt;du=1;var n=60103,t=60106,e=60107,i=60108,r=60114,s=60109,a=60110,o=60112,l=60113,c=60120,u=60115,d=60116,h=60121,p=60122,f=60117,m=60129,v=60131;if(typeof Symbol=="function"&&Symbol.for){var g=Symbol.for;n=g("react.element"),t=g("react.portal"),e=g("react.fragment"),i=g("react.strict_mode"),r=g("react.profiler"),s=g("react.provider"),a=g("react.context"),o=g("react.forward_ref"),l=g("react.suspense"),c=g("react.suspense_list"),u=g("react.memo"),d=g("react.lazy"),h=g("react.block"),p=g("react.server.block"),f=g("react.fundamental"),m=g("react.debug_trace_mode"),v=g("react.legacy_hidden")}function b(R){if(typeof R=="object"&&R!==null){var P=R.$$typeof;switch(P){case n:switch(R=R.type,R){case e:case r:case i:case l:case c:return R;default:switch(R=R&&R.$$typeof,R){case a:case o:case d:case u:case s:return R;default:return P}}case t:return P}}}var y=s,w=n,x=o,E=e,S=d,D=u,T=t,L=r,k=i,j=l;return bt.ContextConsumer=a,bt.ContextProvider=y,bt.Element=w,bt.ForwardRef=x,bt.Fragment=E,bt.Lazy=S,bt.Memo=D,bt.Portal=T,bt.Profiler=L,bt.StrictMode=k,bt.Suspense=j,bt.isAsyncMode=function(){return!1},bt.isConcurrentMode=function(){return!1},bt.isContextConsumer=function(R){return b(R)===a},bt.isContextProvider=function(R){return b(R)===s},bt.isElement=function(R){return typeof R=="object"&&R!==null&&R.$$typeof===n},bt.isForwardRef=function(R){return b(R)===o},bt.isFragment=function(R){return b(R)===e},bt.isLazy=function(R){return b(R)===d},bt.isMemo=function(R){return b(R)===u},bt.isPortal=function(R){return b(R)===t},bt.isProfiler=function(R){return b(R)===r},bt.isStrictMode=function(R){return b(R)===i},bt.isSuspense=function(R){return b(R)===l},bt.isValidElementType=function(R){return typeof R=="string"||typeof R=="function"||R===e||R===r||R===m||R===i||R===l||R===c||R===v||typeof R=="object"&&R!==null&&(R.$$typeof===d||R.$$typeof===u||R.$$typeof===s||R.$$typeof===a||R.$$typeof===o||R.$$typeof===f||R.$$typeof===h||R[0]===p)},bt.typeOf=b,bt}var hu;function py(){return hu||(hu=1,ma.exports=hy()),ma.exports}var fy=py(),my=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],gy=["reactReduxForwardedRef"],vy=[],by=[null,null];function yy(n,t){var e=n[1];return[t.payload,e+1]}function pu(n,t,e){Bh(function(){return n.apply(void 0,t)},e)}function xy(n,t,e,i,r,s,a){n.current=i,t.current=r,e.current=!1,s.current&&(s.current=null,a())}function wy(n,t,e,i,r,s,a,o,l,c){if(n){var u=!1,d=null,h=function(){if(!u){var m=t.getState(),v,g;try{v=i(m,r.current)}catch(b){g=b,d=b}g||(d=null),v===s.current?a.current||l():(s.current=v,o.current=v,a.current=!0,c({type:"STORE_UPDATED",payload:{error:g}}))}};e.onStateChange=h,e.trySubscribe(),h();var p=function(){if(u=!0,e.tryUnsubscribe(),e.onStateChange=null,d)throw d};return p}}var Ay=function(){return[null,0]};function Ey(n,t){t===void 0&&(t={});var e=t,i=e.getDisplayName,r=i===void 0?function(y){return"ConnectAdvanced("+y+")"}:i,s=e.methodName,a=s===void 0?"connectAdvanced":s,o=e.renderCountProp,l=o===void 0?void 0:o,c=e.shouldHandleStateChanges,u=c===void 0?!0:c,d=e.storeKey,h=d===void 0?"store":d;e.withRef;var p=e.forwardRef,f=p===void 0?!1:p,m=e.context,v=m===void 0?Lh:m,g=yi(e,my),b=v;return function(w){var x=w.displayName||w.name||"Component",E=r(x),S=G({},g,{getDisplayName:r,methodName:a,renderCountProp:l,shouldHandleStateChanges:u,storeKey:h,displayName:E,wrappedComponentName:x,WrappedComponent:w}),D=g.pure;function T(P){return n(P.dispatch,S)}var L=D?A.useMemo:function(P){return P()};function k(P){var U=A.useMemo(function(){var lt=P.reactReduxForwardedRef,le=yi(P,gy);return[P.context,lt,le]},[P]),$=U[0],O=U[1],M=U[2],V=A.useMemo(function(){return $&&$.Consumer&&fy.isContextConsumer(et.createElement($.Consumer,null))?$:b},[$,b]),at=A.useContext(V),Y=!!P.store&&!!P.store.getState&&!!P.store.dispatch;at&&at.store;var Q=Y?P.store:at.store,ut=A.useMemo(function(){return T(Q)},[Q]),_t=A.useMemo(function(){if(!u)return by;var lt=Fh(Q,Y?null:at.subscription),le=lt.notifyNestedSubs.bind(lt);return[lt,le]},[Q,Y,at]),Rt=_t[0],pt=_t[1],rt=A.useMemo(function(){return Y?at:G({},at,{subscription:Rt})},[Y,at,Rt]),ft=A.useReducer(yy,vy,Ay),Xt=ft[0],wt=Xt[0],Gt=ft[1];if(wt&&wt.error)throw wt.error;var Zt=A.useRef(),te=A.useRef(M),Le=A.useRef(),Lt=A.useRef(!1),Ne=L(function(){return Le.current&&M===te.current?Le.current:ut(Q.getState(),M)},[Q,wt,M]);pu(xy,[te,Zt,Lt,M,Ne,Le,pt]),pu(wy,[u,Q,Rt,ut,te,Zt,Lt,Le,pt,Gt],[Q,Rt,ut]);var $t=A.useMemo(function(){return et.createElement(w,G({},Ne,{ref:O}))},[O,w,Ne]),pe=A.useMemo(function(){return u?et.createElement(V.Provider,{value:rt},$t):$t},[V,$t,rt]);return pe}var j=D?et.memo(k):k;if(j.WrappedComponent=w,j.displayName=k.displayName=E,f){var R=et.forwardRef(function(U,$){return et.createElement(j,G({},U,{reactReduxForwardedRef:$}))});return R.displayName=E,R.WrappedComponent=w,uu(R,w)}return uu(j,w)}}function fu(n,t){return n===t?n!==0||t!==0||1/n===1/t:n!==n&&t!==t}function ga(n,t){if(fu(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),i=Object.keys(t);if(e.length!==i.length)return!1;for(var r=0;r<e.length;r++)if(!Object.prototype.hasOwnProperty.call(t,e[r])||!fu(n[e[r]],t[e[r]]))return!1;return!0}function Sy(n,t){var e={},i=function(a){var o=n[a];typeof o=="function"&&(e[a]=function(){return t(o.apply(void 0,arguments))})};for(var r in n)i(r);return e}function Yo(n){return function(e,i){var r=n(e,i);function s(){return r}return s.dependsOnOwnProps=!1,s}}function mu(n){return n.dependsOnOwnProps!==null&&n.dependsOnOwnProps!==void 0?!!n.dependsOnOwnProps:n.length!==1}function jh(n,t){return function(i,r){r.displayName;var s=function(o,l){return s.dependsOnOwnProps?s.mapToProps(o,l):s.mapToProps(o)};return s.dependsOnOwnProps=!0,s.mapToProps=function(o,l){s.mapToProps=n,s.dependsOnOwnProps=mu(n);var c=s(o,l);return typeof c=="function"&&(s.mapToProps=c,s.dependsOnOwnProps=mu(c),c=s(o,l)),c},s}}function Cy(n){return typeof n=="function"?jh(n):void 0}function _y(n){return n?void 0:Yo(function(t){return{dispatch:t}})}function Ty(n){return n&&typeof n=="object"?Yo(function(t){return Sy(n,t)}):void 0}const Ry=[Cy,_y,Ty];function Dy(n){return typeof n=="function"?jh(n):void 0}function Py(n){return n?void 0:Yo(function(){return{}})}const Iy=[Dy,Py];function ky(n,t,e){return G({},e,n,t)}function Oy(n){return function(e,i){i.displayName;var r=i.pure,s=i.areMergedPropsEqual,a=!1,o;return function(c,u,d){var h=n(c,u,d);return a?(!r||!s(h,o))&&(o=h):(a=!0,o=h),o}}}function My(n){return typeof n=="function"?Oy(n):void 0}function Ly(n){return n?void 0:function(){return ky}}const Ny=[My,Ly];var Fy=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function By(n,t,e,i){return function(s,a){return e(n(s,a),t(i,a),a)}}function jy(n,t,e,i,r){var s=r.areStatesEqual,a=r.areOwnPropsEqual,o=r.areStatePropsEqual,l=!1,c,u,d,h,p;function f(y,w){return c=y,u=w,d=n(c,u),h=t(i,u),p=e(d,h,u),l=!0,p}function m(){return d=n(c,u),t.dependsOnOwnProps&&(h=t(i,u)),p=e(d,h,u),p}function v(){return n.dependsOnOwnProps&&(d=n(c,u)),t.dependsOnOwnProps&&(h=t(i,u)),p=e(d,h,u),p}function g(){var y=n(c,u),w=!o(y,d);return d=y,w&&(p=e(d,h,u)),p}function b(y,w){var x=!a(w,u),E=!s(y,c,w,u);return c=y,u=w,x&&E?m():x?v():E?g():p}return function(w,x){return l?b(w,x):f(w,x)}}function $y(n,t){var e=t.initMapStateToProps,i=t.initMapDispatchToProps,r=t.initMergeProps,s=yi(t,Fy),a=e(n,s),o=i(n,s),l=r(n,s),c=s.pure?jy:By;return c(a,o,l,n,s)}var zy=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function va(n,t,e){for(var i=t.length-1;i>=0;i--){var r=t[i](n);if(r)return r}return function(s,a){throw new Error("Invalid value of type "+typeof n+" for "+e+" argument when connecting component "+a.wrappedComponentName+".")}}function Hy(n,t){return n===t}function Uy(n){var t=n===void 0?{}:n,e=t.connectHOC,i=e===void 0?Ey:e,r=t.mapStateToPropsFactories,s=r===void 0?Iy:r,a=t.mapDispatchToPropsFactories,o=a===void 0?Ry:a,l=t.mergePropsFactories,c=l===void 0?Ny:l,u=t.selectorFactory,d=u===void 0?$y:u;return function(p,f,m,v){v===void 0&&(v={});var g=v,b=g.pure,y=b===void 0?!0:b,w=g.areStatesEqual,x=w===void 0?Hy:w,E=g.areOwnPropsEqual,S=E===void 0?ga:E,D=g.areStatePropsEqual,T=D===void 0?ga:D,L=g.areMergedPropsEqual,k=L===void 0?ga:L,j=yi(g,zy),R=va(p,s,"mapStateToProps"),P=va(f,o,"mapDispatchToProps"),U=va(m,c,"mergeProps");return i(d,G({methodName:"connect",getDisplayName:function(O){return"Connect("+O+")"},shouldHandleStateChanges:!!p,initMapStateToProps:R,initMapDispatchToProps:P,initMergeProps:U,pure:y,areStatesEqual:x,areOwnPropsEqual:S,areStatePropsEqual:T,areMergedPropsEqual:k},j))}}const $h=Uy();var zh=rf();const ui=ar(zh);ry(zh.unstable_batchedUpdates);function qy(n,t){if(n.length!==t.length)return!1;for(var e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function Hh(n,t){var e=A.useState(function(){return{inputs:t,result:n()}})[0],i=A.useRef(!0),r=A.useRef(e),s=i.current||!!(t&&r.current.inputs&&qy(t,r.current.inputs)),a=s?r.current:{inputs:t,result:n()};return A.useEffect(function(){i.current=!1,r.current=a},[a]),a.result}function Gy(n,t){return Hh(function(){return n},t)}var dt=Hh,H=Gy,Wy="Invariant failed";function Vy(n,t){throw new Error(Wy)}var $e=function(t){var e=t.top,i=t.right,r=t.bottom,s=t.left,a=i-s,o=r-e,l={top:e,right:i,bottom:r,left:s,width:a,height:o,x:s,y:e,center:{x:(i+s)/2,y:(r+e)/2}};return l},Jo=function(t,e){return{top:t.top-e.top,left:t.left-e.left,bottom:t.bottom+e.bottom,right:t.right+e.right}},gu=function(t,e){return{top:t.top+e.top,left:t.left+e.left,bottom:t.bottom-e.bottom,right:t.right-e.right}},Xy=function(t,e){return{top:t.top+e.y,left:t.left+e.x,bottom:t.bottom+e.y,right:t.right+e.x}},ba={top:0,right:0,bottom:0,left:0},Qo=function(t){var e=t.borderBox,i=t.margin,r=i===void 0?ba:i,s=t.border,a=s===void 0?ba:s,o=t.padding,l=o===void 0?ba:o,c=$e(Jo(e,r)),u=$e(gu(e,a)),d=$e(gu(u,l));return{marginBox:c,borderBox:$e(e),paddingBox:u,contentBox:d,margin:r,border:a,padding:l}},Ie=function(t){var e=t.slice(0,-2),i=t.slice(-2);if(i!=="px")return 0;var r=Number(e);return isNaN(r)&&Vy(),r},Ky=function(){return{x:window.pageXOffset,y:window.pageYOffset}},es=function(t,e){var i=t.borderBox,r=t.border,s=t.margin,a=t.padding,o=Xy(i,e);return Qo({borderBox:o,border:r,margin:s,padding:a})},ns=function(t,e){return e===void 0&&(e=Ky()),es(t,e)},Uh=function(t,e){var i={top:Ie(e.marginTop),right:Ie(e.marginRight),bottom:Ie(e.marginBottom),left:Ie(e.marginLeft)},r={top:Ie(e.paddingTop),right:Ie(e.paddingRight),bottom:Ie(e.paddingBottom),left:Ie(e.paddingLeft)},s={top:Ie(e.borderTopWidth),right:Ie(e.borderRightWidth),bottom:Ie(e.borderBottomWidth),left:Ie(e.borderLeftWidth)};return Qo({borderBox:t,margin:i,padding:r,border:s})},qh=function(t){var e=t.getBoundingClientRect(),i=window.getComputedStyle(t);return Uh(e,i)},vu=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Yy(n,t){return!!(n===t||vu(n)&&vu(t))}function Jy(n,t){if(n.length!==t.length)return!1;for(var e=0;e<n.length;e++)if(!Yy(n[e],t[e]))return!1;return!0}function Ut(n,t){t===void 0&&(t=Jy);var e,i=[],r,s=!1;function a(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return s&&e===this&&t(o,i)||(r=n.apply(this,o),s=!0,e=this,i=o),r}return a}var er=function(t){var e=[],i=null,r=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];e=o,!i&&(i=requestAnimationFrame(function(){i=null,t.apply(void 0,e)}))};return r.cancel=function(){i&&(cancelAnimationFrame(i),i=null)},r};function Gh(n,t){}Gh.bind(null,"warn");Gh.bind(null,"error");function wn(){}function Qy(n,t){return G({},n,{},t)}function Oe(n,t,e){var i=t.map(function(r){var s=Qy(e,r.options);return n.addEventListener(r.eventName,r.fn,s),function(){n.removeEventListener(r.eventName,r.fn,s)}});return function(){i.forEach(function(s){s()})}}var Zy="Invariant failed";function is(n){this.message=n}is.prototype.toString=function(){return this.message};function I(n,t){throw new is(Zy)}var t2=function(n){Ko(t,n);function t(){for(var i,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return i=n.call.apply(n,[this].concat(s))||this,i.callbacks=null,i.unbind=wn,i.onWindowError=function(o){var l=i.getCallbacks();l.isDragging()&&l.tryAbort();var c=o.error;c instanceof is&&o.preventDefault()},i.getCallbacks=function(){if(!i.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return i.callbacks},i.setCallbacks=function(o){i.callbacks=o},i}var e=t.prototype;return e.componentDidMount=function(){this.unbind=Oe(window,[{eventName:"error",fn:this.onWindowError}])},e.componentDidCatch=function(r){if(r instanceof is){this.setState({});return}throw r},e.componentWillUnmount=function(){this.unbind()},e.render=function(){return this.props.children(this.setCallbacks)},t}(et.Component),e2=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,rs=function(t){return t+1},n2=function(t){return`
  You have lifted an item in position `+rs(t.source.index)+`
`},Wh=function(t,e){var i=t.droppableId===e.droppableId,r=rs(t.index),s=rs(e.index);return i?`
      You have moved the item from position `+r+`
      to position `+s+`
    `:`
    You have moved the item from position `+r+`
    in list `+t.droppableId+`
    to list `+e.droppableId+`
    in position `+s+`
  `},Vh=function(t,e,i){var r=e.droppableId===i.droppableId;return r?`
      The item `+t+`
      has been combined with `+i.draggableId:`
      The item `+t+`
      in list `+e.droppableId+`
      has been combined with `+i.draggableId+`
      in list `+i.droppableId+`
    `},i2=function(t){var e=t.destination;if(e)return Wh(t.source,e);var i=t.combine;return i?Vh(t.draggableId,t.source,i):"You are over an area that cannot be dropped on"},bu=function(t){return`
  The item has returned to its starting position
  of `+rs(t.index)+`
`},r2=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+bu(t.source)+`
    `;var e=t.destination,i=t.combine;return e?`
      You have dropped the item.
      `+Wh(t.source,e)+`
    `:i?`
      You have dropped the item.
      `+Vh(t.draggableId,t.source,i)+`
    `:`
    The item has been dropped while not over a drop area.
    `+bu(t.source)+`
  `},Br={dragHandleUsageInstructions:e2,onDragStart:n2,onDragUpdate:i2,onDragEnd:r2},qt={x:0,y:0},Vt=function(t,e){return{x:t.x+e.x,y:t.y+e.y}},ve=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},An=function(t,e){return t.x===e.x&&t.y===e.y},_i=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},Zn=function(t,e,i){var r;return i===void 0&&(i=0),r={},r[t]=e,r[t==="x"?"y":"x"]=i,r},nr=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},yu=function(t,e){return Math.min.apply(Math,e.map(function(i){return nr(t,i)}))},Xh=function(t){return function(e){return{x:t(e.x),y:t(e.y)}}},s2=function(n,t){var e=$e({top:Math.max(t.top,n.top),right:Math.min(t.right,n.right),bottom:Math.min(t.bottom,n.bottom),left:Math.max(t.left,n.left)});return e.width<=0||e.height<=0?null:e},gr=function(t,e){return{top:t.top+e.y,left:t.left+e.x,bottom:t.bottom+e.y,right:t.right+e.x}},xu=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},a2={top:0,right:0,bottom:0,left:0},o2=function(t,e){return e?gr(t,e.scroll.diff.displacement):t},l2=function(t,e,i){if(i&&i.increasedBy){var r;return G({},t,(r={},r[e.end]=t[e.end]+i.increasedBy[e.line],r))}return t},c2=function(t,e){return e&&e.shouldClipSubject?s2(e.pageMarginBox,t):$e(t)},xi=function(n){var t=n.page,e=n.withPlaceholder,i=n.axis,r=n.frame,s=o2(t.marginBox,r),a=l2(s,i,e),o=c2(a,r);return{page:t,withPlaceholder:e,active:o}},Zo=function(n,t){n.frame||I();var e=n.frame,i=ve(t,e.scroll.initial),r=_i(i),s=G({},e,{scroll:{initial:e.scroll.initial,current:t,diff:{value:i,displacement:r},max:e.scroll.max}}),a=xi({page:n.subject.page,withPlaceholder:n.subject.withPlaceholder,axis:n.axis,frame:s}),o=G({},n,{frame:s,subject:a});return o};function ss(n){return Object.values?Object.values(n):Object.keys(n).map(function(t){return n[t]})}function tl(n,t){if(n.findIndex)return n.findIndex(t);for(var e=0;e<n.length;e++)if(t(n[e]))return e;return-1}function Pn(n,t){if(n.find)return n.find(t);var e=tl(n,t);if(e!==-1)return n[e]}function Kh(n){return Array.prototype.slice.call(n)}var Yh=Ut(function(n){return n.reduce(function(t,e){return t[e.descriptor.id]=e,t},{})}),Jh=Ut(function(n){return n.reduce(function(t,e){return t[e.descriptor.id]=e,t},{})}),Os=Ut(function(n){return ss(n)}),u2=Ut(function(n){return ss(n)}),Ti=Ut(function(n,t){var e=u2(t).filter(function(i){return n===i.descriptor.droppableId}).sort(function(i,r){return i.descriptor.index-r.descriptor.index});return e});function el(n){return n.at&&n.at.type==="REORDER"?n.at.destination:null}function Ms(n){return n.at&&n.at.type==="COMBINE"?n.at.combine:null}var Ls=Ut(function(n,t){return t.filter(function(e){return e.descriptor.id!==n.descriptor.id})}),d2=function(n){var t=n.isMovingForward,e=n.draggable,i=n.destination,r=n.insideDestination,s=n.previousImpact;if(!i.isCombineEnabled)return null;var a=el(s);if(!a)return null;function o(m){var v={type:"COMBINE",combine:{draggableId:m,droppableId:i.descriptor.id}};return G({},s,{at:v})}var l=s.displaced.all,c=l.length?l[0]:null;if(t)return c?o(c):null;var u=Ls(e,r);if(!c){if(!u.length)return null;var d=u[u.length-1];return o(d.descriptor.id)}var h=tl(u,function(m){return m.descriptor.id===c});h===-1&&I();var p=h-1;if(p<0)return null;var f=u[p];return o(f.descriptor.id)},Ri=function(n,t){return n.descriptor.droppableId===t.descriptor.id},Qh={point:qt,value:0},ir={invisible:{},visible:{},all:[]},h2={displaced:ir,displacedBy:Qh,at:null},Me=function(n,t){return function(e){return n<=e&&e<=t}},Zh=function(n){var t=Me(n.top,n.bottom),e=Me(n.left,n.right);return function(i){var r=t(i.top)&&t(i.bottom)&&e(i.left)&&e(i.right);if(r)return!0;var s=t(i.top)||t(i.bottom),a=e(i.left)||e(i.right),o=s&&a;if(o)return!0;var l=i.top<n.top&&i.bottom>n.bottom,c=i.left<n.left&&i.right>n.right,u=l&&c;if(u)return!0;var d=l&&a||c&&s;return d}},p2=function(n){var t=Me(n.top,n.bottom),e=Me(n.left,n.right);return function(i){var r=t(i.top)&&t(i.bottom)&&e(i.left)&&e(i.right);return r}},nl={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},tp={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},f2=function(n){return function(t){var e=Me(t.top,t.bottom),i=Me(t.left,t.right);return function(r){return n===nl?e(r.top)&&e(r.bottom):i(r.left)&&i(r.right)}}},m2=function(t,e){var i=e.frame?e.frame.scroll.diff.displacement:qt;return gr(t,i)},g2=function(t,e,i){return e.subject.active?i(e.subject.active)(t):!1},v2=function(t,e,i){return i(e)(t)},il=function(t){var e=t.target,i=t.destination,r=t.viewport,s=t.withDroppableDisplacement,a=t.isVisibleThroughFrameFn,o=s?m2(e,i):e;return g2(o,i,a)&&v2(o,r,a)},b2=function(t){return il(G({},t,{isVisibleThroughFrameFn:Zh}))},ep=function(t){return il(G({},t,{isVisibleThroughFrameFn:p2}))},y2=function(t){return il(G({},t,{isVisibleThroughFrameFn:f2(t.destination.axis)}))},x2=function(t,e,i){if(typeof i=="boolean")return i;if(!e)return!0;var r=e.invisible,s=e.visible;if(r[t])return!1;var a=s[t];return a?a.shouldAnimate:!0};function w2(n,t){var e=n.page.marginBox,i={top:t.point.y,right:0,bottom:0,left:t.point.x};return $e(Jo(e,i))}function rr(n){var t=n.afterDragging,e=n.destination,i=n.displacedBy,r=n.viewport,s=n.forceShouldAnimate,a=n.last;return t.reduce(function(l,c){var u=w2(c,i),d=c.descriptor.id;l.all.push(d);var h=b2({target:u,destination:e,viewport:r,withDroppableDisplacement:!0});if(!h)return l.invisible[c.descriptor.id]=!0,l;var p=x2(d,a,s),f={draggableId:d,shouldAnimate:p};return l.visible[d]=f,l},{all:[],visible:{},invisible:{}})}function A2(n,t){if(!n.length)return 0;var e=n[n.length-1].descriptor.index;return t.inHomeList?e:e+1}function wu(n){var t=n.insideDestination,e=n.inHomeList,i=n.displacedBy,r=n.destination,s=A2(t,{inHomeList:e});return{displaced:ir,displacedBy:i,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function as(n){var t=n.draggable,e=n.insideDestination,i=n.destination,r=n.viewport,s=n.displacedBy,a=n.last,o=n.index,l=n.forceShouldAnimate,c=Ri(t,i);if(o==null)return wu({insideDestination:e,inHomeList:c,displacedBy:s,destination:i});var u=Pn(e,function(m){return m.descriptor.index===o});if(!u)return wu({insideDestination:e,inHomeList:c,displacedBy:s,destination:i});var d=Ls(t,e),h=e.indexOf(u),p=d.slice(h),f=rr({afterDragging:p,destination:i,displacedBy:s,last:a,viewport:r.frame,forceShouldAnimate:l});return{displaced:f,displacedBy:s,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:o}}}}function Tn(n,t){return!!t.effected[n]}var E2=function(n){var t=n.isMovingForward,e=n.destination,i=n.draggables,r=n.combine,s=n.afterCritical;if(!e.isCombineEnabled)return null;var a=r.draggableId,o=i[a],l=o.descriptor.index,c=Tn(a,s);return c?t?l:l-1:t?l+1:l},S2=function(n){var t=n.isMovingForward,e=n.isInHomeList,i=n.insideDestination,r=n.location;if(!i.length)return null;var s=r.index,a=t?s+1:s-1,o=i[0].descriptor.index,l=i[i.length-1].descriptor.index,c=e?l:l+1;return a<o||a>c?null:a},C2=function(n){var t=n.isMovingForward,e=n.isInHomeList,i=n.draggable,r=n.draggables,s=n.destination,a=n.insideDestination,o=n.previousImpact,l=n.viewport,c=n.afterCritical,u=o.at;if(u||I(),u.type==="REORDER"){var d=S2({isMovingForward:t,isInHomeList:e,location:u.destination,insideDestination:a});return d==null?null:as({draggable:i,insideDestination:a,destination:s,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:d})}var h=E2({isMovingForward:t,destination:s,displaced:o.displaced,draggables:r,combine:u.combine,afterCritical:c});return h==null?null:as({draggable:i,insideDestination:a,destination:s,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:h})},_2=function(n){var t=n.displaced,e=n.afterCritical,i=n.combineWith,r=n.displacedBy,s=!!(t.visible[i]||t.invisible[i]);return Tn(i,e)?s?qt:_i(r.point):s?r.point:qt},T2=function(n){var t=n.afterCritical,e=n.impact,i=n.draggables,r=Ms(e);r||I();var s=r.draggableId,a=i[s].page.borderBox.center,o=_2({displaced:e.displaced,afterCritical:t,combineWith:s,displacedBy:e.displacedBy});return Vt(a,o)},np=function(t,e){return e.margin[t.start]+e.borderBox[t.size]/2},R2=function(t,e){return e.margin[t.end]+e.borderBox[t.size]/2},rl=function(t,e,i){return e[t.crossAxisStart]+i.margin[t.crossAxisStart]+i.borderBox[t.crossAxisSize]/2},Au=function(t){var e=t.axis,i=t.moveRelativeTo,r=t.isMoving;return Zn(e.line,i.marginBox[e.end]+np(e,r),rl(e,i.marginBox,r))},Eu=function(t){var e=t.axis,i=t.moveRelativeTo,r=t.isMoving;return Zn(e.line,i.marginBox[e.start]-R2(e,r),rl(e,i.marginBox,r))},D2=function(t){var e=t.axis,i=t.moveInto,r=t.isMoving;return Zn(e.line,i.contentBox[e.start]+np(e,r),rl(e,i.contentBox,r))},P2=function(n){var t=n.impact,e=n.draggable,i=n.draggables,r=n.droppable,s=n.afterCritical,a=Ti(r.descriptor.id,i),o=e.page,l=r.axis;if(!a.length)return D2({axis:l,moveInto:r.page,isMoving:o});var c=t.displaced,u=t.displacedBy,d=c.all[0];if(d){var h=i[d];if(Tn(d,s))return Eu({axis:l,moveRelativeTo:h.page,isMoving:o});var p=es(h.page,u.point);return Eu({axis:l,moveRelativeTo:p,isMoving:o})}var f=a[a.length-1];if(f.descriptor.id===e.descriptor.id)return o.borderBox.center;if(Tn(f.descriptor.id,s)){var m=es(f.page,_i(s.displacedBy.point));return Au({axis:l,moveRelativeTo:m,isMoving:o})}return Au({axis:l,moveRelativeTo:f.page,isMoving:o})},so=function(n,t){var e=n.frame;return e?Vt(t,e.scroll.diff.displacement):t},I2=function(t){var e=t.impact,i=t.draggable,r=t.droppable,s=t.draggables,a=t.afterCritical,o=i.page.borderBox.center,l=e.at;return!r||!l?o:l.type==="REORDER"?P2({impact:e,draggable:i,draggables:s,droppable:r,afterCritical:a}):T2({impact:e,draggables:s,afterCritical:a})},Ns=function(n){var t=I2(n),e=n.droppable,i=e?so(e,t):t;return i},ip=function(n,t){var e=ve(t,n.scroll.initial),i=_i(e),r=$e({top:t.y,bottom:t.y+n.frame.height,left:t.x,right:t.x+n.frame.width}),s={frame:r,scroll:{initial:n.scroll.initial,max:n.scroll.max,current:t,diff:{value:e,displacement:i}}};return s};function Su(n,t){return n.map(function(e){return t[e]})}function k2(n,t){for(var e=0;e<t.length;e++){var i=t[e].visible[n];if(i)return i}return null}var O2=function(n){var t=n.impact,e=n.viewport,i=n.destination,r=n.draggables,s=n.maxScrollChange,a=ip(e,Vt(e.scroll.current,s)),o=i.frame?Zo(i,Vt(i.frame.scroll.current,s)):i,l=t.displaced,c=rr({afterDragging:Su(l.all,r),destination:i,displacedBy:t.displacedBy,viewport:a.frame,last:l,forceShouldAnimate:!1}),u=rr({afterDragging:Su(l.all,r),destination:o,displacedBy:t.displacedBy,viewport:e.frame,last:l,forceShouldAnimate:!1}),d={},h={},p=[l,c,u];l.all.forEach(function(m){var v=k2(m,p);if(v){h[m]=v;return}d[m]=!0});var f=G({},t,{displaced:{all:l.all,invisible:d,visible:h}});return f},M2=function(n,t){return Vt(n.scroll.diff.displacement,t)},sl=function(n){var t=n.pageBorderBoxCenter,e=n.draggable,i=n.viewport,r=M2(i,t),s=ve(r,e.page.borderBox.center);return Vt(e.client.borderBox.center,s)},rp=function(n){var t=n.draggable,e=n.destination,i=n.newPageBorderBoxCenter,r=n.viewport,s=n.withDroppableDisplacement,a=n.onlyOnMainAxis,o=a===void 0?!1:a,l=ve(i,t.page.borderBox.center),c=gr(t.page.borderBox,l),u={target:c,destination:e,withDroppableDisplacement:s,viewport:r};return o?y2(u):ep(u)},L2=function(n){var t=n.isMovingForward,e=n.draggable,i=n.destination,r=n.draggables,s=n.previousImpact,a=n.viewport,o=n.previousPageBorderBoxCenter,l=n.previousClientSelection,c=n.afterCritical;if(!i.isEnabled)return null;var u=Ti(i.descriptor.id,r),d=Ri(e,i),h=d2({isMovingForward:t,draggable:e,destination:i,insideDestination:u,previousImpact:s})||C2({isMovingForward:t,isInHomeList:d,draggable:e,draggables:r,destination:i,insideDestination:u,previousImpact:s,viewport:a,afterCritical:c});if(!h)return null;var p=Ns({impact:h,draggable:e,droppable:i,draggables:r,afterCritical:c}),f=rp({draggable:e,destination:i,newPageBorderBoxCenter:p,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(f){var m=sl({pageBorderBoxCenter:p,draggable:e,viewport:a});return{clientSelection:m,impact:h,scrollJumpRequest:null}}var v=ve(p,o),g=O2({impact:h,viewport:a,destination:i,draggables:r,maxScrollChange:v});return{clientSelection:l,impact:g,scrollJumpRequest:v}},ie=function(t){var e=t.subject.active;return e||I(),e},N2=function(n){var t=n.isMovingForward,e=n.pageBorderBoxCenter,i=n.source,r=n.droppables,s=n.viewport,a=i.subject.active;if(!a)return null;var o=i.axis,l=Me(a[o.start],a[o.end]),c=Os(r).filter(function(d){return d!==i}).filter(function(d){return d.isEnabled}).filter(function(d){return!!d.subject.active}).filter(function(d){return Zh(s.frame)(ie(d))}).filter(function(d){var h=ie(d);return t?a[o.crossAxisEnd]<h[o.crossAxisEnd]:h[o.crossAxisStart]<a[o.crossAxisStart]}).filter(function(d){var h=ie(d),p=Me(h[o.start],h[o.end]);return l(h[o.start])||l(h[o.end])||p(a[o.start])||p(a[o.end])}).sort(function(d,h){var p=ie(d)[o.crossAxisStart],f=ie(h)[o.crossAxisStart];return t?p-f:f-p}).filter(function(d,h,p){return ie(d)[o.crossAxisStart]===ie(p[0])[o.crossAxisStart]});if(!c.length)return null;if(c.length===1)return c[0];var u=c.filter(function(d){var h=Me(ie(d)[o.start],ie(d)[o.end]);return h(e[o.line])});return u.length===1?u[0]:u.length>1?u.sort(function(d,h){return ie(d)[o.start]-ie(h)[o.start]})[0]:c.sort(function(d,h){var p=yu(e,xu(ie(d))),f=yu(e,xu(ie(h)));return p!==f?p-f:ie(d)[o.start]-ie(h)[o.start]})[0]},Cu=function(t,e){var i=t.page.borderBox.center;return Tn(t.descriptor.id,e)?ve(i,e.displacedBy.point):i},F2=function(t,e){var i=t.page.borderBox;return Tn(t.descriptor.id,e)?gr(i,_i(e.displacedBy.point)):i},B2=function(n){var t=n.pageBorderBoxCenter,e=n.viewport,i=n.destination,r=n.insideDestination,s=n.afterCritical,a=r.filter(function(o){return ep({target:F2(o,s),destination:i,viewport:e.frame,withDroppableDisplacement:!0})}).sort(function(o,l){var c=nr(t,so(i,Cu(o,s))),u=nr(t,so(i,Cu(l,s)));return c<u?-1:u<c?1:o.descriptor.index-l.descriptor.index});return a[0]||null},vr=Ut(function(t,e){var i=e[t.line];return{value:i,point:Zn(t.line,i)}}),j2=function(t,e,i){var r=t.axis;if(t.descriptor.mode==="virtual")return Zn(r.line,e[r.line]);var s=t.subject.page.contentBox[r.size],a=Ti(t.descriptor.id,i),o=a.reduce(function(u,d){return u+d.client.marginBox[r.size]},0),l=o+e[r.line],c=l-s;return c<=0?null:Zn(r.line,c)},sp=function(t,e){return G({},t,{scroll:G({},t.scroll,{max:e})})},ap=function(t,e,i){var r=t.frame;Ri(e,t)&&I(),t.subject.withPlaceholder&&I();var s=vr(t.axis,e.displaceBy).point,a=j2(t,s,i),o={placeholderSize:s,increasedBy:a,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!r){var l=xi({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:t.frame});return G({},t,{subject:l})}var c=a?Vt(r.scroll.max,a):r.scroll.max,u=sp(r,c),d=xi({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:u});return G({},t,{subject:d,frame:u})},$2=function(t){var e=t.subject.withPlaceholder;e||I();var i=t.frame;if(!i){var r=xi({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return G({},t,{subject:r})}var s=e.oldFrameMaxScroll;s||I();var a=sp(i,s),o=xi({page:t.subject.page,axis:t.axis,frame:a,withPlaceholder:null});return G({},t,{subject:o,frame:a})},z2=function(n){var t=n.previousPageBorderBoxCenter,e=n.moveRelativeTo,i=n.insideDestination,r=n.draggable,s=n.draggables,a=n.destination,o=n.viewport,l=n.afterCritical;if(!e){if(i.length)return null;var c={displaced:ir,displacedBy:Qh,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},u=Ns({impact:c,draggable:r,droppable:a,draggables:s,afterCritical:l}),d=Ri(r,a)?a:ap(a,r,s),h=rp({draggable:r,destination:d,newPageBorderBoxCenter:u,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return h?c:null}var p=t[a.axis.line]<=e.page.borderBox.center[a.axis.line],f=function(){var v=e.descriptor.index;return e.descriptor.id===r.descriptor.id||p?v:v+1}(),m=vr(a.axis,r.displaceBy);return as({draggable:r,insideDestination:i,destination:a,viewport:o,displacedBy:m,last:ir,index:f})},H2=function(n){var t=n.isMovingForward,e=n.previousPageBorderBoxCenter,i=n.draggable,r=n.isOver,s=n.draggables,a=n.droppables,o=n.viewport,l=n.afterCritical,c=N2({isMovingForward:t,pageBorderBoxCenter:e,source:r,droppables:a,viewport:o});if(!c)return null;var u=Ti(c.descriptor.id,s),d=B2({pageBorderBoxCenter:e,viewport:o,destination:c,insideDestination:u,afterCritical:l}),h=z2({previousPageBorderBoxCenter:e,destination:c,draggable:i,draggables:s,moveRelativeTo:d,insideDestination:u,viewport:o,afterCritical:l});if(!h)return null;var p=Ns({impact:h,draggable:i,droppable:c,draggables:s,afterCritical:l}),f=sl({pageBorderBoxCenter:p,draggable:i,viewport:o});return{clientSelection:f,impact:h,scrollJumpRequest:null}},xe=function(n){var t=n.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},U2=function(t,e){var i=xe(t);return i?e[i]:null},q2=function(n){var t=n.state,e=n.type,i=U2(t.impact,t.dimensions.droppables),r=!!i,s=t.dimensions.droppables[t.critical.droppable.id],a=i||s,o=a.axis.direction,l=o==="vertical"&&(e==="MOVE_UP"||e==="MOVE_DOWN")||o==="horizontal"&&(e==="MOVE_LEFT"||e==="MOVE_RIGHT");if(l&&!r)return null;var c=e==="MOVE_DOWN"||e==="MOVE_RIGHT",u=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,h=t.dimensions,p=h.draggables,f=h.droppables;return l?L2({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:a,draggables:p,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):H2({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:a,draggables:p,droppables:f,viewport:t.viewport,afterCritical:t.afterCritical})};function Fn(n){return n.phase==="DRAGGING"||n.phase==="COLLECTING"}function op(n){var t=Me(n.top,n.bottom),e=Me(n.left,n.right);return function(r){return t(r.y)&&e(r.x)}}function G2(n,t){return n.left<t.right&&n.right>t.left&&n.top<t.bottom&&n.bottom>t.top}function W2(n){var t=n.pageBorderBox,e=n.draggable,i=n.candidates,r=e.page.borderBox.center,s=i.map(function(a){var o=a.axis,l=Zn(a.axis.line,t.center[o.line],a.page.borderBox.center[o.crossAxisLine]);return{id:a.descriptor.id,distance:nr(r,l)}}).sort(function(a,o){return o.distance-a.distance});return s[0]?s[0].id:null}function V2(n){var t=n.pageBorderBox,e=n.draggable,i=n.droppables,r=Os(i).filter(function(s){if(!s.isEnabled)return!1;var a=s.subject.active;if(!a||!G2(t,a))return!1;if(op(a)(t.center))return!0;var o=s.axis,l=a.center[o.crossAxisLine],c=t[o.crossAxisStart],u=t[o.crossAxisEnd],d=Me(a[o.crossAxisStart],a[o.crossAxisEnd]),h=d(c),p=d(u);return!h&&!p?!0:h?c<l:u>l});return r.length?r.length===1?r[0].descriptor.id:W2({pageBorderBox:t,draggable:e,candidates:r}):null}var lp=function(t,e){return $e(gr(t,e))},X2=function(n,t){var e=n.frame;return e?lp(t,e.scroll.diff.value):t};function cp(n){var t=n.displaced,e=n.id;return!!(t.visible[e]||t.invisible[e])}function K2(n){var t=n.draggable,e=n.closest,i=n.inHomeList;return e?i&&e.descriptor.index>t.descriptor.index?e.descriptor.index-1:e.descriptor.index:null}var Y2=function(n){var t=n.pageBorderBoxWithDroppableScroll,e=n.draggable,i=n.destination,r=n.insideDestination,s=n.last,a=n.viewport,o=n.afterCritical,l=i.axis,c=vr(i.axis,e.displaceBy),u=c.value,d=t[l.start],h=t[l.end],p=Ls(e,r),f=Pn(p,function(v){var g=v.descriptor.id,b=v.page.borderBox.center[l.line],y=Tn(g,o),w=cp({displaced:s,id:g});return y?w?h<=b:d<b-u:w?h<=b+u:d<b}),m=K2({draggable:e,closest:f,inHomeList:Ri(e,i)});return as({draggable:e,insideDestination:r,destination:i,viewport:a,last:s,displacedBy:c,index:m})},J2=4,Q2=function(n){var t=n.draggable,e=n.pageBorderBoxWithDroppableScroll,i=n.previousImpact,r=n.destination,s=n.insideDestination,a=n.afterCritical;if(!r.isCombineEnabled)return null;var o=r.axis,l=vr(r.axis,t.displaceBy),c=l.value,u=e[o.start],d=e[o.end],h=Ls(t,s),p=Pn(h,function(m){var v=m.descriptor.id,g=m.page.borderBox,b=g[o.size],y=b/J2,w=Tn(v,a),x=cp({displaced:i.displaced,id:v});return w?x?d>g[o.start]+y&&d<g[o.end]-y:u>g[o.start]-c+y&&u<g[o.end]-c-y:x?d>g[o.start]+c+y&&d<g[o.end]+c-y:u>g[o.start]+y&&u<g[o.end]-y});if(!p)return null;var f={displacedBy:l,displaced:i.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:r.descriptor.id}}};return f},up=function(n){var t=n.pageOffset,e=n.draggable,i=n.draggables,r=n.droppables,s=n.previousImpact,a=n.viewport,o=n.afterCritical,l=lp(e.page.borderBox,t),c=V2({pageBorderBox:l,draggable:e,droppables:r});if(!c)return h2;var u=r[c],d=Ti(u.descriptor.id,i),h=X2(u,l);return Q2({pageBorderBoxWithDroppableScroll:h,draggable:e,previousImpact:s,destination:u,insideDestination:d,afterCritical:o})||Y2({pageBorderBoxWithDroppableScroll:h,draggable:e,destination:u,insideDestination:d,last:s.displaced,viewport:a,afterCritical:o})},al=function(n,t){var e;return G({},n,(e={},e[t.descriptor.id]=t,e))},Z2=function(t){var e=t.previousImpact,i=t.impact,r=t.droppables,s=xe(e),a=xe(i);if(!s||s===a)return r;var o=r[s];if(!o.subject.withPlaceholder)return r;var l=$2(o);return al(r,l)},tx=function(n){var t=n.draggable,e=n.draggables,i=n.droppables,r=n.previousImpact,s=n.impact,a=Z2({previousImpact:r,impact:s,droppables:i}),o=xe(s);if(!o)return a;var l=i[o];if(Ri(t,l)||l.subject.withPlaceholder)return a;var c=ap(l,t,e);return al(a,c)},Wi=function(n){var t=n.state,e=n.clientSelection,i=n.dimensions,r=n.viewport,s=n.impact,a=n.scrollJumpRequest,o=r||t.viewport,l=i||t.dimensions,c=e||t.current.client.selection,u=ve(c,t.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:Vt(t.initial.client.borderBoxCenter,u)},h={selection:Vt(d.selection,o.scroll.current),borderBoxCenter:Vt(d.borderBoxCenter,o.scroll.current),offset:Vt(d.offset,o.scroll.diff.value)},p={client:d,page:h};if(t.phase==="COLLECTING")return G({phase:"COLLECTING"},t,{dimensions:l,viewport:o,current:p});var f=l.draggables[t.critical.draggable.id],m=s||up({pageOffset:h.offset,draggable:f,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:o,afterCritical:t.afterCritical}),v=tx({draggable:f,impact:m,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables}),g=G({},t,{current:p,dimensions:{draggables:l.draggables,droppables:v},impact:m,viewport:o,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null});return g};function ex(n,t){return n.map(function(e){return t[e]})}var dp=function(n){var t=n.impact,e=n.viewport,i=n.draggables,r=n.destination,s=n.forceShouldAnimate,a=t.displaced,o=ex(a.all,i),l=rr({afterDragging:o,destination:r,displacedBy:t.displacedBy,viewport:e.frame,forceShouldAnimate:s,last:a});return G({},t,{displaced:l})},hp=function(n){var t=n.impact,e=n.draggable,i=n.droppable,r=n.draggables,s=n.viewport,a=n.afterCritical,o=Ns({impact:t,draggable:e,draggables:r,droppable:i,afterCritical:a});return sl({pageBorderBoxCenter:o,draggable:e,viewport:s})},pp=function(n){var t=n.state,e=n.dimensions,i=n.viewport;t.movementMode!=="SNAP"&&I();var r=t.impact,s=i||t.viewport,a=e||t.dimensions,o=a.draggables,l=a.droppables,c=o[t.critical.draggable.id],u=xe(r);u||I();var d=l[u],h=dp({impact:r,viewport:s,destination:d,draggables:o}),p=hp({impact:h,draggable:c,droppable:d,draggables:o,viewport:s,afterCritical:t.afterCritical});return Wi({impact:h,clientSelection:p,state:t,dimensions:a,viewport:s})},nx=function(n){return{index:n.index,droppableId:n.droppableId}},fp=function(n){var t=n.draggable,e=n.home,i=n.draggables,r=n.viewport,s=vr(e.axis,t.displaceBy),a=Ti(e.descriptor.id,i),o=a.indexOf(t);o===-1&&I();var l=a.slice(o+1),c=l.reduce(function(p,f){return p[f.descriptor.id]=!0,p},{}),u={inVirtualList:e.descriptor.mode==="virtual",displacedBy:s,effected:c},d=rr({afterDragging:l,destination:e,displacedBy:s,last:null,viewport:r.frame,forceShouldAnimate:!1}),h={displaced:d,displacedBy:s,at:{type:"REORDER",destination:nx(t.descriptor)}};return{impact:h,afterCritical:u}},ix=function(n,t){return{draggables:n.draggables,droppables:al(n.droppables,t)}},rx=function(n){var t=n.draggable,e=n.offset,i=n.initialWindowScroll,r=es(t.client,e),s=ns(r,i),a=G({},t,{placeholder:G({},t.placeholder,{client:r}),client:r,page:s});return a},sx=function(n){var t=n.frame;return t||I(),t},ax=function(n){var t=n.additions,e=n.updatedDroppables,i=n.viewport,r=i.scroll.diff.value;return t.map(function(s){var a=s.descriptor.droppableId,o=e[a],l=sx(o),c=l.scroll.diff.value,u=Vt(r,c),d=rx({draggable:s,offset:u,initialWindowScroll:i.scroll.initial});return d})},ox=function(n){var t=n.state,e=n.published,i=e.modified.map(function(y){var w=t.dimensions.droppables[y.droppableId],x=Zo(w,y.scroll);return x}),r=G({},t.dimensions.droppables,{},Yh(i)),s=Jh(ax({additions:e.additions,updatedDroppables:r,viewport:t.viewport})),a=G({},t.dimensions.draggables,{},s);e.removals.forEach(function(y){delete a[y]});var o={droppables:r,draggables:a},l=xe(t.impact),c=l?o.droppables[l]:null,u=o.draggables[t.critical.draggable.id],d=o.droppables[t.critical.droppable.id],h=fp({draggable:u,home:d,draggables:a,viewport:t.viewport}),p=h.impact,f=h.afterCritical,m=c&&c.isCombineEnabled?t.impact:p,v=up({pageOffset:t.current.page.offset,draggable:o.draggables[t.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:m,viewport:t.viewport,afterCritical:f}),g=G({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:v,onLiftImpact:p,dimensions:o,afterCritical:f,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return g;var b=G({phase:"DROP_PENDING"},g,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return b},ao=function(t){return t.movementMode==="SNAP"},ya=function(t,e,i){var r=ix(t.dimensions,e);return!ao(t)||i?Wi({state:t,dimensions:r}):pp({state:t,dimensions:r})};function xa(n){return n.isDragging&&n.movementMode==="SNAP"?G({phase:"DRAGGING"},n,{scrollJumpRequest:null}):n}var _u={phase:"IDLE",completed:null,shouldFlush:!1},lx=function(n,t){if(n===void 0&&(n=_u),t.type==="FLUSH")return G({},_u,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){n.phase!=="IDLE"&&I();var e=t.payload,i=e.critical,r=e.clientSelection,s=e.viewport,a=e.dimensions,o=e.movementMode,l=a.draggables[i.draggable.id],c=a.droppables[i.droppable.id],u={selection:r,borderBoxCenter:l.client.borderBox.center,offset:qt},d={client:u,page:{selection:Vt(u.selection,s.scroll.initial),borderBoxCenter:Vt(u.selection,s.scroll.initial),offset:Vt(u.selection,s.scroll.diff.value)}},h=Os(a.droppables).every(function(Gt){return!Gt.isFixedOnPage}),p=fp({draggable:l,home:c,draggables:a.draggables,viewport:s}),f=p.impact,m=p.afterCritical,v={phase:"DRAGGING",isDragging:!0,critical:i,movementMode:o,dimensions:a,initial:d,current:d,isWindowScrollAllowed:h,impact:f,afterCritical:m,onLiftImpact:f,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null};return v}if(t.type==="COLLECTION_STARTING"){if(n.phase==="COLLECTING"||n.phase==="DROP_PENDING")return n;n.phase!=="DRAGGING"&&I();var g=G({phase:"COLLECTING"},n,{phase:"COLLECTING"});return g}if(t.type==="PUBLISH_WHILE_DRAGGING")return n.phase==="COLLECTING"||n.phase==="DROP_PENDING"||I(),ox({state:n,published:t.payload});if(t.type==="MOVE"){if(n.phase==="DROP_PENDING")return n;Fn(n)||I();var b=t.payload.client;return An(b,n.current.client.selection)?n:Wi({state:n,clientSelection:b,impact:ao(n)?n.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(n.phase==="DROP_PENDING"||n.phase==="COLLECTING")return xa(n);Fn(n)||I();var y=t.payload,w=y.id,x=y.newScroll,E=n.dimensions.droppables[w];if(!E)return n;var S=Zo(E,x);return ya(n,S,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(n.phase==="DROP_PENDING")return n;Fn(n)||I();var D=t.payload,T=D.id,L=D.isEnabled,k=n.dimensions.droppables[T];k||I(),k.isEnabled===L&&I();var j=G({},k,{isEnabled:L});return ya(n,j,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(n.phase==="DROP_PENDING")return n;Fn(n)||I();var R=t.payload,P=R.id,U=R.isCombineEnabled,$=n.dimensions.droppables[P];$||I(),$.isCombineEnabled===U&&I();var O=G({},$,{isCombineEnabled:U});return ya(n,O,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(n.phase==="DROP_PENDING"||n.phase==="DROP_ANIMATING")return n;Fn(n)||I(),n.isWindowScrollAllowed||I();var M=t.payload.newScroll;if(An(n.viewport.scroll.current,M))return xa(n);var V=ip(n.viewport,M);return ao(n)?pp({state:n,viewport:V}):Wi({state:n,viewport:V})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Fn(n))return n;var at=t.payload.maxScroll;if(An(at,n.viewport.scroll.max))return n;var Y=G({},n.viewport,{scroll:G({},n.viewport.scroll,{max:at})});return G({phase:"DRAGGING"},n,{viewport:Y})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(n.phase==="COLLECTING"||n.phase==="DROP_PENDING")return n;n.phase!=="DRAGGING"&&I();var Q=q2({state:n,type:t.type});return Q?Wi({state:n,impact:Q.impact,clientSelection:Q.clientSelection,scrollJumpRequest:Q.scrollJumpRequest}):n}if(t.type==="DROP_PENDING"){var ut=t.payload.reason;n.phase!=="COLLECTING"&&I();var _t=G({phase:"DROP_PENDING"},n,{phase:"DROP_PENDING",isWaiting:!0,reason:ut});return _t}if(t.type==="DROP_ANIMATE"){var Rt=t.payload,pt=Rt.completed,rt=Rt.dropDuration,ft=Rt.newHomeClientOffset;n.phase==="DRAGGING"||n.phase==="DROP_PENDING"||I();var Xt={phase:"DROP_ANIMATING",completed:pt,dropDuration:rt,newHomeClientOffset:ft,dimensions:n.dimensions};return Xt}if(t.type==="DROP_COMPLETE"){var wt=t.payload.completed;return{phase:"IDLE",completed:wt,shouldFlush:!1}}return n},cx=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},ux=function(t){return{type:"LIFT",payload:t}},dx=function(t){return{type:"INITIAL_PUBLISH",payload:t}},hx=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},px=function(){return{type:"COLLECTION_STARTING",payload:null}},fx=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},mx=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},gx=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},mp=function(t){return{type:"MOVE",payload:t}},vx=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},bx=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},yx=function(){return{type:"MOVE_UP",payload:null}},xx=function(){return{type:"MOVE_DOWN",payload:null}},wx=function(){return{type:"MOVE_RIGHT",payload:null}},Ax=function(){return{type:"MOVE_LEFT",payload:null}},ol=function(){return{type:"FLUSH",payload:null}},Ex=function(t){return{type:"DROP_ANIMATE",payload:t}},ll=function(t){return{type:"DROP_COMPLETE",payload:t}},gp=function(t){return{type:"DROP",payload:t}},Sx=function(t){return{type:"DROP_PENDING",payload:t}},vp=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},Cx=function(n){return function(t){var e=t.getState,i=t.dispatch;return function(r){return function(s){if(s.type!=="LIFT"){r(s);return}var a=s.payload,o=a.id,l=a.clientSelection,c=a.movementMode,u=e();u.phase==="DROP_ANIMATING"&&i(ll({completed:u.completed})),e().phase!=="IDLE"&&I(),i(ol()),i(cx({draggableId:o,movementMode:c}));var d={shouldPublishImmediately:c==="SNAP"},h={draggableId:o,scrollOptions:d},p=n.startPublishing(h),f=p.critical,m=p.dimensions,v=p.viewport;i(dx({critical:f,dimensions:m,clientSelection:l,movementMode:c,viewport:v}))}}}},_x=function(n){return function(){return function(t){return function(e){e.type==="INITIAL_PUBLISH"&&n.dragging(),e.type==="DROP_ANIMATE"&&n.dropping(e.payload.completed.result.reason),(e.type==="FLUSH"||e.type==="DROP_COMPLETE")&&n.resting(),t(e)}}}},cl={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},sr={opacity:{drop:0,combining:.7},scale:{drop:.75}},ul={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Ln=ul.outOfTheWay+"s "+cl.outOfTheWay,Vi={fluid:"opacity "+Ln,snap:"transform "+Ln+", opacity "+Ln,drop:function(t){var e=t+"s "+cl.drop;return"transform "+e+", opacity "+e},outOfTheWay:"transform "+Ln,placeholder:"height "+Ln+", width "+Ln+", margin "+Ln},Tu=function(t){return An(t,qt)?null:"translate("+t.x+"px, "+t.y+"px)"},oo={moveTo:Tu,drop:function(t,e){var i=Tu(t);return i?e?i+" scale("+sr.scale.drop+")":i:null}},lo=ul.minDropTime,bp=ul.maxDropTime,Tx=bp-lo,Ru=1500,Rx=.6,Dx=function(n){var t=n.current,e=n.destination,i=n.reason,r=nr(t,e);if(r<=0)return lo;if(r>=Ru)return bp;var s=r/Ru,a=lo+Tx*s,o=i==="CANCEL"?a*Rx:a;return Number(o.toFixed(2))},Px=function(n){var t=n.impact,e=n.draggable,i=n.dimensions,r=n.viewport,s=n.afterCritical,a=i.draggables,o=i.droppables,l=xe(t),c=l?o[l]:null,u=o[e.descriptor.droppableId],d=hp({impact:t,draggable:e,draggables:a,afterCritical:s,droppable:c||u,viewport:r}),h=ve(d,e.client.borderBox.center);return h},Ix=function(n){var t=n.draggables,e=n.reason,i=n.lastImpact,r=n.home,s=n.viewport,a=n.onLiftImpact;if(!i.at||e!=="DROP"){var o=dp({draggables:t,impact:a,destination:r,viewport:s,forceShouldAnimate:!0});return{impact:o,didDropInsideDroppable:!1}}if(i.at.type==="REORDER")return{impact:i,didDropInsideDroppable:!0};var l=G({},i,{displaced:ir});return{impact:l,didDropInsideDroppable:!0}},kx=function(n){var t=n.getState,e=n.dispatch;return function(i){return function(r){if(r.type!=="DROP"){i(r);return}var s=t(),a=r.payload.reason;if(s.phase==="COLLECTING"){e(Sx({reason:a}));return}if(s.phase!=="IDLE"){var o=s.phase==="DROP_PENDING"&&s.isWaiting;o&&I(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||I();var l=s.critical,c=s.dimensions,u=c.draggables[s.critical.draggable.id],d=Ix({reason:a,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),h=d.impact,p=d.didDropInsideDroppable,f=p?el(h):null,m=p?Ms(h):null,v={index:l.draggable.index,droppableId:l.droppable.id},g={draggableId:u.descriptor.id,type:u.descriptor.type,source:v,reason:a,mode:s.movementMode,destination:f,combine:m},b=Px({impact:h,draggable:u,dimensions:c,viewport:s.viewport,afterCritical:s.afterCritical}),y={critical:s.critical,afterCritical:s.afterCritical,result:g,impact:h},w=!An(s.current.client.offset,b)||!!g.combine;if(!w){e(ll({completed:y}));return}var x=Dx({current:s.current.client.offset,destination:b,reason:a}),E={newHomeClientOffset:b,dropDuration:x,completed:y};e(Ex(E))}}}},yp=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Ox(n){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(e){e.target!==window&&e.target!==window.document||n()}}}function Mx(n){var t=n.onWindowScroll;function e(){t(yp())}var i=er(e),r=Ox(i),s=wn;function a(){return s!==wn}function o(){a()&&I(),s=Oe(window,[r])}function l(){a()||I(),i.cancel(),s(),s=wn}return{start:o,stop:l,isActive:a}}var Lx=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},Nx=function(n){var t=Mx({onWindowScroll:function(i){n.dispatch(vx({newScroll:i}))}});return function(e){return function(i){!t.isActive()&&i.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&Lx(i)&&t.stop(),e(i)}}},Fx=function(n){var t=!1,e=!1,i=setTimeout(function(){e=!0}),r=function(a){t||e||(t=!0,n(a),clearTimeout(i))};return r.wasCalled=function(){return t},r},Bx=function(){var n=[],t=function(s){var a=tl(n,function(c){return c.timerId===s});a===-1&&I();var o=n.splice(a,1),l=o[0];l.callback()},e=function(s){var a=setTimeout(function(){return t(a)}),o={timerId:a,callback:s};n.push(o)},i=function(){if(n.length){var s=[].concat(n);n.length=0,s.forEach(function(a){clearTimeout(a.timerId),a.callback()})}};return{add:e,flush:i}},jx=function(t,e){return t==null&&e==null?!0:t==null||e==null?!1:t.droppableId===e.droppableId&&t.index===e.index},$x=function(t,e){return t==null&&e==null?!0:t==null||e==null?!1:t.draggableId===e.draggableId&&t.droppableId===e.droppableId},zx=function(t,e){if(t===e)return!0;var i=t.draggable.id===e.draggable.id&&t.draggable.droppableId===e.draggable.droppableId&&t.draggable.type===e.draggable.type&&t.draggable.index===e.draggable.index,r=t.droppable.id===e.droppable.id&&t.droppable.type===e.droppable.type;return i&&r},Ni=function(t,e){e()},Rr=function(t,e){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:e}},wa=function(t,e,i,r){if(!t){i(r(e));return}var s=Fx(i),a={announce:s};t(e,a),s.wasCalled()||i(r(e))},Hx=function(n,t){var e=Bx(),i=null,r=function(h,p){i&&I(),Ni("onBeforeCapture",function(){var f=n().onBeforeCapture;if(f){var m={draggableId:h,mode:p};f(m)}})},s=function(h,p){i&&I(),Ni("onBeforeDragStart",function(){var f=n().onBeforeDragStart;f&&f(Rr(h,p))})},a=function(h,p){i&&I();var f=Rr(h,p);i={mode:p,lastCritical:h,lastLocation:f.source,lastCombine:null},e.add(function(){Ni("onDragStart",function(){return wa(n().onDragStart,f,t,Br.onDragStart)})})},o=function(h,p){var f=el(p),m=Ms(p);i||I();var v=!zx(h,i.lastCritical);v&&(i.lastCritical=h);var g=!jx(i.lastLocation,f);g&&(i.lastLocation=f);var b=!$x(i.lastCombine,m);if(b&&(i.lastCombine=m),!(!v&&!g&&!b)){var y=G({},Rr(h,i.mode),{combine:m,destination:f});e.add(function(){Ni("onDragUpdate",function(){return wa(n().onDragUpdate,y,t,Br.onDragUpdate)})})}},l=function(){i||I(),e.flush()},c=function(h){i||I(),i=null,Ni("onDragEnd",function(){return wa(n().onDragEnd,h,t,Br.onDragEnd)})},u=function(){if(i){var h=G({},Rr(i.lastCritical,i.mode),{combine:null,destination:null,reason:"CANCEL"});c(h)}};return{beforeCapture:r,beforeStart:s,start:a,update:o,flush:l,drop:c,abort:u}},Ux=function(n,t){var e=Hx(n,t);return function(i){return function(r){return function(s){if(s.type==="BEFORE_INITIAL_CAPTURE"){e.beforeCapture(s.payload.draggableId,s.payload.movementMode);return}if(s.type==="INITIAL_PUBLISH"){var a=s.payload.critical;e.beforeStart(a,s.payload.movementMode),r(s),e.start(a,s.payload.movementMode);return}if(s.type==="DROP_COMPLETE"){var o=s.payload.completed.result;e.flush(),r(s),e.drop(o);return}if(r(s),s.type==="FLUSH"){e.abort();return}var l=i.getState();l.phase==="DRAGGING"&&e.update(l.critical,l.impact)}}}},qx=function(n){return function(t){return function(e){if(e.type!=="DROP_ANIMATION_FINISHED"){t(e);return}var i=n.getState();i.phase!=="DROP_ANIMATING"&&I(),n.dispatch(ll({completed:i.completed}))}}},Gx=function(n){var t=null,e=null;function i(){e&&(cancelAnimationFrame(e),e=null),t&&(t(),t=null)}return function(r){return function(s){if((s.type==="FLUSH"||s.type==="DROP_COMPLETE"||s.type==="DROP_ANIMATION_FINISHED")&&i(),r(s),s.type==="DROP_ANIMATE"){var a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var l=n.getState();l.phase==="DROP_ANIMATING"&&n.dispatch(vp())}};e=requestAnimationFrame(function(){e=null,t=Oe(window,[a])})}}}},Wx=function(n){return function(){return function(t){return function(e){(e.type==="DROP_COMPLETE"||e.type==="FLUSH"||e.type==="DROP_ANIMATE")&&n.stopPublishing(),t(e)}}}},Vx=function(n){var t=!1;return function(){return function(e){return function(i){if(i.type==="INITIAL_PUBLISH"){t=!0,n.tryRecordFocus(i.payload.critical.draggable.id),e(i),n.tryRestoreFocusRecorded();return}if(e(i),!!t){if(i.type==="FLUSH"){t=!1,n.tryRestoreFocusRecorded();return}if(i.type==="DROP_COMPLETE"){t=!1;var r=i.payload.completed.result;r.combine&&n.tryShiftRecord(r.draggableId,r.combine.draggableId),n.tryRestoreFocusRecorded()}}}}}},Xx=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},Kx=function(n){return function(t){return function(e){return function(i){if(Xx(i)){n.stop(),e(i);return}if(i.type==="INITIAL_PUBLISH"){e(i);var r=t.getState();r.phase!=="DRAGGING"&&I(),n.start(r);return}e(i),n.scroll(t.getState())}}}},Yx=function(n){return function(t){return function(e){if(t(e),e.type==="PUBLISH_WHILE_DRAGGING"){var i=n.getState();i.phase==="DROP_PENDING"&&(i.isWaiting||n.dispatch(gp({reason:i.reason})))}}}},Jx=Mh,Qx=function(n){var t=n.dimensionMarshal,e=n.focusMarshal,i=n.styleMarshal,r=n.getResponders,s=n.announce,a=n.autoScroller;return Oh(lx,Jx(ny(_x(i),Wx(t),Cx(t),kx,qx,Gx,Yx,Kx(a),Nx,Vx(e),Ux(r,s))))},Aa=function(){return{additions:{},removals:{},modified:{}}};function Zx(n){var t=n.registry,e=n.callbacks,i=Aa(),r=null,s=function(){r||(e.collectionStarting(),r=requestAnimationFrame(function(){r=null;var u=i,d=u.additions,h=u.removals,p=u.modified,f=Object.keys(d).map(function(g){return t.draggable.getById(g).getDimension(qt)}).sort(function(g,b){return g.descriptor.index-b.descriptor.index}),m=Object.keys(p).map(function(g){var b=t.droppable.getById(g),y=b.callbacks.getScrollWhileDragging();return{droppableId:g,scroll:y}}),v={additions:f,removals:Object.keys(h),modified:m};i=Aa(),e.publish(v)}))},a=function(u){var d=u.descriptor.id;i.additions[d]=u,i.modified[u.descriptor.droppableId]=!0,i.removals[d]&&delete i.removals[d],s()},o=function(u){var d=u.descriptor;i.removals[d.id]=!0,i.modified[d.droppableId]=!0,i.additions[d.id]&&delete i.additions[d.id],s()},l=function(){r&&(cancelAnimationFrame(r),r=null,i=Aa())};return{add:a,remove:o,stop:l}}var xp=function(n){var t=n.scrollHeight,e=n.scrollWidth,i=n.height,r=n.width,s=ve({x:e,y:t},{x:r,y:i}),a={x:Math.max(0,s.x),y:Math.max(0,s.y)};return a},wp=function(){var n=document.documentElement;return n||I(),n},Ap=function(){var n=wp(),t=xp({scrollHeight:n.scrollHeight,scrollWidth:n.scrollWidth,width:n.clientWidth,height:n.clientHeight});return t},tw=function(){var n=yp(),t=Ap(),e=n.y,i=n.x,r=wp(),s=r.clientWidth,a=r.clientHeight,o=i+s,l=e+a,c=$e({top:e,left:i,right:o,bottom:l}),u={frame:c,scroll:{initial:n,current:n,max:t,diff:{value:qt,displacement:qt}}};return u},ew=function(n){var t=n.critical,e=n.scrollOptions,i=n.registry,r=tw(),s=r.scroll.current,a=t.droppable,o=i.droppable.getAllByType(a.type).map(function(d){return d.callbacks.getDimensionAndWatchScroll(s,e)}),l=i.draggable.getAllByType(t.draggable.type).map(function(d){return d.getDimension(s)}),c={draggables:Jh(l),droppables:Yh(o)},u={dimensions:c,critical:t,viewport:r};return u};function Du(n,t,e){if(e.descriptor.id===t.id||e.descriptor.type!==t.type)return!1;var i=n.droppable.getById(e.descriptor.droppableId);return i.descriptor.mode==="virtual"}var nw=function(n,t){var e=null,i=Zx({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:n}),r=function(p,f){n.droppable.exists(p)||I(),e&&t.updateDroppableIsEnabled({id:p,isEnabled:f})},s=function(p,f){e&&(n.droppable.exists(p)||I(),t.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:f}))},a=function(p,f){e&&(n.droppable.exists(p)||I(),t.updateDroppableScroll({id:p,newScroll:f}))},o=function(p,f){e&&n.droppable.getById(p).callbacks.scroll(f)},l=function(){if(e){i.stop();var p=e.critical.droppable;n.droppable.getAllByType(p.type).forEach(function(f){return f.callbacks.dragStopped()}),e.unsubscribe(),e=null}},c=function(p){e||I();var f=e.critical.draggable;p.type==="ADDITION"&&Du(n,f,p.value)&&i.add(p.value),p.type==="REMOVAL"&&Du(n,f,p.value)&&i.remove(p.value)},u=function(p){e&&I();var f=n.draggable.getById(p.draggableId),m=n.droppable.getById(f.descriptor.droppableId),v={draggable:f.descriptor,droppable:m.descriptor},g=n.subscribe(c);return e={critical:v,unsubscribe:g},ew({critical:v,registry:n,scrollOptions:p.scrollOptions})},d={updateDroppableIsEnabled:r,updateDroppableIsCombineEnabled:s,scrollDroppable:o,updateDroppableScroll:a,startPublishing:u,stopPublishing:l};return d},Ep=function(n,t){return n.phase==="IDLE"?!0:n.phase!=="DROP_ANIMATING"||n.completed.result.draggableId===t?!1:n.completed.result.reason==="DROP"},iw=function(n){window.scrollBy(n.x,n.y)},rw=Ut(function(n){return Os(n).filter(function(t){return!(!t.isEnabled||!t.frame)})}),sw=function(t,e){var i=Pn(rw(e),function(r){return r.frame||I(),op(r.frame.pageMarginBox)(t)});return i},aw=function(n){var t=n.center,e=n.destination,i=n.droppables;if(e){var r=i[e];return r.frame?r:null}var s=sw(t,i);return s},En={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},ow=function(n,t){var e=n[t.size]*En.startFromPercentage,i=n[t.size]*En.maxScrollAtPercentage,r={startScrollingFrom:e,maxScrollValueAt:i};return r},Sp=function(n){var t=n.startOfRange,e=n.endOfRange,i=n.current,r=e-t;if(r===0)return 0;var s=i-t,a=s/r;return a},dl=1,lw=function(n,t){if(n>t.startScrollingFrom)return 0;if(n<=t.maxScrollValueAt)return En.maxPixelScroll;if(n===t.startScrollingFrom)return dl;var e=Sp({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:n}),i=1-e,r=En.maxPixelScroll*En.ease(i);return Math.ceil(r)},Pu=En.durationDampening.accelerateAt,Iu=En.durationDampening.stopDampeningAt,cw=function(n,t){var e=t,i=Iu,r=Date.now(),s=r-e;if(s>=Iu)return n;if(s<Pu)return dl;var a=Sp({startOfRange:Pu,endOfRange:i,current:s}),o=n*En.ease(a);return Math.ceil(o)},ku=function(n){var t=n.distanceToEdge,e=n.thresholds,i=n.dragStartTime,r=n.shouldUseTimeDampening,s=lw(t,e);return s===0?0:r?Math.max(cw(s,i),dl):s},Ou=function(n){var t=n.container,e=n.distanceToEdges,i=n.dragStartTime,r=n.axis,s=n.shouldUseTimeDampening,a=ow(t,r),o=e[r.end]<e[r.start];return o?ku({distanceToEdge:e[r.end],thresholds:a,dragStartTime:i,shouldUseTimeDampening:s}):-1*ku({distanceToEdge:e[r.start],thresholds:a,dragStartTime:i,shouldUseTimeDampening:s})},uw=function(n){var t=n.container,e=n.subject,i=n.proposedScroll,r=e.height>t.height,s=e.width>t.width;return!s&&!r?i:s&&r?null:{x:s?0:i.x,y:r?0:i.y}},dw=Xh(function(n){return n===0?0:n}),Cp=function(n){var t=n.dragStartTime,e=n.container,i=n.subject,r=n.center,s=n.shouldUseTimeDampening,a={top:r.y-e.top,right:e.right-r.x,bottom:e.bottom-r.y,left:r.x-e.left},o=Ou({container:e,distanceToEdges:a,dragStartTime:t,axis:nl,shouldUseTimeDampening:s}),l=Ou({container:e,distanceToEdges:a,dragStartTime:t,axis:tp,shouldUseTimeDampening:s}),c=dw({x:l,y:o});if(An(c,qt))return null;var u=uw({container:e,subject:i,proposedScroll:c});return u?An(u,qt)?null:u:null},hw=Xh(function(n){return n===0?0:n>0?1:-1}),hl=function(){var n=function(e,i){return e<0?e:e>i?e-i:0};return function(t){var e=t.current,i=t.max,r=t.change,s=Vt(e,r),a={x:n(s.x,i.x),y:n(s.y,i.y)};return An(a,qt)?null:a}}(),_p=function(t){var e=t.max,i=t.current,r=t.change,s={x:Math.max(i.x,e.x),y:Math.max(i.y,e.y)},a=hw(r),o=hl({max:s,current:i,change:a});return!o||a.x!==0&&o.x===0||a.y!==0&&o.y===0},pl=function(t,e){return _p({current:t.scroll.current,max:t.scroll.max,change:e})},pw=function(t,e){if(!pl(t,e))return null;var i=t.scroll.max,r=t.scroll.current;return hl({current:r,max:i,change:e})},fl=function(t,e){var i=t.frame;return i?_p({current:i.scroll.current,max:i.scroll.max,change:e}):!1},fw=function(t,e){var i=t.frame;return!i||!fl(t,e)?null:hl({current:i.scroll.current,max:i.scroll.max,change:e})},mw=function(n){var t=n.viewport,e=n.subject,i=n.center,r=n.dragStartTime,s=n.shouldUseTimeDampening,a=Cp({dragStartTime:r,container:t.frame,subject:e,center:i,shouldUseTimeDampening:s});return a&&pl(t,a)?a:null},gw=function(n){var t=n.droppable,e=n.subject,i=n.center,r=n.dragStartTime,s=n.shouldUseTimeDampening,a=t.frame;if(!a)return null;var o=Cp({dragStartTime:r,container:a.pageMarginBox,subject:e,center:i,shouldUseTimeDampening:s});return o&&fl(t,o)?o:null},Mu=function(n){var t=n.state,e=n.dragStartTime,i=n.shouldUseTimeDampening,r=n.scrollWindow,s=n.scrollDroppable,a=t.current.page.borderBoxCenter,o=t.dimensions.draggables[t.critical.draggable.id],l=o.page.marginBox;if(t.isWindowScrollAllowed){var c=t.viewport,u=mw({dragStartTime:e,viewport:c,subject:l,center:a,shouldUseTimeDampening:i});if(u){r(u);return}}var d=aw({center:a,destination:xe(t.impact),droppables:t.dimensions.droppables});if(d){var h=gw({dragStartTime:e,droppable:d,subject:l,center:a,shouldUseTimeDampening:i});h&&s(d.descriptor.id,h)}},vw=function(n){var t=n.scrollWindow,e=n.scrollDroppable,i=er(t),r=er(e),s=null,a=function(u){s||I();var d=s,h=d.shouldUseTimeDampening,p=d.dragStartTime;Mu({state:u,scrollWindow:i,scrollDroppable:r,dragStartTime:p,shouldUseTimeDampening:h})},o=function(u){s&&I();var d=Date.now(),h=!1,p=function(){h=!0};Mu({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p}),s={dragStartTime:d,shouldUseTimeDampening:h},h&&a(u)},l=function(){s&&(i.cancel(),r.cancel(),s=null)};return{start:o,stop:l,scroll:a}},bw=function(n){var t=n.move,e=n.scrollDroppable,i=n.scrollWindow,r=function(c,u){var d=Vt(c.current.client.selection,u);t({client:d})},s=function(c,u){if(!fl(c,u))return u;var d=fw(c,u);if(!d)return e(c.descriptor.id,u),null;var h=ve(u,d);e(c.descriptor.id,h);var p=ve(u,h);return p},a=function(c,u,d){if(!c||!pl(u,d))return d;var h=pw(u,d);if(!h)return i(d),null;var p=ve(d,h);i(p);var f=ve(d,p);return f},o=function(c){var u=c.scrollJumpRequest;if(u){var d=xe(c.impact);d||I();var h=s(c.dimensions.droppables[d],u);if(h){var p=c.viewport,f=a(c.isWindowScrollAllowed,p,h);f&&r(c,f)}}};return o},yw=function(n){var t=n.scrollDroppable,e=n.scrollWindow,i=n.move,r=vw({scrollWindow:e,scrollDroppable:t}),s=bw({move:i,scrollWindow:e,scrollDroppable:t}),a=function(c){if(c.phase==="DRAGGING"){if(c.movementMode==="FLUID"){r.scroll(c);return}c.scrollJumpRequest&&s(c)}},o={scroll:a,start:r.start,stop:r.stop};return o},wi="data-rbd",Ai=function(){var n=wi+"-drag-handle";return{base:n,draggableId:n+"-draggable-id",contextId:n+"-context-id"}}(),co=function(){var n=wi+"-draggable";return{base:n,contextId:n+"-context-id",id:n+"-id"}}(),xw=function(){var n=wi+"-droppable";return{base:n,contextId:n+"-context-id",id:n+"-id"}}(),Lu={contextId:wi+"-scroll-container-context-id"},ww=function(t){return function(e){return"["+e+'="'+t+'"]'}},Fi=function(t,e){return t.map(function(i){var r=i.styles[e];return r?i.selector+" { "+r+" }":""}).join(" ")},Aw="pointer-events: none;",Ew=function(n){var t=ww(n),e=function(){var o=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Ai.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:o,dragging:Aw,dropAnimating:o}}}(),i=function(){var o=`
      transition: `+Vi.outOfTheWay+`;
    `;return{selector:t(co.contextId),styles:{dragging:o,dropAnimating:o,userCancel:o}}}(),r={selector:t(xw.contextId),styles:{always:"overflow-anchor: none;"}},s={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},a=[i,e,r,s];return{always:Fi(a,"always"),resting:Fi(a,"resting"),dragging:Fi(a,"dragging"),dropAnimating:Fi(a,"dropAnimating"),userCancel:Fi(a,"userCancel")}},we=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?A.useLayoutEffect:A.useEffect,Ea=function(){var t=document.querySelector("head");return t||I(),t},Nu=function(t){var e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.type="text/css",e};function Sw(n,t){var e=dt(function(){return Ew(n)},[n]),i=A.useRef(null),r=A.useRef(null),s=H(Ut(function(d){var h=r.current;h||I(),h.textContent=d}),[]),a=H(function(d){var h=i.current;h||I(),h.textContent=d},[]);we(function(){!i.current&&!r.current||I();var d=Nu(t),h=Nu(t);return i.current=d,r.current=h,d.setAttribute(wi+"-always",n),h.setAttribute(wi+"-dynamic",n),Ea().appendChild(d),Ea().appendChild(h),a(e.always),s(e.resting),function(){var p=function(m){var v=m.current;v||I(),Ea().removeChild(v),m.current=null};p(i),p(r)}},[t,a,s,e.always,e.resting,n]);var o=H(function(){return s(e.dragging)},[s,e.dragging]),l=H(function(d){if(d==="DROP"){s(e.dropAnimating);return}s(e.userCancel)},[s,e.dropAnimating,e.userCancel]),c=H(function(){r.current&&s(e.resting)},[s,e.resting]),u=dt(function(){return{dragging:o,dropping:l,resting:c}},[o,l,c]);return u}var Tp=function(n){return n&&n.ownerDocument?n.ownerDocument.defaultView:window};function Fs(n){return n instanceof Tp(n).HTMLElement}function Cw(n,t){var e="["+Ai.contextId+'="'+n+'"]',i=Kh(document.querySelectorAll(e));if(!i.length)return null;var r=Pn(i,function(s){return s.getAttribute(Ai.draggableId)===t});return!r||!Fs(r)?null:r}function _w(n){var t=A.useRef({}),e=A.useRef(null),i=A.useRef(null),r=A.useRef(!1),s=H(function(h,p){var f={id:h,focus:p};return t.current[h]=f,function(){var v=t.current,g=v[h];g!==f&&delete v[h]}},[]),a=H(function(h){var p=Cw(n,h);p&&p!==document.activeElement&&p.focus()},[n]),o=H(function(h,p){e.current===h&&(e.current=p)},[]),l=H(function(){i.current||r.current&&(i.current=requestAnimationFrame(function(){i.current=null;var h=e.current;h&&a(h)}))},[a]),c=H(function(h){e.current=null;var p=document.activeElement;p&&p.getAttribute(Ai.draggableId)===h&&(e.current=h)},[]);we(function(){return r.current=!0,function(){r.current=!1;var h=i.current;h&&cancelAnimationFrame(h)}},[]);var u=dt(function(){return{register:s,tryRecordFocus:c,tryRestoreFocusRecorded:l,tryShiftRecord:o}},[s,c,l,o]);return u}function Tw(){var n={draggables:{},droppables:{}},t=[];function e(d){return t.push(d),function(){var p=t.indexOf(d);p!==-1&&t.splice(p,1)}}function i(d){t.length&&t.forEach(function(h){return h(d)})}function r(d){return n.draggables[d]||null}function s(d){var h=r(d);return h||I(),h}var a={register:function(h){n.draggables[h.descriptor.id]=h,i({type:"ADDITION",value:h})},update:function(h,p){var f=n.draggables[p.descriptor.id];f&&f.uniqueId===h.uniqueId&&(delete n.draggables[p.descriptor.id],n.draggables[h.descriptor.id]=h)},unregister:function(h){var p=h.descriptor.id,f=r(p);f&&h.uniqueId===f.uniqueId&&(delete n.draggables[p],i({type:"REMOVAL",value:h}))},getById:s,findById:r,exists:function(h){return!!r(h)},getAllByType:function(h){return ss(n.draggables).filter(function(p){return p.descriptor.type===h})}};function o(d){return n.droppables[d]||null}function l(d){var h=o(d);return h||I(),h}var c={register:function(h){n.droppables[h.descriptor.id]=h},unregister:function(h){var p=o(h.descriptor.id);p&&h.uniqueId===p.uniqueId&&delete n.droppables[h.descriptor.id]},getById:l,findById:o,exists:function(h){return!!o(h)},getAllByType:function(h){return ss(n.droppables).filter(function(p){return p.descriptor.type===h})}};function u(){n.draggables={},n.droppables={},t.length=0}return{draggable:a,droppable:c,subscribe:e,clean:u}}function Rw(){var n=dt(Tw,[]);return A.useEffect(function(){return function(){requestAnimationFrame(n.clean)}},[n]),n}var ml=et.createContext(null),os=function(){var n=document.body;return n||I(),n},Dw={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Pw=function(t){return"rbd-announcement-"+t};function Iw(n){var t=dt(function(){return Pw(n)},[n]),e=A.useRef(null);A.useEffect(function(){var s=document.createElement("div");return e.current=s,s.id=t,s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true"),G(s.style,Dw),os().appendChild(s),function(){setTimeout(function(){var l=os();l.contains(s)&&l.removeChild(s),s===e.current&&(e.current=null)})}},[t]);var i=H(function(r){var s=e.current;if(s){s.textContent=r;return}},[]);return i}var kw=0,Ow={separator:"::"};function gl(n,t){return t===void 0&&(t=Ow),dt(function(){return""+n+t.separator+kw++},[t.separator,n])}function Mw(n){var t=n.contextId,e=n.uniqueId;return"rbd-hidden-text-"+t+"-"+e}function Lw(n){var t=n.contextId,e=n.text,i=gl("hidden-text",{separator:"-"}),r=dt(function(){return Mw({contextId:t,uniqueId:i})},[i,t]);return A.useEffect(function(){var a=document.createElement("div");return a.id=r,a.textContent=e,a.style.display="none",os().appendChild(a),function(){var l=os();l.contains(a)&&l.removeChild(a)}},[r,e]),r}var Bs=et.createContext(null);function Rp(n){var t=A.useRef(n);return A.useEffect(function(){t.current=n}),t}function Nw(){var n=null;function t(){return!!n}function e(a){return a===n}function i(a){n&&I();var o={abandon:a};return n=o,o}function r(){n||I(),n=null}function s(){n&&(n.abandon(),r())}return{isClaimed:t,isActive:e,claim:i,release:r,tryAbandon:s}}var Fw=9,Bw=13,vl=27,Dp=32,jw=33,$w=34,zw=35,Hw=36,Uw=37,qw=38,Gw=39,Ww=40,Dr,Vw=(Dr={},Dr[Bw]=!0,Dr[Fw]=!0,Dr),Pp=function(n){Vw[n.keyCode]&&n.preventDefault()},js=function(){var n="visibilitychange";if(typeof document>"u")return n;var t=[n,"ms"+n,"webkit"+n,"moz"+n,"o"+n],e=Pn(t,function(i){return"on"+i in document});return e||n}(),Ip=0,Fu=5;function Xw(n,t){return Math.abs(t.x-n.x)>=Fu||Math.abs(t.y-n.y)>=Fu}var Bu={type:"IDLE"};function Kw(n){var t=n.cancel,e=n.completed,i=n.getPhase,r=n.setPhase;return[{eventName:"mousemove",fn:function(a){var o=a.button,l=a.clientX,c=a.clientY;if(o===Ip){var u={x:l,y:c},d=i();if(d.type==="DRAGGING"){a.preventDefault(),d.actions.move(u);return}d.type!=="PENDING"&&I();var h=d.point;if(Xw(h,u)){a.preventDefault();var p=d.actions.fluidLift(u);r({type:"DRAGGING",actions:p})}}}},{eventName:"mouseup",fn:function(a){var o=i();if(o.type!=="DRAGGING"){t();return}a.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"mousedown",fn:function(a){i().type==="DRAGGING"&&a.preventDefault(),t()}},{eventName:"keydown",fn:function(a){var o=i();if(o.type==="PENDING"){t();return}if(a.keyCode===vl){a.preventDefault(),t();return}Pp(a)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){i().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(a){var o=i();if(o.type==="IDLE"&&I(),o.actions.shouldRespectForcePress()){t();return}a.preventDefault()}},{eventName:js,fn:t}]}function Yw(n){var t=A.useRef(Bu),e=A.useRef(wn),i=dt(function(){return{eventName:"mousedown",fn:function(d){if(!d.defaultPrevented&&d.button===Ip&&!(d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)){var h=n.findClosestDraggableId(d);if(h){var p=n.tryGetLock(h,a,{sourceEvent:d});if(p){d.preventDefault();var f={x:d.clientX,y:d.clientY};e.current(),c(p,f)}}}}}},[n]),r=dt(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(d){if(!d.defaultPrevented){var h=n.findClosestDraggableId(d);if(h){var p=n.findOptionsForDraggable(h);p&&(p.shouldRespectForcePress||n.canGetLock(h)&&d.preventDefault())}}}}},[n]),s=H(function(){var d={passive:!1,capture:!0};e.current=Oe(window,[r,i],d)},[r,i]),a=H(function(){var u=t.current;u.type!=="IDLE"&&(t.current=Bu,e.current(),s())},[s]),o=H(function(){var u=t.current;a(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[a]),l=H(function(){var d={capture:!0,passive:!1},h=Kw({cancel:o,completed:a,getPhase:function(){return t.current},setPhase:function(f){t.current=f}});e.current=Oe(window,h,d)},[o,a]),c=H(function(d,h){t.current.type!=="IDLE"&&I(),t.current={type:"PENDING",point:h,actions:d},l()},[l]);we(function(){return s(),function(){e.current()}},[s])}var ai;function Jw(){}var Qw=(ai={},ai[$w]=!0,ai[jw]=!0,ai[Hw]=!0,ai[zw]=!0,ai);function Zw(n,t){function e(){t(),n.cancel()}function i(){t(),n.drop()}return[{eventName:"keydown",fn:function(s){if(s.keyCode===vl){s.preventDefault(),e();return}if(s.keyCode===Dp){s.preventDefault(),i();return}if(s.keyCode===Ww){s.preventDefault(),n.moveDown();return}if(s.keyCode===qw){s.preventDefault(),n.moveUp();return}if(s.keyCode===Gw){s.preventDefault(),n.moveRight();return}if(s.keyCode===Uw){s.preventDefault(),n.moveLeft();return}if(Qw[s.keyCode]){s.preventDefault();return}Pp(s)}},{eventName:"mousedown",fn:e},{eventName:"mouseup",fn:e},{eventName:"click",fn:e},{eventName:"touchstart",fn:e},{eventName:"resize",fn:e},{eventName:"wheel",fn:e,options:{passive:!0}},{eventName:js,fn:e}]}function t3(n){var t=A.useRef(Jw),e=dt(function(){return{eventName:"keydown",fn:function(s){if(s.defaultPrevented||s.keyCode!==Dp)return;var a=n.findClosestDraggableId(s);if(!a)return;var o=n.tryGetLock(a,u,{sourceEvent:s});if(!o)return;s.preventDefault();var l=!0,c=o.snapLift();t.current();function u(){l||I(),l=!1,t.current(),i()}t.current=Oe(window,Zw(c,u),{capture:!0,passive:!1})}}},[n]),i=H(function(){var s={passive:!1,capture:!0};t.current=Oe(window,[e],s)},[e]);we(function(){return i(),function(){t.current()}},[i])}var Sa={type:"IDLE"},e3=120,n3=.15;function i3(n){var t=n.cancel,e=n.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(r){r.preventDefault()}},{eventName:"keydown",fn:function(r){if(e().type!=="DRAGGING"){t();return}r.keyCode===vl&&r.preventDefault(),t()}},{eventName:js,fn:t}]}function r3(n){var t=n.cancel,e=n.completed,i=n.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(s){var a=i();if(a.type!=="DRAGGING"){t();return}a.hasMoved=!0;var o=s.touches[0],l=o.clientX,c=o.clientY,u={x:l,y:c};s.preventDefault(),a.actions.move(u)}},{eventName:"touchend",fn:function(s){var a=i();if(a.type!=="DRAGGING"){t();return}s.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"touchcancel",fn:function(s){if(i().type!=="DRAGGING"){t();return}s.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(s){var a=i();a.type==="IDLE"&&I();var o=s.touches[0];if(o){var l=o.force>=n3;if(l){var c=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){c&&t();return}if(c){if(a.hasMoved){s.preventDefault();return}t();return}s.preventDefault()}}}},{eventName:js,fn:t}]}function s3(n){var t=A.useRef(Sa),e=A.useRef(wn),i=H(function(){return t.current},[]),r=H(function(p){t.current=p},[]),s=dt(function(){return{eventName:"touchstart",fn:function(p){if(!p.defaultPrevented){var f=n.findClosestDraggableId(p);if(f){var m=n.tryGetLock(f,o,{sourceEvent:p});if(m){var v=p.touches[0],g=v.clientX,b=v.clientY,y={x:g,y:b};e.current(),d(m,y)}}}}}},[n]),a=H(function(){var p={capture:!0,passive:!1};e.current=Oe(window,[s],p)},[s]),o=H(function(){var h=t.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),r(Sa),e.current(),a())},[a,r]),l=H(function(){var h=t.current;o(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[o]),c=H(function(){var p={capture:!0,passive:!1},f={cancel:l,completed:o,getPhase:i},m=Oe(window,r3(f),p),v=Oe(window,i3(f),p);e.current=function(){m(),v()}},[l,i,o]),u=H(function(){var p=i();p.type!=="PENDING"&&I();var f=p.actions.fluidLift(p.point);r({type:"DRAGGING",actions:f,hasMoved:!1})},[i,r]),d=H(function(p,f){i().type!=="IDLE"&&I();var m=setTimeout(u,e3);r({type:"PENDING",point:f,actions:p,longPressTimerId:m}),c()},[c,i,r,u]);we(function(){return a(),function(){e.current();var f=i();f.type==="PENDING"&&(clearTimeout(f.longPressTimerId),r(Sa))}},[i,a,r]),we(function(){var p=Oe(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return p},[])}var a3={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function kp(n,t){if(t==null)return!1;var e=!!a3[t.tagName.toLowerCase()];if(e)return!0;var i=t.getAttribute("contenteditable");return i==="true"||i===""?!0:t===n?!1:kp(n,t.parentElement)}function o3(n,t){var e=t.target;return Fs(e)?kp(n,e):!1}var l3=function(n){return $e(n.getBoundingClientRect()).center};function c3(n){return n instanceof Tp(n).Element}var u3=function(){var n="matches";if(typeof document>"u")return n;var t=[n,"msMatchesSelector","webkitMatchesSelector"],e=Pn(t,function(i){return i in Element.prototype});return e||n}();function Op(n,t){return n==null?null:n[u3](t)?n:Op(n.parentElement,t)}function d3(n,t){return n.closest?n.closest(t):Op(n,t)}function h3(n){return"["+Ai.contextId+'="'+n+'"]'}function p3(n,t){var e=t.target;if(!c3(e))return null;var i=h3(n),r=d3(e,i);return!r||!Fs(r)?null:r}function f3(n,t){var e=p3(n,t);return e?e.getAttribute(Ai.draggableId):null}function m3(n,t){var e="["+co.contextId+'="'+n+'"]',i=Kh(document.querySelectorAll(e)),r=Pn(i,function(s){return s.getAttribute(co.id)===t});return!r||!Fs(r)?null:r}function g3(n){n.preventDefault()}function Pr(n){var t=n.expected,e=n.phase,i=n.isLockActive;return n.shouldWarn,!(!i()||t!==e)}function Mp(n){var t=n.lockAPI,e=n.store,i=n.registry,r=n.draggableId;if(t.isClaimed())return!1;var s=i.draggable.findById(r);return!(!s||!s.options.isEnabled||!Ep(e.getState(),r))}function v3(n){var t=n.lockAPI,e=n.contextId,i=n.store,r=n.registry,s=n.draggableId,a=n.forceSensorStop,o=n.sourceEvent,l=Mp({lockAPI:t,store:i,registry:r,draggableId:s});if(!l)return null;var c=r.draggable.getById(s),u=m3(e,c.descriptor.id);if(!u||o&&!c.options.canDragInteractiveElements&&o3(u,o))return null;var d=t.claim(a||wn),h="PRE_DRAG";function p(){return c.options.shouldRespectForcePress}function f(){return t.isActive(d)}function m(E,S){Pr({expected:E,phase:h,isLockActive:f,shouldWarn:!0})&&i.dispatch(S())}var v=m.bind(null,"DRAGGING");function g(E){function S(){t.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(S(),h!=="PRE_DRAG"&&I()),i.dispatch(ux(E.liftActionArgs)),h="DRAGGING";function D(T,L){if(L===void 0&&(L={shouldBlockNextClick:!1}),E.cleanup(),L.shouldBlockNextClick){var k=Oe(window,[{eventName:"click",fn:g3,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(k)}S(),i.dispatch(gp({reason:T}))}return G({isActive:function(){return Pr({expected:"DRAGGING",phase:h,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(L){return D("DROP",L)},cancel:function(L){return D("CANCEL",L)}},E.actions)}function b(E){var S=er(function(T){v(function(){return mp({client:T})})}),D=g({liftActionArgs:{id:s,clientSelection:E,movementMode:"FLUID"},cleanup:function(){return S.cancel()},actions:{move:S}});return G({},D,{move:S})}function y(){var E={moveUp:function(){return v(yx)},moveRight:function(){return v(wx)},moveDown:function(){return v(xx)},moveLeft:function(){return v(Ax)}};return g({liftActionArgs:{id:s,clientSelection:l3(u),movementMode:"SNAP"},cleanup:wn,actions:E})}function w(){var E=Pr({expected:"PRE_DRAG",phase:h,isLockActive:f,shouldWarn:!0});E&&t.release()}var x={isActive:function(){return Pr({expected:"PRE_DRAG",phase:h,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:b,snapLift:y,abort:w};return x}var b3=[Yw,t3,s3];function y3(n){var t=n.contextId,e=n.store,i=n.registry,r=n.customSensors,s=n.enableDefaultSensors,a=[].concat(s?b3:[],r||[]),o=A.useState(function(){return Nw()})[0],l=H(function(b,y){b.isDragging&&!y.isDragging&&o.tryAbandon()},[o]);we(function(){var b=e.getState(),y=e.subscribe(function(){var w=e.getState();l(b,w),b=w});return y},[o,e,l]),we(function(){return o.tryAbandon},[o.tryAbandon]);for(var c=H(function(g){return Mp({lockAPI:o,registry:i,store:e,draggableId:g})},[o,i,e]),u=H(function(g,b,y){return v3({lockAPI:o,registry:i,contextId:t,store:e,draggableId:g,forceSensorStop:b,sourceEvent:y&&y.sourceEvent?y.sourceEvent:null})},[t,o,i,e]),d=H(function(g){return f3(t,g)},[t]),h=H(function(g){var b=i.draggable.findById(g);return b?b.options:null},[i.draggable]),p=H(function(){o.isClaimed()&&(o.tryAbandon(),e.getState().phase!=="IDLE"&&e.dispatch(ol()))},[o,e]),f=H(o.isClaimed,[o]),m=dt(function(){return{canGetLock:c,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:h,tryReleaseLock:p,isLockClaimed:f}},[c,u,d,h,p,f]),v=0;v<a.length;v++)a[v](m)}var x3=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function Bi(n){return n.current||I(),n.current}function w3(n){var t=n.contextId,e=n.setCallbacks,i=n.sensors,r=n.nonce,s=n.dragHandleUsageInstructions,a=A.useRef(null),o=Rp(n),l=H(function(){return x3(o.current)},[o]),c=Iw(t),u=Lw({contextId:t,text:s}),d=Sw(t,r),h=H(function(T){Bi(a).dispatch(T)},[]),p=dt(function(){return su({publishWhileDragging:hx,updateDroppableScroll:fx,updateDroppableIsEnabled:mx,updateDroppableIsCombineEnabled:gx,collectionStarting:px},h)},[h]),f=Rw(),m=dt(function(){return nw(f,p)},[f,p]),v=dt(function(){return yw(G({scrollWindow:iw,scrollDroppable:m.scrollDroppable},su({move:mp},h)))},[m.scrollDroppable,h]),g=_w(t),b=dt(function(){return Qx({announce:c,autoScroller:v,dimensionMarshal:m,focusMarshal:g,getResponders:l,styleMarshal:d})},[c,v,m,g,l,d]);a.current=b;var y=H(function(){var T=Bi(a),L=T.getState();L.phase!=="IDLE"&&T.dispatch(ol())},[]),w=H(function(){var T=Bi(a).getState();return T.isDragging||T.phase==="DROP_ANIMATING"},[]),x=dt(function(){return{isDragging:w,tryAbort:y}},[w,y]);e(x);var E=H(function(T){return Ep(Bi(a).getState(),T)},[]),S=H(function(){return Fn(Bi(a).getState())},[]),D=dt(function(){return{marshal:m,focus:g,contextId:t,canLift:E,isMovementAllowed:S,dragHandleUsageInstructionsId:u,registry:f}},[t,m,u,g,E,S,f]);return y3({contextId:t,store:b,registry:f,customSensors:i,enableDefaultSensors:n.enableDefaultSensors!==!1}),A.useEffect(function(){return y},[y]),et.createElement(Bs.Provider,{value:D},et.createElement(oy,{context:ml,store:b},n.children))}var A3=0;function E3(){return dt(function(){return""+A3++},[])}function S3(n){var t=E3(),e=n.dragHandleUsageInstructions||Br.dragHandleUsageInstructions;return et.createElement(t2,null,function(i){return et.createElement(w3,{nonce:n.nonce,contextId:t,setCallbacks:i,dragHandleUsageInstructions:e,enableDefaultSensors:n.enableDefaultSensors,sensors:n.sensors,onBeforeCapture:n.onBeforeCapture,onBeforeDragStart:n.onBeforeDragStart,onDragStart:n.onDragStart,onDragUpdate:n.onDragUpdate,onDragEnd:n.onDragEnd},n.children)})}var Lp=function(t){return function(e){return t===e}},C3=Lp("scroll"),_3=Lp("auto"),ju=function(t,e){return e(t.overflowX)||e(t.overflowY)},T3=function(t){var e=window.getComputedStyle(t),i={overflowX:e.overflowX,overflowY:e.overflowY};return ju(i,C3)||ju(i,_3)},R3=function(){return!1},D3=function n(t){return t==null?null:t===document.body?R3()?t:null:t===document.documentElement?null:T3(t)?t:n(t.parentElement)},uo=function(n){return{x:n.scrollLeft,y:n.scrollTop}},P3=function n(t){if(!t)return!1;var e=window.getComputedStyle(t);return e.position==="fixed"?!0:n(t.parentElement)},I3=function(n){var t=D3(n),e=P3(n);return{closestScrollable:t,isFixedOnPage:e}},k3=function(n){var t=n.descriptor,e=n.isEnabled,i=n.isCombineEnabled,r=n.isFixedOnPage,s=n.direction,a=n.client,o=n.page,l=n.closest,c=function(){if(!l)return null;var p=l.scrollSize,f=l.client,m=xp({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:f.paddingBox.height,width:f.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:f,scrollSize:p,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:m,diff:{value:qt,displacement:qt}}}}(),u=s==="vertical"?nl:tp,d=xi({page:o,withPlaceholder:null,axis:u,frame:c}),h={descriptor:t,isCombineEnabled:i,isFixedOnPage:r,axis:u,isEnabled:e,client:a,page:o,frame:c,subject:d};return h},O3=function(t,e){var i=qh(t);if(!e||t!==e)return i;var r=i.paddingBox.top-e.scrollTop,s=i.paddingBox.left-e.scrollLeft,a=r+e.scrollHeight,o=s+e.scrollWidth,l={top:r,right:o,bottom:a,left:s},c=Jo(l,i.border),u=Qo({borderBox:c,margin:i.margin,border:i.border,padding:i.padding});return u},M3=function(n){var t=n.ref,e=n.descriptor,i=n.env,r=n.windowScroll,s=n.direction,a=n.isDropDisabled,o=n.isCombineEnabled,l=n.shouldClipSubject,c=i.closestScrollable,u=O3(t,c),d=ns(u,r),h=function(){if(!c)return null;var f=qh(c),m={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:f,page:ns(f,r),scroll:uo(c),scrollSize:m,shouldClipSubject:l}}(),p=k3({descriptor:e,isEnabled:!a,isCombineEnabled:o,isFixedOnPage:i.isFixedOnPage,direction:s,client:u,page:d,closest:h});return p},L3={passive:!1},N3={passive:!0},$u=function(n){return n.shouldPublishImmediately?L3:N3};function ls(n){var t=A.useContext(n);return t||I(),t}var Ir=function(t){return t&&t.env.closestScrollable||null};function F3(n){var t=A.useRef(null),e=ls(Bs),i=gl("droppable"),r=e.registry,s=e.marshal,a=Rp(n),o=dt(function(){return{id:n.droppableId,type:n.type,mode:n.mode}},[n.droppableId,n.mode,n.type]),l=A.useRef(o),c=dt(function(){return Ut(function(w,x){t.current||I();var E={x:w,y:x};s.updateDroppableScroll(o.id,E)})},[o.id,s]),u=H(function(){var w=t.current;return!w||!w.env.closestScrollable?qt:uo(w.env.closestScrollable)},[]),d=H(function(){var w=u();c(w.x,w.y)},[u,c]),h=dt(function(){return er(d)},[d]),p=H(function(){var w=t.current,x=Ir(w);w&&x||I();var E=w.scrollOptions;if(E.shouldPublishImmediately){d();return}h()},[h,d]),f=H(function(w,x){t.current&&I();var E=a.current,S=E.getDroppableRef();S||I();var D=I3(S),T={ref:S,descriptor:o,env:D,scrollOptions:x};t.current=T;var L=M3({ref:S,descriptor:o,env:D,windowScroll:w,direction:E.direction,isDropDisabled:E.isDropDisabled,isCombineEnabled:E.isCombineEnabled,shouldClipSubject:!E.ignoreContainerClipping}),k=D.closestScrollable;return k&&(k.setAttribute(Lu.contextId,e.contextId),k.addEventListener("scroll",p,$u(T.scrollOptions))),L},[e.contextId,o,p,a]),m=H(function(){var w=t.current,x=Ir(w);return w&&x||I(),uo(x)},[]),v=H(function(){var w=t.current;w||I();var x=Ir(w);t.current=null,x&&(h.cancel(),x.removeAttribute(Lu.contextId),x.removeEventListener("scroll",p,$u(w.scrollOptions)))},[p,h]),g=H(function(w){var x=t.current;x||I();var E=Ir(x);E||I(),E.scrollTop+=w.y,E.scrollLeft+=w.x},[]),b=dt(function(){return{getDimensionAndWatchScroll:f,getScrollWhileDragging:m,dragStopped:v,scroll:g}},[v,f,m,g]),y=dt(function(){return{uniqueId:i,descriptor:o,callbacks:b}},[b,o,i]);we(function(){return l.current=y.descriptor,r.droppable.register(y),function(){t.current&&v(),r.droppable.unregister(y)}},[b,o,v,y,s,r.droppable]),we(function(){t.current&&s.updateDroppableIsEnabled(l.current.id,!n.isDropDisabled)},[n.isDropDisabled,s]),we(function(){t.current&&s.updateDroppableIsCombineEnabled(l.current.id,n.isCombineEnabled)},[n.isCombineEnabled,s])}function Ca(){}var zu={width:0,height:0,margin:a2},B3=function(t){var e=t.isAnimatingOpenOnMount,i=t.placeholder,r=t.animate;return e||r==="close"?zu:{height:i.client.borderBox.height,width:i.client.borderBox.width,margin:i.client.margin}},j3=function(t){var e=t.isAnimatingOpenOnMount,i=t.placeholder,r=t.animate,s=B3({isAnimatingOpenOnMount:e,placeholder:i,animate:r});return{display:i.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?Vi.placeholder:null}};function $3(n){var t=A.useRef(null),e=H(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),i=n.animate,r=n.onTransitionEnd,s=n.onClose,a=n.contextId,o=A.useState(n.animate==="open"),l=o[0],c=o[1];A.useEffect(function(){return l?i!=="open"?(e(),c(!1),Ca):t.current?Ca:(t.current=setTimeout(function(){t.current=null,c(!1)}),e):Ca},[i,l,e]);var u=H(function(h){h.propertyName==="height"&&(r(),i==="close"&&s())},[i,s,r]),d=j3({isAnimatingOpenOnMount:l,animate:n.animate,placeholder:n.placeholder});return et.createElement(n.placeholder.tagName,{style:d,"data-rbd-placeholder-context-id":a,onTransitionEnd:u,ref:n.innerRef})}var z3=et.memo($3),bl=et.createContext(null),H3=function(n){Ko(t,n);function t(){for(var i,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return i=n.call.apply(n,[this].concat(s))||this,i.state={isVisible:!!i.props.on,data:i.props.on,animate:i.props.shouldAnimate&&i.props.on?"open":"none"},i.onClose=function(){i.state.animate==="close"&&i.setState({isVisible:!1})},i}t.getDerivedStateFromProps=function(r,s){return r.shouldAnimate?r.on?{isVisible:!0,data:r.on,animate:"open"}:s.isVisible?{isVisible:!0,data:s.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!r.on,data:r.on,animate:"none"}};var e=t.prototype;return e.render=function(){if(!this.state.isVisible)return null;var r={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(r)},t}(et.PureComponent),Hu={dragging:5e3,dropAnimating:4500},U3=function(t,e){return e?Vi.drop(e.duration):t?Vi.snap:Vi.fluid},q3=function(t,e){return t?e?sr.opacity.drop:sr.opacity.combining:null},G3=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function W3(n){var t=n.dimension,e=t.client,i=n.offset,r=n.combineWith,s=n.dropping,a=!!r,o=G3(n),l=!!s,c=l?oo.drop(i,a):oo.moveTo(i),u={position:"fixed",top:e.marginBox.top,left:e.marginBox.left,boxSizing:"border-box",width:e.borderBox.width,height:e.borderBox.height,transition:U3(o,s),transform:c,opacity:q3(a,l),zIndex:l?Hu.dropAnimating:Hu.dragging,pointerEvents:"none"};return u}function V3(n){return{transform:oo.moveTo(n.offset),transition:n.shouldAnimateDisplacement?null:"none"}}function X3(n){return n.type==="DRAGGING"?W3(n):V3(n)}function K3(n,t,e){e===void 0&&(e=qt);var i=window.getComputedStyle(t),r=t.getBoundingClientRect(),s=Uh(r,i),a=ns(s,e),o={client:s,tagName:t.tagName.toLowerCase(),display:i.display},l={x:s.marginBox.width,y:s.marginBox.height},c={descriptor:n,placeholder:o,displaceBy:l,client:s,page:a};return c}function Y3(n){var t=gl("draggable"),e=n.descriptor,i=n.registry,r=n.getDraggableRef,s=n.canDragInteractiveElements,a=n.shouldRespectForcePress,o=n.isEnabled,l=dt(function(){return{canDragInteractiveElements:s,shouldRespectForcePress:a,isEnabled:o}},[s,o,a]),c=H(function(p){var f=r();return f||I(),K3(e,f,p)},[e,r]),u=dt(function(){return{uniqueId:t,descriptor:e,options:l,getDimension:c}},[e,c,l,t]),d=A.useRef(u),h=A.useRef(!0);we(function(){return i.draggable.register(d.current),function(){return i.draggable.unregister(d.current)}},[i.draggable]),we(function(){if(h.current){h.current=!1;return}var p=d.current;d.current=u,i.draggable.update(u,p)},[u,i.draggable])}function J3(n){n.preventDefault()}function Q3(n){var t=A.useRef(null),e=H(function(T){t.current=T},[]),i=H(function(){return t.current},[]),r=ls(Bs),s=r.contextId,a=r.dragHandleUsageInstructionsId,o=r.registry,l=ls(bl),c=l.type,u=l.droppableId,d=dt(function(){return{id:n.draggableId,index:n.index,type:c,droppableId:u}},[n.draggableId,n.index,c,u]),h=n.children,p=n.draggableId,f=n.isEnabled,m=n.shouldRespectForcePress,v=n.canDragInteractiveElements,g=n.isClone,b=n.mapped,y=n.dropAnimationFinished;if(!g){var w=dt(function(){return{descriptor:d,registry:o,getDraggableRef:i,canDragInteractiveElements:v,shouldRespectForcePress:m,isEnabled:f}},[d,o,i,v,m,f]);Y3(w)}var x=dt(function(){return f?{tabIndex:0,role:"button","aria-describedby":a,"data-rbd-drag-handle-draggable-id":p,"data-rbd-drag-handle-context-id":s,draggable:!1,onDragStart:J3}:null},[s,a,p,f]),E=H(function(T){b.type==="DRAGGING"&&b.dropping&&T.propertyName==="transform"&&y()},[y,b]),S=dt(function(){var T=X3(b),L=b.type==="DRAGGING"&&b.dropping?E:null,k={innerRef:e,draggableProps:{"data-rbd-draggable-context-id":s,"data-rbd-draggable-id":p,style:T,onTransitionEnd:L},dragHandleProps:x};return k},[s,x,p,b,E,e]),D=dt(function(){return{draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}},[d.droppableId,d.id,d.index,d.type]);return h(S,b.snapshot,D)}var Np=function(n,t){return n===t},Fp=function(n){var t=n.combine,e=n.destination;return e?e.droppableId:t?t.droppableId:null},Z3=function(t){return t.combine?t.combine.draggableId:null},tA=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function eA(){var n=Ut(function(r,s){return{x:r,y:s}}),t=Ut(function(r,s,a,o,l){return{isDragging:!0,isClone:s,isDropAnimating:!!l,dropAnimation:l,mode:r,draggingOver:a,combineWith:o,combineTargetFor:null}}),e=Ut(function(r,s,a,o,l,c,u){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:c,mode:s,offset:r,dimension:a,forceShouldAnimate:u,snapshot:t(s,o,l,c,null)}}}),i=function(s,a){if(s.isDragging){if(s.critical.draggable.id!==a.draggableId)return null;var o=s.current.client.offset,l=s.dimensions.draggables[a.draggableId],c=xe(s.impact),u=tA(s.impact),d=s.forceShouldAnimate;return e(n(o.x,o.y),s.movementMode,l,a.isClone,c,u,d)}if(s.phase==="DROP_ANIMATING"){var h=s.completed;if(h.result.draggableId!==a.draggableId)return null;var p=a.isClone,f=s.dimensions.draggables[a.draggableId],m=h.result,v=m.mode,g=Fp(m),b=Z3(m),y=s.dropDuration,w={duration:y,curve:cl.drop,moveTo:s.newHomeClientOffset,opacity:b?sr.opacity.drop:null,scale:b?sr.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:f,dropping:w,draggingOver:g,combineWith:b,mode:v,forceShouldAnimate:null,snapshot:t(v,p,g,b,w)}}}return null};return i}function Bp(n){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:n,combineWith:null}}var nA={mapped:{type:"SECONDARY",offset:qt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Bp(null)}};function iA(){var n=Ut(function(a,o){return{x:a,y:o}}),t=Ut(Bp),e=Ut(function(a,o,l){return o===void 0&&(o=null),{mapped:{type:"SECONDARY",offset:a,combineTargetFor:o,shouldAnimateDisplacement:l,snapshot:t(o)}}}),i=function(o){return o?e(qt,o,!0):null},r=function(o,l,c,u){var d=c.displaced.visible[o],h=!!(u.inVirtualList&&u.effected[o]),p=Ms(c),f=p&&p.draggableId===o?l:null;if(!d){if(!h)return i(f);if(c.displaced.invisible[o])return null;var m=_i(u.displacedBy.point),v=n(m.x,m.y);return e(v,f,!0)}if(h)return i(f);var g=c.displacedBy.point,b=n(g.x,g.y);return e(b,f,d.shouldAnimate)},s=function(o,l){if(o.isDragging)return o.critical.draggable.id===l.draggableId?null:r(l.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){var c=o.completed;return c.result.draggableId===l.draggableId?null:r(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null};return s}var rA=function(){var t=eA(),e=iA(),i=function(s,a){return t(s,a)||e(s,a)||nA};return i},sA={dropAnimationFinished:vp},aA=$h(rA,sA,null,{context:ml,pure:!0,areStatePropsEqual:Np})(Q3);function jp(n){var t=ls(bl),e=t.isUsingCloneFor;return e===n.draggableId&&!n.isClone?null:et.createElement(aA,n)}function oA(n){var t=typeof n.isDragDisabled=="boolean"?!n.isDragDisabled:!0,e=!!n.disableInteractiveElementBlocking,i=!!n.shouldRespectForcePress;return et.createElement(jp,G({},n,{isClone:!1,isEnabled:t,canDragInteractiveElements:e,shouldRespectForcePress:i}))}function lA(n){var t=A.useContext(Bs);t||I();var e=t.contextId,i=t.isMovementAllowed,r=A.useRef(null),s=A.useRef(null),a=n.children,o=n.droppableId,l=n.type,c=n.mode,u=n.direction,d=n.ignoreContainerClipping,h=n.isDropDisabled,p=n.isCombineEnabled,f=n.snapshot,m=n.useClone,v=n.updateViewportMaxScroll,g=n.getContainerForClone,b=H(function(){return r.current},[]),y=H(function(k){r.current=k},[]);H(function(){return s.current},[]);var w=H(function(k){s.current=k},[]),x=H(function(){i()&&v({maxScroll:Ap()})},[i,v]);F3({droppableId:o,type:l,mode:c,direction:u,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:d,getDroppableRef:b});var E=et.createElement(H3,{on:n.placeholder,shouldAnimate:n.shouldAnimatePlaceholder},function(k){var j=k.onClose,R=k.data,P=k.animate;return et.createElement(z3,{placeholder:R,onClose:j,innerRef:w,animate:P,contextId:e,onTransitionEnd:x})}),S=dt(function(){return{innerRef:y,placeholder:E,droppableProps:{"data-rbd-droppable-id":o,"data-rbd-droppable-context-id":e}}},[e,o,E,y]),D=m?m.dragging.draggableId:null,T=dt(function(){return{droppableId:o,type:l,isUsingCloneFor:D}},[o,D,l]);function L(){if(!m)return null;var k=m.dragging,j=m.render,R=et.createElement(jp,{draggableId:k.draggableId,index:k.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(P,U){return j(P,U,k)});return ui.createPortal(R,g())}return et.createElement(bl.Provider,{value:T},a(S,f),L())}var _a=function(t,e){return t===e.droppable.type},Uu=function(t,e){return e.draggables[t.draggable.id]},cA=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},e=G({},t,{shouldAnimatePlaceholder:!1}),i=Ut(function(a){return{draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}}}),r=Ut(function(a,o,l,c,u,d){var h=u.descriptor.id,p=u.descriptor.droppableId===a;if(p){var f=d?{render:d,dragging:i(u.descriptor)}:null,m={isDraggingOver:l,draggingOverWith:l?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:m,useClone:f}}if(!o)return e;if(!c)return t;var v={isDraggingOver:l,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:v,useClone:null}}),s=function(o,l){var c=l.droppableId,u=l.type,d=!l.isDropDisabled,h=l.renderClone;if(o.isDragging){var p=o.critical;if(!_a(u,p))return e;var f=Uu(p,o.dimensions),m=xe(o.impact)===c;return r(c,d,m,m,f,h)}if(o.phase==="DROP_ANIMATING"){var v=o.completed;if(!_a(u,v.critical))return e;var g=Uu(v.critical,o.dimensions);return r(c,d,Fp(v.result)===c,xe(v.impact)===c,g,h)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){var b=o.completed;if(!_a(u,b.critical))return e;var y=xe(b.impact)===c,w=!!(b.impact.at&&b.impact.at.type==="COMBINE"),x=b.critical.droppable.id===c;return y?w?t:e:x?t:e}return e};return s},uA={updateViewportMaxScroll:bx};function dA(){return document.body||I(),document.body}var hA={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:dA},$p=$h(cA,uA,null,{context:ml,pure:!0,areStatePropsEqual:Np})(lA);$p.defaultProps=hA;const pA=({errors:n,extension:t,toolTipSizes:e,loader_text:i,showSpinner:r,fileDetailProps:s,path:a})=>{const{files:o,imageUrls:l,setImageUrls:c}=Dn();A.useEffect(()=>{},[o]);const u=d=>{d.destination&&jc(t,a)};return C.jsx(C.Fragment,{children:C.jsx(S3,{onDragEnd:u,children:C.jsx($p,{droppableId:"imageUrls",direction:"horizontal",children:(d,h)=>C.jsxs("div",{className:`display-file ${h.isDraggingOver?"dragging-over":""}`,...d.droppableProps,ref:d.innerRef,children:[o.map((p,f)=>C.jsx(oA,{draggableId:p.name,index:f,isDragDisabled:!jc(t,a),children:(m,v)=>C.jsx("div",{...m.draggableProps,ref:m.innerRef,className:`drag-element ${v.isDragging?"dragging":""}`,style:{...m.draggableProps.style},children:t===".jpg"?C.jsx(Vb,{index:f,provided:m,extension:t,errors:n,fileDetailProps:s,file:p,loader_text:i}):C.jsx(Jb,{extension:t,file:p,index:f,errors:n,loader_text:i,fileDetailProps:s})})},p.name)),d.placeholder]})})})})},fA=({extension:n,pages:t,page:e,lang:i,errors:r,edit_page:s,path:a})=>{const[o,l]=A.useState(!0),[c,u]=A.useState([]);return Dn(),qe(),A.useEffect(()=>()=>{},[n]),C.jsx(C.Fragment,{children:C.jsx(pA,{errors:r,extension:n,setToolTipSizes:u,toolTipSizes:c,loader_text:s.loader_text,showSpinner:o,fileDetailProps:[t,e,i],path:a})})};function qu(n){return"default"+n.charAt(0).toUpperCase()+n.substr(1)}function mA(n){var t=gA(n,"string");return typeof t=="symbol"?t:String(t)}function gA(n,t){if(typeof n!="object"||n===null)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function vA(n,t,e){var i=A.useRef(n!==void 0),r=A.useState(t),s=r[0],a=r[1],o=n!==void 0,l=i.current;return i.current=o,!o&&l&&s!==t&&a(t),[o?n:s,A.useCallback(function(c){for(var u=arguments.length,d=new Array(u>1?u-1:0),h=1;h<u;h++)d[h-1]=arguments[h];e&&e.apply(void 0,[c].concat(d)),a(c)},[e])]}function bA(n,t){return Object.keys(t).reduce(function(e,i){var r,s=e,a=s[qu(i)],o=s[i],l=yi(s,[qu(i),i].map(mA)),c=t[i],u=vA(o,a,n[c]),d=u[0],h=u[1];return G({},l,(r={},r[i]=d,r[c]=h,r))},n)}const yA=["xxl","xl","lg","md","sm","xs"],xA="xs",wA=A.createContext({prefixes:{},breakpoints:yA,minBreakpoint:xA});function $s(n,t){const{prefixes:e}=A.useContext(wA);return n||e[t]||t}function AA(n){return n&&n.ownerDocument||document}function EA(n){var t=AA(n);return t&&t.defaultView||window}function SA(n,t){return EA(n).getComputedStyle(n,t)}var CA=/([A-Z])/g;function _A(n){return n.replace(CA,"-$1").toLowerCase()}var TA=/^ms-/;function kr(n){return _A(n).replace(TA,"-ms-")}var RA=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function DA(n){return!!(n&&RA.test(n))}function zp(n,t){var e="",i="";if(typeof t=="string")return n.style.getPropertyValue(kr(t))||SA(n).getPropertyValue(kr(t));Object.keys(t).forEach(function(r){var s=t[r];!s&&s!==0?n.style.removeProperty(kr(r)):DA(r)?i+=r+"("+s+") ":e+=kr(r)+": "+s+";"}),i&&(e+="transform: "+i+";"),n.style.cssText+=";"+e}const Gu={disabled:!1},Hp=et.createContext(null);var PA=function(t){return t.scrollTop},Hi="unmounted",Bn="exited",bn="entering",zn="entered",ho="exiting",mn=function(n){Ko(t,n);function t(i,r){var s;s=n.call(this,i,r)||this;var a=r,o=a&&!a.isMounting?i.enter:i.appear,l;return s.appearStatus=null,i.in?o?(l=Bn,s.appearStatus=bn):l=zn:i.unmountOnExit||i.mountOnEnter?l=Hi:l=Bn,s.state={status:l},s.nextCallback=null,s}t.getDerivedStateFromProps=function(r,s){var a=r.in;return a&&s.status===Hi?{status:Bn}:null};var e=t.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(r){var s=null;if(r!==this.props){var a=this.state.status;this.props.in?a!==bn&&a!==zn&&(s=bn):(a===bn||a===zn)&&(s=ho)}this.updateStatus(!1,s)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var r=this.props.timeout,s,a,o;return s=a=o=r,r!=null&&typeof r!="number"&&(s=r.exit,a=r.enter,o=r.appear!==void 0?r.appear:a),{exit:s,enter:a,appear:o}},e.updateStatus=function(r,s){if(r===void 0&&(r=!1),s!==null)if(this.cancelNextCallback(),s===bn){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:ui.findDOMNode(this);a&&PA(a)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Bn&&this.setState({status:Hi})},e.performEnter=function(r){var s=this,a=this.props.enter,o=this.context?this.context.isMounting:r,l=this.props.nodeRef?[o]:[ui.findDOMNode(this),o],c=l[0],u=l[1],d=this.getTimeouts(),h=o?d.appear:d.enter;if(!r&&!a||Gu.disabled){this.safeSetState({status:zn},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:bn},function(){s.props.onEntering(c,u),s.onTransitionEnd(h,function(){s.safeSetState({status:zn},function(){s.props.onEntered(c,u)})})})},e.performExit=function(){var r=this,s=this.props.exit,a=this.getTimeouts(),o=this.props.nodeRef?void 0:ui.findDOMNode(this);if(!s||Gu.disabled){this.safeSetState({status:Bn},function(){r.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:ho},function(){r.props.onExiting(o),r.onTransitionEnd(a.exit,function(){r.safeSetState({status:Bn},function(){r.props.onExited(o)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(r,s){s=this.setNextCallback(s),this.setState(r,s)},e.setNextCallback=function(r){var s=this,a=!0;return this.nextCallback=function(o){a&&(a=!1,s.nextCallback=null,r(o))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},e.onTransitionEnd=function(r,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:ui.findDOMNode(this),o=r==null&&!this.props.addEndListener;if(!a||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}r!=null&&setTimeout(this.nextCallback,r)},e.render=function(){var r=this.state.status;if(r===Hi)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var o=yi(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return et.createElement(Hp.Provider,{value:null},typeof a=="function"?a(r,o):et.cloneElement(et.Children.only(a),o))},t}(et.Component);mn.contextType=Hp;mn.propTypes={};function oi(){}mn.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:oi,onEntering:oi,onEntered:oi,onExit:oi,onExiting:oi,onExited:oi};mn.UNMOUNTED=Hi;mn.EXITED=Bn;mn.ENTERING=bn;mn.ENTERED=zn;mn.EXITING=ho;function IA(){const n=A.version.split(".");return{major:+n[0],minor:+n[1],patch:+n[2]}}function kA(n){if(!n||typeof n=="function")return null;const{major:t}=IA();return t>=19?n.props.ref:n.ref}const OA=!!(typeof window<"u"&&window.document&&window.document.createElement);var po=!1,fo=!1;try{var Ta={get passive(){return po=!0},get once(){return fo=po=!0}};OA&&(window.addEventListener("test",Ta,Ta),window.removeEventListener("test",Ta,!0))}catch{}function MA(n,t,e,i){if(i&&typeof i!="boolean"&&!fo){var r=i.once,s=i.capture,a=e;!fo&&r&&(a=e.__once||function o(l){this.removeEventListener(t,o,s),e.call(this,l)},e.__once=a),n.addEventListener(t,a,po?i:s)}n.addEventListener(t,e,i)}function LA(n,t,e,i){var r=i&&typeof i!="boolean"?i.capture:i;n.removeEventListener(t,e,r),e.__once&&n.removeEventListener(t,e.__once,r)}function Up(n,t,e,i){return MA(n,t,e,i),function(){LA(n,t,e,i)}}function NA(n,t,e,i){if(i===void 0&&(i=!0),n){var r=document.createEvent("HTMLEvents");r.initEvent(t,e,i),n.dispatchEvent(r)}}function FA(n){var t=zp(n,"transitionDuration")||"",e=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*e}function BA(n,t,e){e===void 0&&(e=5);var i=!1,r=setTimeout(function(){i||NA(n,"transitionend",!0)},t+e),s=Up(n,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(r),s()}}function jA(n,t,e,i){e==null&&(e=FA(n)||0);var r=BA(n,e,i),s=Up(n,"transitionend",t);return function(){r(),s()}}function Wu(n,t){const e=zp(n,t)||"",i=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*i}function $A(n,t){const e=Wu(n,"transitionDuration"),i=Wu(n,"transitionDelay"),r=jA(n,s=>{s.target===n&&(r(),t(s))},e+i)}function zA(n){n.offsetHeight}const Vu=n=>!n||typeof n=="function"?n:t=>{n.current=t};function HA(n,t){const e=Vu(n),i=Vu(t);return r=>{e&&e(r),i&&i(r)}}function UA(n,t){return A.useMemo(()=>HA(n,t),[n,t])}function qA(n){return n&&"setState"in n?ui.findDOMNode(n):n??null}const GA=et.forwardRef(({onEnter:n,onEntering:t,onEntered:e,onExit:i,onExiting:r,onExited:s,addEndListener:a,children:o,childRef:l,...c},u)=>{const d=A.useRef(null),h=UA(d,l),p=E=>{h(qA(E))},f=E=>S=>{E&&d.current&&E(d.current,S)},m=A.useCallback(f(n),[n]),v=A.useCallback(f(t),[t]),g=A.useCallback(f(e),[e]),b=A.useCallback(f(i),[i]),y=A.useCallback(f(r),[r]),w=A.useCallback(f(s),[s]),x=A.useCallback(f(a),[a]);return C.jsx(mn,{ref:u,...c,onEnter:m,onEntered:g,onEntering:v,onExit:b,onExited:w,onExiting:y,addEndListener:x,nodeRef:d,children:typeof o=="function"?(E,S)=>o(E,{...S,ref:p}):et.cloneElement(o,{ref:p})})});function WA(n){const t=A.useRef(n);return A.useEffect(()=>{t.current=n},[n]),t}function VA(n){const t=WA(n);return A.useCallback(function(...e){return t.current&&t.current(...e)},[t])}const XA=n=>A.forwardRef((t,e)=>C.jsx("div",{...t,ref:e,className:rn(t.className,n)})),qp=XA("h4");qp.displayName="DivStyledAsH4";const Gp=A.forwardRef(({className:n,bsPrefix:t,as:e=qp,...i},r)=>(t=$s(t,"alert-heading"),C.jsx(e,{ref:r,className:rn(n,t),...i})));Gp.displayName="AlertHeading";function KA(n){const t=A.useRef(n);return A.useEffect(()=>{t.current=n},[n]),t}function YA(n){const t=KA(n);return A.useCallback(function(...e){return t.current&&t.current(...e)},[t])}const JA=["as","disabled"];function QA(n,t){if(n==null)return{};var e={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(t.indexOf(i)>=0)continue;e[i]=n[i]}return e}function ZA(n){return!n||n.trim()==="#"}function Wp({tagName:n,disabled:t,href:e,target:i,rel:r,role:s,onClick:a,tabIndex:o=0,type:l}){n||(e!=null||i!=null||r!=null?n="a":n="button");const c={tagName:n};if(n==="button")return[{type:l||"button",disabled:t},c];const u=h=>{if((t||n==="a"&&ZA(e))&&h.preventDefault(),t){h.stopPropagation();return}a?.(h)},d=h=>{h.key===" "&&(h.preventDefault(),u(h))};return n==="a"&&(e||(e="#"),t&&(e=void 0)),[{role:s??"button",disabled:void 0,tabIndex:t?void 0:o,href:e,target:n==="a"?i:void 0,"aria-disabled":t||void 0,rel:n==="a"?r:void 0,onClick:u,onKeyDown:d},c]}const tE=A.forwardRef((n,t)=>{let{as:e,disabled:i}=n,r=QA(n,JA);const[s,{tagName:a}]=Wp(Object.assign({tagName:e,disabled:i},r));return C.jsx(a,Object.assign({},r,s,{ref:t}))});tE.displayName="Button";const eE=["onKeyDown"];function nE(n,t){if(n==null)return{};var e={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(t.indexOf(i)>=0)continue;e[i]=n[i]}return e}function iE(n){return!n||n.trim()==="#"}const Vp=A.forwardRef((n,t)=>{let{onKeyDown:e}=n,i=nE(n,eE);const[r]=Wp(Object.assign({tagName:"a"},i)),s=YA(a=>{r.onKeyDown(a),e?.(a)});return iE(i.href)||i.role==="button"?C.jsx("a",Object.assign({ref:t},i,r,{onKeyDown:s})):C.jsx("a",Object.assign({ref:t},i,{onKeyDown:e}))});Vp.displayName="Anchor";const Xp=A.forwardRef(({className:n,bsPrefix:t,as:e=Vp,...i},r)=>(t=$s(t,"alert-link"),C.jsx(e,{ref:r,className:rn(n,t),...i})));Xp.displayName="AlertLink";const rE={[bn]:"show",[zn]:"show"},mo=A.forwardRef(({className:n,children:t,transitionClasses:e={},onEnter:i,...r},s)=>{const a={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},o=A.useCallback((l,c)=>{zA(l),i?.(l,c)},[i]);return C.jsx(GA,{ref:s,addEndListener:$A,...a,onEnter:o,childRef:kA(t),children:(l,c)=>A.cloneElement(t,{...c,className:rn("fade",n,t.props.className,rE[l],e[l])})})});mo.displayName="Fade";const sE={"aria-label":gt.string,onClick:gt.func,variant:gt.oneOf(["white"])},yl=A.forwardRef(({className:n,variant:t,"aria-label":e="Close",...i},r)=>C.jsx("button",{ref:r,type:"button",className:rn("btn-close",t&&`btn-close-${t}`,n),"aria-label":e,...i}));yl.displayName="CloseButton";yl.propTypes=sE;const Kp=A.forwardRef((n,t)=>{const{bsPrefix:e,show:i=!0,closeLabel:r="Close alert",closeVariant:s,className:a,children:o,variant:l="primary",onClose:c,dismissible:u,transition:d=mo,...h}=bA(n,{show:"onClose"}),p=$s(e,"alert"),f=VA(g=>{c&&c(!1,g)}),m=d===!0?mo:d,v=C.jsxs("div",{role:"alert",...m?void 0:h,ref:t,className:rn(a,p,l&&`${p}-${l}`,u&&`${p}-dismissible`),children:[u&&C.jsx(yl,{onClick:f,"aria-label":r,variant:s}),o]});return m?C.jsx(m,{unmountOnExit:!0,...h,ref:void 0,in:i,children:v}):i?v:null});Kp.displayName="Alert";const aE=Object.assign(Kp,{Link:Xp,Heading:Gp}),Yp=A.forwardRef(({bsPrefix:n,variant:t,animation:e="border",size:i,as:r="div",className:s,...a},o)=>{n=$s(n,"spinner");const l=`${n}-${e}`;return C.jsx(r,{ref:o,...a,className:rn(s,l,i&&`${l}-${i}`,t&&`text-${t}`)})});Yp.displayName="Spinner";function oE(n,t){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},n),A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const lE=A.forwardRef(oE);function cE(n,t){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},n),A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const uE=A.forwardRef(cE),dE=({content:n})=>{const t=qe();return C.jsxs("div",{className:"options-container",children:[C.jsxs(aE,{variant:"info",children:[C.jsx(uE,{className:"icon"})," ",n?.info]}),C.jsx("textarea",{placeholder:n.placeholder,className:"styled-textarea",onChange:e=>{t(ht({prompt:e.target.value}))}})]})},Jp=()=>{jt(t=>t.tool.showErrorMessage);const n=jt(t=>t.tool.errorMessage);return C.jsx(C.Fragment,{children:C.jsxs("div",{style:{display:n.length?"block":"none"},className:"error-element alert alert-danger text-center mt-3",role:"alert",children:[C.jsx(ec,{className:"w-5 h-5 hide-on-ltr",viewBox:"0 0 22 22"})," ",C.jsx("bdi",{className:"d-inline-flex",children:n})," ",C.jsx(ec,{className:"w-5 h-5 hide-on-rtl",viewBox:"0 0 22 22"})]})})},hE=({path:n,lang:t,text:e,onClick:i})=>C.jsxs("button",{className:`btn text-white add-more-files ${n}`,"data-tooltip-content":e,"data-tooltip-id":"add-more-tooltip","data-tooltip-place":t=="ar"?"right":"left",onClick:i,style:t=="ar"?{order:1}:{},children:[C.jsx("div",{className:"icon-container",children:C.jsx(pg,{className:"icon"})}),C.jsx(Vo,{id:"add-more-tooltip"})]});function Xu({k:n,edit_page:t}){const e=qe(),{submitBtn:i}=Dn(),r=jt(a=>a.tool.errorMessage),s=jt(a=>a.tool.isSubmitted);return C.jsxs("button",{className:`submit-btn btn btn-lg text-white position-relative overflow-hidden ${n} grid-footer`,onClick:()=>{e(ht({isSubmitted:!0})),e(ht({showOptions:!1})),i&&i?.current?.click()},disabled:r.length>0,children:[C.jsx("bdi",{children:t.action_buttons[n.replace(/-/g,"_")]})," ",s?C.jsx(Yp,{as:"span",animation:"grow",role:"status","aria-hidden":"true"}):null]})}const pE=({extension:n,edit_page:t,pages:e,page:i,lang:r,errors:s,path:a})=>{const o=jt(b=>b.tool.errorCode),l=jt(b=>b.tool.showTool),c=jt(b=>b.tool.showDownloadBtn),u=jt(b=>b.tool.nav_height),d=jt(b=>b.tool.showOptions),h=qe(),{files:p,setFiles:f,fileInput:m,submitBtn:v}=Dn();A.useEffect(()=>{o=="ERR_NO_FILES_SELECTED"&&p.length>0&&h(Gr())},[p,o]);const g=A.useRef(null);return C.jsxs("aside",{className:`edit-page ${l||c?"d-none":""}`,children:[C.jsxs("section",{className:"edit-area position-relative",children:[C.jsx(fA,{extension:n,pages:e,page:i,lang:r,errors:s,edit_page:t,path:a}),C.jsx(Jp,{}),C.jsx(hE,{onClick:()=>{m&&m?.current?.click()},lang:r,path:a,text:t.add_more_button}),C.jsx("button",{className:"gear-button btn btn-light",onClick:()=>{h(ht({showOptions:!d}))},ref:g,style:d?{top:u+(g.current?g.current.clientHeight:0)}:{},children:C.jsx(lE,{className:"w-6 h-6 me-2 gear-icon"})})]}),C.jsxs("section",{className:`options bg-white ${d?" expanded":""}`,style:d?{top:u}:{},children:[C.jsx("h5",{className:"text-uppercase grid-header",children:C.jsx("bdi",{children:t.edit_page_titles[a.replace(/-/g,"_")]})}),C.jsx(dE,{content:t.options}),C.jsx("div",{className:"hide-onsmall",children:C.jsx(Xu,{k:a,edit_page:t})})]}),C.jsx("div",{className:"show-onsmall",children:C.jsx(Xu,{k:a,edit_page:t})})]})},fE=(n,t,e,i)=>{const r=new Blob([n.data],{type:t}),s=URL.createObjectURL(r);i&&i.current&&(i.current.setAttribute("download",e),i.current.href=s)},mE=async(n,t,e,i,r,s,a,o)=>{if(n.preventDefault(),e(ht({isSubmitted:!0})),!r)return;if(r.map(f=>f.name).every(f=>a.includes(f))&&r.length===a.length){e(ht({showDownloadBtn:!0})),e(Gr());return}const u=new FormData;for(let f=0;f<r.length;f++)u.append("files",r[f]);u.append("prompt",i.prompt),u.append("isScanned",String(i.isScanned)),u.append("pageCount",String(i.pageCount));let d;if(d=`/api/${i.path}`,i.errorMessage)return;const h=r[0]?.name?.split(".").slice(0,-1).join("."),p={"application/zip":{outputFileMimeType:"application/zip",outputFileName:`PDFEquips-${i.path}.zip`},"application/pdf":{outputFileMimeType:"application/pdf",outputFileName:`${h}.pdf`},"application/msword":{outputFileMimeType:"application/msword",outputFileName:`${h}.docx`},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{outputFileMimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",outputFileName:`${h}.docx`},"application/vnd.ms-excel":{outputFileMimeType:"application/vnd.ms-excel",outputFileName:`${h}.xlsx`},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{outputFileMimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",outputFileName:`${h}.xlsx`},"application/vnd.ms-powerpoint":{outputFileMimeType:"application/vnd.ms-powerpoint",outputFileName:`${h}.pptx`},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{outputFileMimeType:"application/vnd.openxmlformats-officedocument.presentationml.presentation",outputFileName:`${h}.pptx`},"text/plain":{outputFileMimeType:"text/plain",outputFileName:`${h}.txt`}};try{const f=await Dt.post(d,u,{responseType:"arraybuffer"}),m=f.data.type||f.headers["content-type"],v=p[m]||{outputFileMimeType:m,outputFileName:""},{outputFileMimeType:g,outputFileName:b}=v;if(e(ht({showDownloadBtn:!0})),fE(f,g,b,t),o(r.map(y=>y.name)),f.status!==200)throw new Error(`HTTP error! status: ${f.status}`);e(Gr()),e(ht({isSubmitted:!1}))}catch(f){if(f.code==="ERR_NETWORK"){e(ht({errorMessage:s.ERR_NETWORK.message}));return}e(ht({isSubmitted:!1}))}finally{e(ht({isSubmitted:!1}))}},gE=async(n,t,e,i,r,s,a)=>{const o=n.target?.files||null;e([...s,...Array.from(o||[])]);const l=await J0(o,i,r,t);console.log(l),l&&s&&(t(ht({showTool:!1})),t(Gr()))},vE=({data:n,acceptedFileTypes:t,errors:e,lang:i,tools:r})=>{const s=n.to.replace("/",""),a=jt(x=>x.tool.errorMessage),o=jt(x=>x.tool.prompt),l=jt(x=>x.tool.isScanned),c=jt(x=>x.tool.pageCount),u=qe(),{files:d,setFiles:h,setFileInput:p,setDownloadBtn:f,setSubmitBtn:m,filesOnSubmit:v,setFilesOnSubmit:g}=Dn(),b=A.useRef(null),y=A.useRef(null),w=A.useRef(null);return A.useEffect(()=>{p(b),m(y),f(w)},[]),C.jsxs("form",{onClick:x=>{x.stopPropagation()},onSubmit:x=>mE(x,w,u,{path:s,errorMessage:a,prompt:o,isScanned:l,pageCount:c},d,e,v,g),method:"POST",encType:"multipart/form-data",children:[C.jsxs("div",{className:`upload-btn btn btn-lg text-white position-relative overflow-hidden ${s}`,onClick:x=>{x.stopPropagation()},role:"button",children:[i=="ar"?C.jsxs("bdi",{children:[r.select," ",r.files,C.jsx("span",{className:"text-uppercase",children:n.type.replace(".","")})," "]}):C.jsxs("bdi",{children:[r.select," ",C.jsx("span",{className:"text-uppercase",children:n.type.replace(".","")})," ",r.files]}),C.jsx("input",{type:"file",name:"files",accept:t[n.type],multiple:s!=="split-pdf"&&s!=="pdf-to-pdf-a",ref:b,className:"position-absolute file-input",onClick:x=>{x.stopPropagation()},onChange:async x=>{await gE(x,u,h,n.type,e,d)}})]}),C.jsx("a",{href:"",className:"d-none",ref:w,download:"__output.pdf"}),C.jsx("button",{type:"submit",ref:y,className:"d-none",children:"submit"})]})},bE=({lang:n,downloadFile:t,path:e})=>{const{files:i,downloadBtn:r}=Dn(),s=qe(),a=jt(o=>o.tool.showDownloadBtn);return A.useEffect(()=>{},[t,a]),C.jsxs("div",{className:`download-page flex-column align-items-center justify-content-center text-center${a?" d-flex":" d-none"}`,children:[C.jsx("h3",{className:"text-center mb-4",children:C.jsx("bdi",{children:t.titles&&t.titles[e]&&t.titles[e][i&&i.length>1?0:1]})}),C.jsxs("div",{className:"d-flex align-items-center justify-content-between rounded-circle",children:[C.jsxs("button",{className:"btn btn-dark rounded-circle mr-2 back-btn align-items-center",style:n=="ar"?{order:1}:{},"data-tooltip-content":t.backto[e],"data-tooltip-id":"download-btn-tooltip","data-tooltip-place":"left",onClick:()=>{s(ht({showDownloadBtn:!1}))},children:[C.jsx(lg,{className:"icon"}),C.jsx(Vo,{id:"download-btn-tooltip"})]}),C.jsxs("button",{className:`download-btn btn btn-lg text-white position-relative overflow-hidden ${e}`,onClick:()=>{r?.current&&r.current.click()},children:[C.jsx(ug,{className:"icon text-white mr-2"}),C.jsx("bdi",{children:t.btnText&&t.btnText[e]&&t.btnText[e][i&&i.length>1?0:1]})]})]})]})},yE=({data:n,tools:t,lang:e,errors:i,edit_page:r,pages:s,page:a,downloadFile:o})=>{const l=n.to.replace("/",""),c=jt(y=>y.tool.showTool),u=jt(y=>y.tool.errorMessage),{setFiles:d}=Dn(),h=qe(),p=()=>{h(ht({showTool:!1}))};A.useEffect(()=>{h(ht({showDownloadBtn:!1}))},[c]);const f=A.useCallback(y=>{d(y),p()},[]),m=A.useCallback(y=>{const w=y.clipboardData?.items;if(w)for(let x=0;x<w.length;x++){const E=w[x];if(E.kind==="file"){const S=E.getAsFile();if(S){d([S]),p();return}}}},[]),{getRootProps:v,isDragActive:g}=xd({onDrop:f}),b={".pdf":".pdf, .PDF",".pptx":".pptx, .ppt",".docx":".docx, .doc",".xlsx":".xlsx, .xls",".jpg":".jpg, .jpeg",".html":".html, .htm"};return C.jsx(C.Fragment,{children:C.jsxs("div",{className:"tools-page container-fluid position-relative",...c&&{...v(),onPaste:m},onClick:y=>{y.preventDefault()},children:[g&&C.jsx("div",{className:"overlay display-4",children:t.drop_files}),C.jsxs("div",{className:`text-center${c&&u?.length>0?" d-flex":""} flex-column tools ${c?"":"d-none"}`,children:[C.jsx("h1",{className:"display-3",children:n.title}),C.jsx("p",{className:"lead",children:n.description}),C.jsx(vE,{lang:e,data:n,errors:i,tools:t,acceptedFileTypes:b}),C.jsx("p",{children:t.or_drop}),C.jsx(Jp,{})]}),C.jsx(pE,{extension:n.type,edit_page:r,pages:s,page:a,lang:e,errors:i,path:l}),C.jsx(bE,{lang:e,downloadFile:o,path:l})]})})};function xE(n){return C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"682.667",height:"682.667",version:"1",viewBox:"0 0 512 512",...n,children:[C.jsx("path",{d:"M2425 4974c-879-51-1650-559-2030-1338-88-180-134-301-174-462-120-473-98-947 65-1409 79-224 240-511 394-702 35-43 172-187 304-321 221-222 244-242 275-242s54 19 247 212l213 211 88-40c48-22 112-48 141-58l52-17V209l25-24 24-25h1022l24 25 25 24v599l53 17c28 10 92 36 140 58l88 40 213-211c193-193 215-212 246-212 32 0 62 27 393 357 197 197 360 368 363 380s3 32-1 45-100 116-213 230l-205 207 40 88c22 48 48 112 58 141l17 52h599l24 25 25 24v1022l-25 24-24 25h-599l-17 53c-10 28-36 92-58 140l-40 88 211 213c193 193 212 216 212 247s-20 54-242 275c-134 132-281 271-328 308-352 282-791 466-1230 515-103 12-312 20-395 15zm465-199c442-73 833-254 1150-534l45-40-56-57-56-56-79 66c-285 240-644 401-1029 462-152 24-452 24-600 0-364-58-683-192-967-407-107-80-307-280-387-387-215-284-349-603-407-967-24-148-24-448 0-600 61-384 222-745 462-1029l66-79-56-56-57-56-40 45c-281 319-461 706-535 1155-28 164-26 505 4 675 86 501 304 918 659 1261 373 360 827 566 1368 623 85 9 424-3 515-19zm-132-306c378-41 738-192 1024-430l78-64-320-320c-303-304-320-323-320-357 0-30 10-48 50-94 100-114 169-241 212-390 20-69 23-102 23-249s-3-180-23-249c-97-334-344-581-678-678-69-20-102-23-249-23s-180 3-249 23c-149 43-276 112-390 212-46 40-64 50-94 50-34 0-53-17-357-320l-320-320-64 78c-619 744-580 1838 90 2546 402 425 1008 649 1587 585zm1557-499l110-110-203-203c-173-174-202-207-202-233 0-17 22-75 49-130 27-54 64-143 81-197 49-146 25-137 366-137h284v-800h-284c-341 0-317 9-366-137-17-54-54-143-81-197-27-55-49-113-49-130 0-26 29-59 202-233l203-203-283-282-282-283-203 203c-174 173-207 202-233 202-17 0-75-22-130-49-54-27-143-64-197-81-146-49-137-25-137-366V320h-800v284c0 341 9 318-137 366-54 18-142 54-196 81-55 27-113 49-130 49-27 0-57-26-234-202l-203-203-113 113-112 112 396 396 396 396 67-51c87-66 268-154 369-180 176-45 361-51 523-17 235 50 466 184 616 359 249 289 334 659 237 1034-26 101-114 282-180 369l-51 67 394 394c216 216 395 393 398 393s55-49 115-110z",transform:"matrix(.1 0 0 -.1 0 512)"}),C.jsx("path",{d:"M2505 4375c-24-23-25-31-25-135s1-112 25-135c15-16 36-25 55-25s40 9 55 25c24 23 25 31 25 135s-1 112-25 135c-15 16-36 25-55 25s-40-9-55-25zM1621 4134c-29-37-27-57 15-133 61-112 79-131 124-131 30 0 43 6 59 26 29 37 27 57-15 133-63 113-80 131-124 131-30 0-43-6-59-26zM3377 4128c-39-53-97-163-97-185 0-11 9-32 21-47 16-20 29-26 59-26 45 0 63 19 124 131 42 76 44 96 15 133-16 20-29 26-59 26-32 0-43-6-63-32zM2505 3815l-25-24v-920l-52-24c-67-31-124-88-155-154l-24-53h-600l-24-25c-33-32-33-78 0-110l24-25h600l24-53c31-69 86-123 156-156 46-22 70-26 136-25 128 1 215 53 275 166 31 56 34 71 35 143 0 66-5 90-26 136-33 70-87 125-156 156l-53 24v920l-25 24c-15 16-36 25-55 25s-40-9-55-25zm118-1109c103-43 128-177 48-257-65-65-157-65-222 0-124 123 13 325 174 257zM986 3499c-20-16-26-29-26-59 0-45 19-63 131-124 76-42 96-44 133-15 20 16 26 29 26 59 0 45-19 63-131 124-76 42-96 44-133 15z",transform:"matrix(.1 0 0 -.1 0 512)"}),C.jsx("path",{d:"M3015 3125c-39-38-33-74 25-142 63-73 125-191 145-274 19-82 19-226 0-308-52-219-247-414-466-466-82-19-226-19-308 0-83 20-201 82-274 145-68 58-104 64-142 25-42-41-30-85 40-147 221-193 521-248 802-146 338 122 561 483 516 835-21 165-95 332-195 441-62 69-102 79-143 37zM745 2615c-16-15-25-36-25-55s9-40 25-55c23-24 31-25 135-25s112 1 135 25c16 15 25 36 25 55s-9 40-25 55c-23 24-31 25-135 25s-112-1-135-25zM1075 1794c-106-60-115-69-115-115 0-29 6-42 26-58 37-29 57-27 133 15 112 61 131 79 131 124 0 30-6 43-26 59-38 30-59 26-149-25zM4480 2560v-80h160v160h-160v-80zM3917 1202l-57-58 53-52c29-29 57-52 63-52 13 0 104 93 104 106 0 5-24 33-53 62l-53 52-57-58zM2480 560v-80h160v160h-160v-80z",transform:"matrix(.1 0 0 -.1 0 512)"})]})}const wE=n=>C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"512",height:"512",viewBox:"0 0 512 512",...n,children:[C.jsx("path",{d:"M274 10c14.903 11.554 23.326 25.307 26 44 .044 2.333.056 4.667 0 7 8.083.382 8.083.382 16-1 2.29-2.33 3.265-4.438 4.574-7.414 2.902-5.263 8.9-7.744 14.426-9.586 9.498-.87 16.668.555 24.313 6.313 5.613 5.613 7.793 11.455 8.062 19.312-.091 7.473-2.311 12.774-7.137 18.445-5.474 5.308-11.422 7.776-19.039 8.02-8.473-.457-14.343-2.8-20.137-9.028-2.873-3.292-3.135-4.43-4.062-9.062h-17v48c8.07.016 16.136.026 24.206-.029 3.758-.023 7.516-.034 11.274-.016 3.625.018 7.249.001 10.874-.039q2.066-.014 4.133.01c9.268.165 9.268.165 17.112-4.19A115 115 0 0 0 371 117l2.668-2.46c2.48-2.372 4.94-4.765 7.394-7.165l2.663-2.523 2.498-2.454 2.273-2.197c1.778-2.11 1.778-2.11 1.31-4.745L389 93c-2.35-7.702-2.72-14.644.563-22.187 3.192-5.715 8.116-9.402 13.625-12.75 7.54-2.102 15.04-2.3 22.25 1 5.877 3.387 10.653 8.277 13.09 14.726 1.612 7.543 1.76 15.876-2.329 22.606-4.618 6.182-10.341 10.574-17.904 12.427-2.295.178-2.295.178-4.829-.472-3.525-.868-5.873-1.015-9.466-.35-5.767 3.6-10.228 9.192-14.75 14.188a803 803 0 0 1-5.717 6.102 225 225 0 0 0-3.513 3.81c-4.817 5.192-9.095 8.505-16.31 9.231-4.057.132-8.09.12-12.147.06q-2.237-.012-4.473-.018c-3.9-.015-7.798-.054-11.698-.098-4.691-.049-9.383-.067-14.075-.09-7.106-.039-14.21-.115-21.317-.185v31l7.844-.08c8.573-.082 17.146-.137 25.72-.18 5.196-.025 10.391-.06 15.587-.117 5.018-.055 10.036-.084 15.055-.097q2.865-.015 5.73-.055c19.228-.261 19.228-.261 26.064 5.529l2.367 1.881 1.723 1.748 1.935 1.947 1.913 1.987 1.994 1.998c5.59 5.693 5.59 5.693 7.068 9.439-.176 3.352-.437 5.974-2.062 8.938-3.253 1.783-6.401 1.86-9.938 1.062-3.026-2.075-5.368-4.655-7.812-7.375a2141 2141 0 0 0-3.895-4.148l-1.702-1.873c-3.3-3.327-5.66-3.844-10.232-3.916l-2.319-.007-2.454-.03c-2.679-.031-5.357-.048-8.035-.065l-5.57-.059a5040 5040 0 0 0-14.663-.128c-5.863-.047-11.727-.109-17.59-.168-8.91-.088-17.819-.158-26.728-.231v42h18l1-5c4.46-6.905 9.971-11.207 18-13 9.224-1.238 15.62 1.136 23.25 6.125 5.72 5.98 8.055 11.705 8.313 20-.295 7.537-2.072 11.99-6.938 17.625-6.536 5.603-12.7 8.799-21.523 8.492-7.983-.92-13.74-4.301-19.102-10.242-3-4.969-3-4.969-3-8h-18v53c13.564.055 13.564.055 27.127.035 5.533-.024 11.065-.04 16.598-.004 4.461.028 8.921.018 13.383-.02q2.55-.01 5.103.02c9.009.512 9.009.512 16.905-2.808 1.285-2.051 2.093-3.945 2.884-6.223 5-5.488 10.322-8.215 17.766-8.957 8.18-.157 15.235 2.36 21.234 7.957 5.305 6.966 7.586 13.207 7 22-1.81 8.035-5.108 14.369-12.125 18.875-6.658 3.912-13.305 3.83-20.875 3.125-6.765-2.009-12.357-5.884-16-12l-2-6h-77v50l64-1 4-8c4.64-5.623 10.716-8.584 17.895-9.281 8.394-.254 15.295.928 21.722 6.687 5.558 6.406 7.76 13.342 7.66 21.68-.726 7.626-4.85 13.7-10.277 18.914-5.461 4.28-12.271 5.314-19.062 4.875-8.28-1.14-13.171-4.539-18.493-10.875-1.445-2-1.445-2-3.445-6l-64-1v39l9.344-.14c3.005-.032 6.01-.056 9.015-.08q3.12-.03 6.239-.082c2.998-.049 5.997-.071 8.996-.089l2.791-.062c7.472-.003 12.513 1.784 18.188 6.667l2.189 2.368 2.45 2.572q2.498 2.683 4.985 5.375l2.44 2.553 2.178 2.35c2.092 1.863 2.092 1.863 4.783 1.328L376 442c9.346-.796 16.394.232 23.75 6.25 6.508 7.955 9.175 14.384 8.25 24.75-1.766 8.136-6.096 13.463-13 18-7.506 3.705-15.29 3.763-23.227 1.313-6.783-2.934-11.003-8.344-14.71-14.563-1.665-5.876-2.36-12.612.019-18.367 1.078-2.799.84-3.597-.082-6.383-3.449-7.059-8.81-12.806-16-16-13.197-2.846-27.604-1.619-41-1l.048 1.797c.47 20.495-.98 38.84-15.486 54.703-11.417 11.914-25.531 19.555-42.276 19.931-18.762.041-33.308-4.37-47.098-17.744-3.558-3.597-5.75-6.633-7.75-11.25-1.404-2.598-2.363-4.106-5.247-4.994-3.86-.667-7.73-.882-11.636-1.103-5.936-.345-11.095-2.047-16.555-4.34l-2.566-1.055c-15.096-6.85-25.648-19.414-32.22-34.414-1.844-5.363-2.807-10.796-3.671-16.39-.208-2.998-.208-2.998-1.543-4.141-3.499.01-6.988.133-10.484.258-3.765-.276-5.549-.983-8.516-3.258-1.444-2.889-1.377-4.796-1-8 2.019-2.727 3.658-4.654 7.031-5.523 2.388-.277 4.755-.428 7.156-.54 11.554-.896 19.19-4.266 28.954-10.546 3.269-1.59 5.268-1.813 8.859-1.391 2.938 2.063 2.938 2.063 5 5 .149 4.173-.419 6.231-2.937 9.563-5.053 4.02-10.615 8.186-17.063 9.437 2.174 12.937 4.81 24.17 14 34v2l1.746.82c2.274 1.19 4.237 2.555 6.316 4.055 10.651 7.188 22.467 9.264 35.063 7.563 8.852-1.736 17.395-6.2 24.313-11.938 2.919-2.349 3.351-2.497 7.375-2.562 4.55 1.517 4.55 1.517 6.187 4.062 1.245 3.29 1.15 4.629-.184 7.918-5.077 8.615-16.05 13.043-24.816 17.082 6.596 10.323 17.008 17.345 29 20 14.477.875 26.432-.395 38-10 3.99-3.957 7.675-7.836 10-13l-2.738-.297-3.575-.453-3.55-.422C265 470 265 470 263.109 468.105c-1.553-2.948-1.579-4.815-1.109-8.105l4-5h18v-54l-13.562.313-4.237.075c-8.874.262-15.666 1.077-22.201 7.612-2.806 4.2-4.16 8.292-5 13.25-.552 3.04-.976 4.711-2.625 7.375-3.673 2.127-6.156 1.844-10.375 1.375-1.937-1.062-1.937-1.062-3-3-2.322-8.751.424-16.96 4.602-24.687 5.953-9.846 14.4-15.17 25.398-18.313h31V283l-26.73.105q-9.439.027-18.878.046c-8.155.016-16.309.038-24.464.075q-9.682.046-19.367.056c-3.418.004-6.835.013-10.253.035-3.817.022-7.633.025-11.45.024l-3.43.032-3.157-.012-2.735.008c-3.108-.452-4.998-1.548-7.536-3.369-1.546-3.092-1.294-5.594-1-9 2-2.596 3.197-3.838 6.444-4.492l2.783.011 3.197-.017 3.505.044 3.756-.002c3.35.003 6.7.023 10.05.05 3.144.024 6.289.025 9.433.028 9.194.02 18.388.076 27.582.128L284 267V141c-22.213.158-22.213.158-44.425.36-4.33.018-4.33.018-6.368.022q-2.1.01-4.2.04c-14.908.208-24.74-2.852-35.722-13.008-6.753-7.045-9.646-16.397-10.437-25.941.177-2.877.857-4.905 2.152-7.473 2.927-1.789 4.695-2.012 8.125-1.875 3.46 1.053 4.039 1.823 5.875 4.875.809 3.023.809 3.023 1.438 6.375 1.657 7.667 3.882 12.12 10.562 16.625 6.923 4.02 14.347 3.478 22.121 3.512l4.41.054c3.848.047 7.696.077 11.545.104 4.628.035 9.256.092 13.884.145 7.013.078 14.026.129 21.04.185V76h-18c-4-4-4-4-4.5-7.5.5-3.5.5-3.5 1.953-5.703 3.814-2.69 7.254-2.232 11.797-2.047l2.547.055c2.068.047 4.136.118 6.203.195-2.07-12.978-5.975-26.748-17-35-3.224-2.253-6.502-4.202-10-6l-2.008-1.04c-9.069-3.804-21.849-3.438-31.054-.335C214.743 22.638 206.6 28.6 201 37l2.86 1.363c18.448 9.117 30.5 22.58 37.992 41.825.563 1.952.893 3.794 1.148 5.812l.434 3.418c1.102 10.966 1.102 10.966-2.434 15.582-3.092 1.546-5.594 1.294-9 1-3.277-2.322-3.955-3.813-4.906-7.758a274 274 0 0 1-.594-4.367c-2.161-13.984-7.304-24.1-18.328-33.309-9.583-6.91-21.233-10.442-33.043-9.285C162.387 53.402 150.269 58.745 142 69c-7.915 11.238-10.444 22.296-9.875 36-.146 3.512-1.006 5.23-3.125 8-3.455 1.728-8.07 1.526-11.793.512-11.185-2.594-23.911-.566-33.836 4.949-2.203 1.43-4.289 2.94-6.371 4.539l-2.625 1.75c-8.284 7.848-14.18 18.647-14.715 30.129-.113 6.419-.202 12.852 1.34 19.121l3.035-.84 4.028-1.097 1.99-.553c8.308-2.251 19.15-5.1 27.072-.822 2.123 2.617 2.793 3.95 2.875 7.312-1.064 3.813-1.625 4.75-5 7-2.046.423-2.046.423-4.395.676l-2.625.311-2.793.326c-19.363 2.543-35.67 10.085-48.414 25.355-11.735 15.582-17.141 32.824-15.37 52.402C24.43 283.978 33.714 300.756 50 313c1.638 1.046 3.294 2.07 5 3l.719-1.695C60.159 306.319 68.72 299.653 77 296c3.545-.59 5.07-.402 8.313 1 2.194 2.601 2.66 4.653 2.906 8.016C88 307 88 307 86.063 309.625c-1.617 1.253-3.238 2.501-4.899 3.695C70.238 321.223 63.151 330.775 60 344c-1.594 14.796 1.057 26.966 10 39 2.457 3.685 2.689 6.72 2 11-2.018 3.104-3.213 3.825-6.812 4.625-6.02-1.18-8.938-4.81-12.27-9.648-9.184-14.707-12.976-32.053-9.446-49.279.497-1.902 1.011-3.8 1.528-5.698v-4c-2.358-2.171-2.358-2.171-5.437-4.187C21.13 312.678 9.51 293.435 5.28 271.227c-3.864-24.18 1.638-46.955 15.532-67.04C27.596 195.358 35.35 187.648 45 182l-.437-1.633c-4.457-19.743-2.284-39.364 8.288-56.607C60.971 111.32 73.885 102.413 88 98l1.98-.676C98.011 95.041 106.735 95.84 115 96l.262-2.605C117.439 75.078 124.9 60.113 139 48c12.66-9.65 26.34-13.32 42-14l3 1 .563-2.437c5.326-13.202 18.253-23.49 30.925-29.11C234.846-3.967 256.815-1.482 274 10m58 54c-1.347 3.723-1.188 5.435.063 9.188 2.373 3.445 3.94 4.582 7.937 5.812 4.142-.571 6.323-1.392 9.438-4.187 2.021-3.64 2.222-5.706 1.562-9.813-2.953-3.575-5.12-5.744-9.75-6.375-4.455.514-6.219 2.132-9.25 5.375m73 13c-2.045 3.835-2.14 5.446-1.062 9.688 2.582 4.146 4.36 5.116 9.062 6.312 3.454-.61 5.499-1.657 8.375-3.625 1.927-2.817 2.188-5.014 2.023-8.406-.623-3.079-2.185-4.821-4.398-6.969-5.406-2.703-10.085-1.25-14 3m-71 155c-1.786 4.02-2.302 6.02-1 10.25 2.411 3.315 4.12 4.457 8 5.75 3.962 0 5.648-.747 8.875-3.062 2.394-3.31 2.866-5.014 2.625-9.004-.848-3.281-2.912-4.9-5.5-6.934-5.199-2.6-9.239-1.075-13 3m59 70c-1.55 3.1-1.29 5.579-1 9 1.796 2.753 3.053 4.526 6 6 5.898.63 5.898.63 10.938-2.125 2.315-3.227 3.062-4.913 3.062-8.875-1.529-3.975-2.428-5.619-6-8-5.872-.568-8.71-.42-13 4m-13 66c-1.248 3.405-1.248 3.405-1 7 2.23 4.258 2.23 4.258 6 7 5.876.618 5.876.618 10.938-2.062 2.468-3.516 3.062-5.652 3.062-9.938-1.588-3.574-2.716-4.81-6-7-6.238-.704-9.171-.453-13 5m-7.375 94.688c-.97 3.586-.751 6.773.375 10.312 2.357 2.554 4.218 3.7 7.438 4.938 3.613.088 5.554-.976 8.562-2.938 2.584-3.001 2.991-4.52 3.063-8.5-1.376-4.533-3.072-6.015-7.063-8.5-5.235-.855-9.002.548-12.375 4.688"}),C.jsx("path",{d:"M440 221c3.217 2.784 5.926 6.05 8.662 9.297 1.708 1.87 3.17 3.389 5.338 4.703 2.936-.017 5.293-.937 8-2 7.728-1.082 14.724.923 21.047 5.473 5.414 4.893 8.248 10.853 9.332 18.039.392 8.066-2.078 15.347-7.504 21.363-6.02 5.43-13.288 7.88-21.355 7.512-7.148-1.097-12.867-3.776-17.52-9.387l-2.187-2.437C439.299 267.18 439.59 260.546 440 253l.941-3.422c.067-4.048-.247-4.437-2.87-7.254a170 170 0 0 0-3.946-3.637 2071 2071 0 0 1-3.93-3.675l-1.78-1.61c-2.106-2.087-2.404-3.299-2.728-6.277.313-3.125.313-3.125 2.125-5.437 4.185-3.228 7.617-2.955 12.188-.688m19 31c-2.318 2.318-2.935 3.628-3.5 6.875.696 4.347 2.274 6.173 5.5 9.125 3.904 1.185 5.963 1.424 9.75-.125 2.617-2.181 3.955-3.71 5.25-6.875-.068-3.865-.434-6.173-2.625-9.375-5.086-3.48-9.609-3.465-14.375.375M123.762 135.402c12.576 6.359 20.73 15.415 25.328 28.762 1.062 4.476 1.254 8.567 1.223 13.149l-.018 2.55c-.206 10.554-2.953 17.714-9.295 26.137l-2.25 3.125c-9.454 9.883-20.4 13.92-33.805 15.09-3.444-.251-5.199-1.163-7.945-3.215-1.444-2.889-1.377-4.796-1-8 3.674-4.63 6.414-5.645 12.188-6.375 8.4-1.368 14.571-4.248 19.718-11.2 5.052-8.161 5.849-14.86 5.094-24.425-1.376-5.3-3.132-9.154-7-13v-2l-1.719-.844a111 111 0 0 1-4.437-2.375c-4.77-2.608-8.803-4.092-14.219-4.781-5.302-.736-5.302-.736-8.375-3.25-1.494-3.286-1.857-5.184-1.25-8.75 6.546-8.351 19.349-4.566 27.762-.598M130.065 321.855l2.023-.01q3.275-.013 6.549-.013l4.582-.01q4.785-.009 9.57-.007c4.085 0 8.17-.014 12.256-.031q4.723-.015 9.448-.013 2.26 0 4.52-.013c2.103-.01 4.206-.007 6.31 0l3.624-.005c2.981.241 4.609.57 7.053 2.247 2.342 3.513 2.496 4.865 2 9-1.596 2.657-1.596 2.657-4 5-3.123.619-3.123.619-6.845.612l-2.061.017c-2.245.013-4.49-.007-6.735-.027q-2.35.007-4.7.024c-4.127.023-8.253.018-12.38.006q-9.885-.026-19.77.026c-2.294.006-4.587-.007-6.88-.022-7.154-.005-13.137.158-19.629 3.364l-2.75 1.312c-5.264 3.948-7.501 9.654-8.672 15.961-1.16 6.18-1.16 6.18-3.203 8.852-3.617 1.333-6.739 1.126-10.375-.125-2.476-2.631-2.92-4.452-3.438-8 .444-9.616 4.354-18.462 10.688-25.5 10.19-9.263 18.905-12.601 32.815-12.645M463.152 404.645c5.931 4.35 10.383 10.083 11.848 17.355 1.093 8.164-.49 14.14-5 21-4.06 4.914-8.954 7.985-15 10-7.79.714-14.3.246-21-4-2.812-2.437-2.812-2.437-5-5l-2.187-2.437c-4.265-6.03-4.583-12.392-3.813-19.563 1.742-7.177 5.086-12.55 11-17 8.875-5.128 20.181-5.458 29.152-.355M442 420c-2.584 3.001-2.991 4.52-3.062 8.5 1.375 4.533 3.071 6.015 7.062 8.5 4.218.879 5.636.227 9.313-2.062 3.197-3.496 3.771-5.235 3.687-9.938-1.423-3.683-2.649-4.792-6.062-6.812-4.693-1.898-6.632-.736-10.938 1.812M497 327c6.944 6.235 10.228 12.108 10.957 21.383.132 8.064-2.426 13.794-7.957 19.617-5.51 5.085-11.098 6.645-18.437 7.313-7.345-.645-14.21-3.107-19.563-8.313-6.008-7.954-6.92-15.112-6-25 2.3-7.744 6.846-13.122 13.84-17.027 8.804-3.907 19.029-3.026 27.16 2.027m-23 15c-2.456 3.685-2.809 6.722-2 11 2.398 3.315 4.07 4.684 7.938 6 3.907 0 5.847-.785 9.062-3 2.594-3.566 3.093-5.227 2.563-9.625-1.9-4.102-3.533-5.4-7.563-7.375-4.218-.72-6.596.516-10 3M471 135c6.271 4.453 9.97 8.997 11.313 16.75 1.27 8.872-.381 14.966-5.61 22.238-4.807 5.679-10.408 8.476-17.863 9.23-8.142.336-14.689-2.28-21.008-7.378-5.385-5.408-7.146-11.32-7.457-18.84.335-8.32 2.823-14.702 8.938-20.437 9.596-7.285 21.388-7.879 31.687-1.563m-22 15c-2.456 3.685-2.809 6.722-2 11 2.398 3.315 4.07 4.684 7.938 6 3.81 0 5.867-.967 9.062-3 2.459-3.688 2.801-6.719 2-11-2.557-3.642-4.223-4.778-8.5-6-3.926 0-5.466.573-8.5 3M168 356c10.013 2.595 18.494 8.253 23.918 17.145 5.151 10.119 6.712 19.852 4.434 31.039-3.585 10.8-10.548 18.242-20.352 23.816-6.336 3.086-13.01 4.026-20 3-2.994-1.925-3.68-3.169-4.937-6.437-.084-3.41.85-4.9 2.937-7.563 3.15-1.916 6.289-2.569 9.875-3.312 6.24-1.534 9.527-3.102 13.367-8.403 3.267-5.51 3.654-11.013 2.758-17.285-1.794-5.945-4.964-9.506-10-13-3.997-2.11-8.271-2.647-12.695-3.34-2.612-.748-3.639-1.545-5.305-3.66-1.032-3.015-1.11-4.604-.25-7.687 3.349-6.196 10.161-4.986 16.25-4.313M248.676 181.086c8.805 3.463 15.769 11.165 19.574 19.726 2.552 10.846 2.086 20.39-3.773 30.086C258.255 239.754 250.48 243.972 240 246c-3.918.301-6.743.326-10-2-2.082-2.676-1.996-4.118-1.875-7.562C229 233 229 233 230.5 231.188c2.381-1.131 4.307-1.615 6.875-2.125 5.697-1.151 9.216-3.35 12.938-7.875 2.198-4.153 3.258-7.539 2.246-12.235-1.805-5.487-4.582-9.382-9.809-12.14-2.638-.837-2.638-.837-4.96-1.196-6.31-1.123-6.31-1.123-8.915-3.804-1.155-3.714-.913-6.078.125-9.813 4.73-5.866 13.563-2.917 19.676-.914M205 179c3.122 6.244 1.208 15.283-.625 21.688-5.02 14.619-14.542 25.649-28.062 33-8.048 3.844-17.377 6.27-26.313 5.312-4.57-2.139-4.57-2.139-6-5-.574-6.204-.574-6.204 1.543-9.137 3.189-2.418 6.223-2.795 10.082-3.3 10.4-1.66 19.8-5.334 26.223-14.079 4.026-6.052 6.519-11.234 7.597-18.472l.493-3.262.402-3.078c.71-2.874 1.355-3.886 3.66-5.672 4.07-2.035 7.214.071 11 2M71 236c2.609 2.609 2.63 4.52 3.313 8.125 1.838 8.287 4.611 13.868 11.55 18.867 8.674 4.091 18.212 3.359 27.578 3.399l3.543.07 3.21.025c3.467.635 4.627 1.804 6.806 4.514 1.18 2.613 1.059 3.76.375 6.563-1.725 3.058-3.246 3.885-6.375 5.437-2.688.372-2.688.372-5.57.363l-3.22-.002-3.335-.048-3.266.01c-14.645-.098-26.628-2.789-37.566-13.01C64.508 266.31 62.209 261.83 60 257l-1.375-2.937c-1.01-4.95-1.446-10.065-.625-15.063 4.103-5.15 7.052-5.404 13-3M189 64.375c2.607 2.118 2.93 3.103 3.375 6.438C192 74 192 74 190.188 76.75c-3.872 2.733-6.916 3.064-11.528 3.734-4.6.892-7.477 3.026-10.347 6.641-1.584 3.469-2.54 6.975-3.47 10.668C164 100 164 100 161 102c-3.923.428-6.108.634-9.375-1.687-2.764-3.935-2.802-6.266-2-11C152.2 80.333 156.143 73.276 164 68c7.618-4.11 16.653-7.45 25-3.625M225.676 321.797l2.31-.017q2.421-.014 4.844-.02c2.463-.01 4.924-.04 7.387-.072q2.355-.01 4.709-.016l2.223-.038c4.461.02 7.309.604 10.851 3.366 1.546 3.092 1.294 5.594 1 9-1.487 2.191-1.487 2.191-4 4-2.969.41-5.56.585-8.527.566l-2.503.02q-2.616.01-5.232-.01c-2.664-.013-5.323.02-7.986.059q-2.546 0-5.092-.006l-2.402.04c-4.222-.07-5.819-.326-9.264-3.017C212 333 212 333 211.438 329.938c.68-3.555 1.763-4.715 4.562-6.938 3.072-1.536 6.304-1.184 9.676-1.203"})]}),AE=n=>C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"512",height:"512",viewBox:"0 0 512 512",...n,children:[C.jsx("path",{d:"m325.617-.336 2.227-.02q2.327-.015 4.655-.015c2.361-.004 4.721-.04 7.083-.078q2.267-.009 4.535-.012l2.122-.043C351.279-.458 354.166.764 358 4c1.932 2.814 2.277 5.173 2.414 8.547l.117 2.558.094 2.645.117 2.691q.141 3.279.258 6.559l3.36 1.242 4.39 1.633 2.21.816c3.441 1.283 6.805 2.555 10.04 4.309l2.266-2.336 2.984-3.039 1.488-1.54c4.016-4.068 6.862-6.359 12.637-6.46l2.21-.086c7.285 1.39 12.675 8.389 17.665 13.398l2.469 2.42 2.36 2.358 2.137 2.129c2.9 3.505 4.187 6.93 3.846 11.468-.773 5.663-4.085 8.843-8.062 12.688a2887 2887 0 0 0-4 4l2.432.011q11.408.056 22.814.173 5.863.062 11.726.087c3.78.015 7.56.05 11.34.097q2.151.022 4.302.024C484.6 70.407 495.511 72.587 505 82c6.563 8.296 7.294 16.232 7.267 26.537l.014 3.867c.012 3.536.012 7.072.01 10.608 0 3.816.01 7.632.02 11.448q.023 11.21.023 22.423.001 9.114.012 18.23.026 25.851.025 51.703v5.634c-.001 15.07.018 30.139.046 45.208q.043 23.22.04 46.438c0 8.688.006 17.376.027 26.064q.029 11.097.009 22.193c-.006 3.773-.007 7.545.01 11.317.02 4.095.007 8.19-.009 12.285l.032 3.59c-.088 10.546-2.796 18.702-10.12 26.408-8.884 7.557-18.413 9.176-29.708 9.167l-2.087.003q-3.424 0-6.85-.01l-4.939.001q-6.677-.001-13.355-.013c-4.66-.006-9.319-.006-13.978-.008q-13.223-.004-26.444-.021-15.058-.016-30.116-.022-30.964-.016-61.929-.05.542 8.238 1.117 16.473.192 2.788.375 5.577c.841 12.792 2.287 25.322 4.508 37.95l2.538.067c3.384.093 6.766.2 10.15.308 1.198.03 2.396.062 3.63.094l3.506.117 3.222.095c3.046.329 5.238.91 7.954 2.319 2.48 3.72 2.463 5.598 2 10-1.558 2.19-1.558 2.19-4 4-2.62.393-4.821.541-7.44.508l-2.278.019c-2.521.016-5.042.003-7.563-.01q-2.71.009-5.42.022c-4.91.018-9.819.011-14.728-.002-5.134-.01-10.267 0-15.401.006a8472 8472 0 0 1-25.865-.022c-9.973-.021-19.945-.014-29.918.008q-12.836.026-25.671.01c-5.113-.006-10.226-.007-15.34.006q-7.209.017-14.419-.02a663 663 0 0 0-5.297.006c-2.407.01-4.813-.003-7.22-.023l-2.126.027c-3.314-.053-5.063-.348-7.752-2.348-2.268-3.176-2.038-5.379-1.562-9.187 1.302-2.474 2.057-3.683 4.73-4.582 2.797-.515 5.505-.637 8.348-.734l3.516-.127 3.656-.12 3.703-.13q4.524-.159 9.047-.307c2.382-13.54 3.788-26.974 4.688-40.687q.195-2.834.392-5.667.471-6.822.92-13.646l-2.282.013q-10.66.06-21.32.09-5.479.015-10.959.048-5.29.032-10.582.039-2.994.01-5.99.037h-3.7l-3.25.014c-3.967-.328-6.823-1.256-9.792-3.928-1.66-3.414-1.045-5.7-.125-9.313 1.195-1.691 1.195-1.691 3-3 2.58-.376 2.58-.376 5.748-.376l3.653-.023 4.035.02q2.134-.004 4.27-.013c3.92-.013 7.841-.006 11.762.003 4.225.007 8.45-.003 12.675-.012q10.989-.018 21.977-.01c10.601.007 21.202-.005 31.804-.023q25.817-.043 51.635-.055l3.123-.001 46.977-.021 3.114-.002q25.709-.013 51.417-.058 15.859-.026 31.718-.016 10.872.005 21.744-.017c4.181-.008 8.362-.011 12.544-.001q5.745.013 11.492-.012c2.036-.004 4.072.006 6.108.016 11.155.07 11.155.07 20.817-4.85 10.877-12.628 4.81-22.19 5.387-43.549H16c-2.39 33.069-2.39 33.069 5 43 6.048 4.761 10.872 5.12 18.405 5.158l2.204.015q2.359.016 4.718.026 3.732.02 7.464.053c7.071.062 14.142.116 21.214.15q6.495.032 12.991.1 2.475.021 4.95.026c2.303.005 4.605.028 6.908.055l3.972.025c3.174.392 3.174.392 5.096 1.783 1.425 2.127 1.478 3.563 1.453 6.109l.023 2.344c-.497 2.691-1.215 3.536-3.398 5.156-3.575 1.213-7.047 1.134-10.797 1.145l-2.047.01q-3.345.013-6.691.013l-4.68.01q-4.908.009-9.817.007c-4.167 0-8.333.014-12.5.031q-4.838.015-9.675.013-2.302 0-4.603.013c-14.008.064-26.297-.303-37.23-10.062-8.122-8.538-9.554-17.785-9.468-29.205l-.019-3.88c-.016-3.528-.008-7.057.004-10.586.01-3.815-.005-7.63-.016-11.446-.018-7.464-.014-14.928-.002-22.392q.013-9.101.006-18.202l-.002-2.62-.004-5.271c-.011-16.46.002-32.919.023-49.378q.025-21.171-.003-42.342a23957 23957 0 0 1-.014-54.46l.002-2.61q.003-9.087-.012-18.176-.017-11.078.013-22.157c.01-3.766.015-7.532.001-11.298-.014-4.087.003-8.173.023-12.26l-.027-3.59C-.469 98.31.547 93.114 4 87l1.352-2.418C10.654 77.214 18.128 72.83 27 71c3.117-.278 6.217-.286 9.346-.278l2.79-.018c3.074-.017 6.147-.02 9.221-.023l6.624-.03c5.987-.028 11.974-.043 17.96-.056 6.26-.015 12.52-.042 18.779-.068q15.756-.061 31.511-.105 16.226-.045 32.45-.105l2.022-.007 10.043-.037Q209.373 70.119 251 70l-2.117-2.012-2.758-2.675-2.742-2.637c-2.778-3.12-4.18-5.698-4.606-9.852.52-6.925 3.386-10.088 8.223-14.824a1509 1509 0 0 0 3.438-3.543q1.872-1.918 3.75-3.832l1.836-1.878 1.769-1.77 1.579-1.592c3.911-3.328 7.405-3.84 12.401-3.686C278.96 22.67 284.228 30.037 289 35l3.613-1.496 4.7-1.941 2.38-.987 4.406-1.82c1.612-.641 3.255-1.207 4.901-1.756l.078-3.945q.084-2.59.172-5.18l.043-2.594C309.505 9.765 310.22 6.303 314 2c3.615-2.471 7.39-2.323 11.617-2.336M326 16c-.21 4.995-.21 4.995-.388 9.99-.242 4.646-1.119 7.967-3.612 12.01-4.38 3.819-9.21 5.147-14.707 6.848-3.517 1.23-6.716 2.792-10.043 4.465-5.533 2.584-8.426 3.76-14.25 1.687-2.147-1.542-4.048-3.176-5.945-5.016-2.557-2.468-5.325-4.709-8.055-6.984l-12 12c1.828 3.657 3.115 5.285 6 8 4.126 3.884 5.832 6.05 6.328 11.797-.115 4.305-1.586 7.69-3.578 11.453-2.826 5.613-4.952 11.053-6.535 17.164-1.668 3.55-3.766 5.8-7.215 7.586-3.303.707-6.506.788-9.875.813L233 108v19c5.698.21 5.698.21 11.397.388 4.611.212 7.897.586 11.603 3.612 3.348 5.65 5.473 11.744 7.762 17.887a62 62 0 0 0 3.55 7.426c2.133 4.135 2.286 7.054 1.688 11.687-2.797 5.595-7.522 9.718-12 14 1.587 3.903 4.134 6.335 7.125 9.25l2.758 2.703L269 196l1.285-1.102a447 447 0 0 1 3.735-3.164c1.978-1.677 1.978-1.677 3.617-3.468 3.244-3.3 5.757-4.744 10.426-5.078 6.216.332 11.068 3.07 16.425 6.007 3.357 1.726 6.525 2.865 10.137 3.93 4.499 1.396 7.047 2.551 9.375 6.875.864 2.593 1.176 4.34 1.316 7.012l.116 2.069.13 2.607L326 220h18c.21-5.324.21-5.324.388-10.649.275-5.617 1.22-10.066 5.456-14.113 2.501-1.436 4.889-2.236 7.656-3.05 4.524-1.415 8.472-3.158 12.625-5.438 5.416-2.793 9.832-3.989 15.875-2.75 5.612 2.694 9.735 7.54 14 12 4.56-3.805 8.85-7.75 13-12-1.455-3.394-3.323-5.48-6-8-4.128-3.885-5.834-6.05-6.324-11.8.115-4.274 1.543-7.645 3.512-11.387a732 732 0 0 0 1.933-3.903c.32-.648.64-1.296.968-1.964 1.873-4.002 3.3-8.173 4.77-12.337 1.118-2.557 1.958-3.91 4.141-5.609 2.66-.886 4.48-1.18 7.23-1.316l2.193-.116 2.764-.13L437 127v-19c-5.982-.13-5.982-.13-11.965-.208-4.236-.157-6.694-.594-10.426-2.76-3.323-3.861-4.695-7.543-6.234-12.344a907 907 0 0 0-1.664-4.926l-.823-2.417c-1.129-2.981-2.545-5.745-4.083-8.533-1.538-3.46-1.29-6.058-.805-9.812 2.797-5.595 7.522-9.718 12-14-1.587-3.903-4.134-6.335-7.125-9.25l-2.758-2.703L401 39l-1.285 1.102a717 717 0 0 1-3.723 3.168 88 88 0 0 0-3.734 3.43l-1.695 1.612-1.497 1.489c-3.233 1.876-6.39 2.365-10.066 2.199-3.118-.887-5.92-2.24-8.812-3.687q-2.371-1.131-4.747-2.25l-2.3-1.094c-2.777-1.257-5.617-2.22-8.516-3.157-4.143-1.436-6.4-2.867-8.625-6.812-1.238-3.714-1.356-7.313-1.562-11.187L344 16zM19.413 92.67c-3.891 5.417-4.112 10.475-4.014 16.973l-.013 3.176c-.008 3.5.019 6.998.046 10.497q.003 3.77-.002 7.54-.001 8.108.041 16.215c.041 7.814.054 15.628.06 23.442q.018 19.02.092 38.038a18422 18422 0 0 1 .106 39.242l.02 11.433c.051 31.591.14 63.183.251 94.774h15l.007-3.653a71626 71626 0 0 1 .255-96.42l.007-2.125c.036-11.355.06-22.709.081-34.063q.033-17.475.099-34.952.037-9.816.049-19.632.01-9.236.056-18.472.015-3.392.011-6.785c-.002-3.085.015-6.17.036-9.255l-.014-2.718c.075-6.634 1.335-10.847 6.163-15.675 5.526-3.825 10.893-4.499 17.508-4.528 1.044-.01 1.044-.01 2.11-.018 2.313-.017 4.626-.02 6.94-.023l4.998-.03c4.51-.028 9.02-.043 13.53-.056 4.718-.015 9.436-.042 14.153-.068q13.393-.068 26.785-.116c10.167-.039 20.333-.088 30.5-.138q31.363-.154 62.726-.273l.77-1.898 1.042-2.477 1.02-2.46C221 96 221 96 224 94c4.357-1.186 8.824-1.318 13.313-1.562l2.244-.131q2.72-.158 5.443-.307l1-5q-42.233-.141-84.465-.207-19.61-.028-39.22-.095-17.09-.06-34.182-.074c-6.033-.006-12.066-.018-18.1-.047q-8.52-.039-17.039-.03a914 914 0 0 1-6.25-.024 789 789 0 0 0-8.544-.004l-2.488-.035c-6.438.066-11.747 1.396-16.3 6.187M424 87l1 5 3.29.148 4.335.227c.713.03 1.426.062 2.16.094 5.348.294 10.112.895 14.465 4.281 2.043 2.626 2.767 5.093 3.75 8.25l3.29.297 4.335.453 2.16.188c6.255.688 10.248 2.882 14.527 7.624 2.224 3.212 2.812 5.663 2.827 9.477l.016 2.499.003 2.744.015 2.916c.016 3.238.024 6.477.032 9.715l.03 6.947q.04 9.449.068 18.898c.022 6.578.05 13.156.076 19.735q.067 16.567.124 33.136a79861 79861 0 0 0 .174 46.81q.17 43.78.323 87.561h15a51192 51192 0 0 0 .279-110.813c.021-12.31.06-24.62.107-36.93q.07-18.95.084-37.9.01-11.692.07-23.383c.03-5.979.032-11.958.026-17.937q0-3.676.03-7.353c.025-3.347.019-6.694.005-10.041l.044-2.936c-.07-6.376-1.402-10.84-5.645-15.707-6.447-5.115-13.799-4.521-21.687-4.39l-3.935.017c-3.426.015-6.851.054-10.277.098-3.507.041-7.013.06-10.519.08-6.86.042-13.721.11-20.582.195M47 123c-.294 3.07-.39 5.938-.36 9.01l-.009 2.857c-.005 3.188.012 6.377.028 9.565v6.94c-.001 6.213.016 12.426.037 18.64.017 5.823.018 11.646.02 17.47.016 17.047.058 34.095.096 51.143L47 354h418l.188-115.375.082-36.49c.01-10.752.01-10.752.016-21.504q.005-7.209.03-14.418.03-9.178.023-18.357.001-3.379.019-6.758c.014-3.03.011-6.058.003-9.088l.026-2.705c.016-2.69.016-2.69-.387-6.305-3.204-2.136-4.02-2.231-7.687-2.125l-2.45.055L453 121l-.078 2.633c-.586 11.91-.586 11.91-4.922 16.367-4.574 2.456-9.24 2.433-14.312 2.625l-2.534.117c-2.05.094-4.102.177-6.154.258q-1.44 3.562-2.875 7.125l-.816 2.016c-1.574 3.915-3.019 7.839-4.309 11.859l2.336 2.23 3.039 2.958 1.54 1.462c4.128 4.048 5.837 7.08 6.46 12.787-.852 8.099-7.985 13.443-13.5 18.875l-2.496 2.495c-7.408 7.353-7.408 7.353-13.504 7.693-5.687-.037-8.223-1.66-12.168-5.605a490 490 0 0 1-3.133-3.508c-1.368-1.56-1.368-1.56-3.574-3.387-4.855.353-9.377 2.685-13.812 4.563l-2.39.998q-2.9 1.214-5.798 2.439l-.078 3.945q-.084 2.59-.172 5.18l-.043 2.594c-.21 5.48-.822 9.096-4.707 13.281-6.539 2.714-12.968 2.33-19.937 2.313l-3.788.048c-12 .007-12 .007-17.275-3.361-3.876-4.244-3.545-9.349-3.687-14.812l-.104-2.678c-.082-2.17-.147-4.34-.209-6.51a1030 1030 0 0 0-9.25-4.062l-2.645-1.182-2.558-1.104-2.349-1.031c-2.55-.72-3.752-.593-6.198.379-2.592 2.266-2.592 2.266-5.125 5-4.15 4.334-5.984 6.165-12 6.5-5.415-.098-7.811-1.217-11.559-5.027L256 205a647 647 0 0 0-3.535-3.441c-5.164-5.03-5.164-5.03-7.488-7.352l-1.592-1.579c-2.5-2.938-3.34-5.15-3.697-9.003.572-6.643 3.804-10.487 8.5-15l2.73-2.648L253 164c-1.513-4.714-3.268-9.29-5.125-13.875l-.84-2.086Q246.02 145.52 245 143l-3.727-.113q-2.448-.099-4.898-.2l-2.45-.068c-4.963-.222-8.702-.747-12.925-3.619-2.896-3.906-3.445-7.002-3.687-11.812l-.2-3.52L217 121q-32.584-.07-65.167-.104-15.128-.014-30.257-.047-13.182-.03-26.365-.037-6.983-.003-13.966-.023a3474 3474 0 0 0-13.137-.015q-2.414 0-4.829-.012c-2.193-.01-4.385-.008-6.578-.003l-3.724-.005c-3.162.02-3.162.02-5.977 2.246m168 312c-.901 12.966-.901 12.966-1.794 25.933l-.354 5.024-.166 2.454c-.658 9.232-1.715 18.364-2.686 27.589h92l-2-19a687 687 0 0 1-.852-11.043l-.172-2.444q-.304-4.35-.601-8.7L297 435z"}),C.jsx("path",{d:"m152.813 152.563 3.853-.1c10.466-.06 10.466-.06 14.158 2.94 4.593 5.483 3.732 11.615 4.176 18.597l13 5 4.375-3.937c4.578-4.12 7.036-5.56 13.195-5.461 4.458.73 7.206 3.389 10.43 6.398l2.395 2.227C228.687 188.17 228.687 188.17 229 196c-1.832 6.297-5.225 9.585-10 14l5 13 6.625.188c8.044.585 8.044.585 11.125 3 4.61 5.762 4.589 11.679 4.563 18.75l.048 2.63c.005 6.804-.786 11.672-5.591 16.823-5.184 3.012-10.887 2.39-16.77 2.609l-5 13 3.875 3.5c4.1 4.129 5.663 6.68 6.125 12.5-2.027 6.688-6.098 10.608-11.062 15.375l-2.221 2.191c-4.818 4.717-7.379 6.948-14.268 6.926-3.838-.771-5.942-3.032-8.625-5.765-1.971-1.867-3.207-2.97-5.824-3.727-3.106.85-3.106.85-6.25 2.375l-3.266 1.46L175 316l-.043 2.852c-.438 11.439-.438 11.439-3.394 14.96-5.313 4.535-11.082 3.448-17.813 3.5l-3.723.088c-11.475.081-11.475.081-16.027-4.4-2.628-3.454-2.203-7.034-2.125-11.25l.055-3.828L132 315l-2.727-.402c-4.042-.738-7.46-2.086-11.273-3.598l-1.39 1.46-1.86 1.915-1.828 1.898c-3.732 3.353-6.714 3.965-11.727 4.188-6.144-1.29-10.689-6.646-14.945-10.961l-1.746-1.723-1.676-1.683-1.503-1.51c-2.938-3.512-3.877-6.807-3.782-11.424C78.679 287.79 83.19 283.72 87 280c-.958-2.942-1.93-5.833-3.125-8.687C83 269 83 269 83 266l-2.852.14c-11.443.332-11.443.332-14.898-1.89-5.542-5.542-4.617-11.697-4.625-19.125l-.074-3.55C60.514 230.776 60.514 230.776 65 226c3.68-2.454 6.444-2.228 10.688-2.125l2.126.027c1.73.024 3.458.06 5.186.098l.398-2.805C84 218 84 218 85.625 214.875c1.57-2.642 1.57-2.642 1.18-4.832-.997-2.53-2.307-3.775-4.305-5.606-3.404-3.131-4.367-5.032-4.812-9.75.624-7.373 6.391-12.053 11.437-17l1.918-1.916c4.797-4.75 7.384-6.283 14.281-6.263 4.768.877 7.4 4.148 10.676 7.492l3 2c2.462-.641 2.462-.641 5-1.875 4.728-2.125 4.728-2.125 8-2.125l-.14-2.852c-.332-11.44-.332-11.44 1.952-14.898 5.585-5.744 11.426-4.653 19-4.687M148 169l-.113 2.45-.2 3.238-.175 3.199c-.563 3.424-1.414 5.364-3.512 8.113-1.805 1.152-1.805 1.152-3.875 1.938-4.007 1.588-7.825 3.397-11.687 5.312-5.257 2.414-8.71 3.755-14.438 2.75-3.952-2.128-6.955-4.72-10-8-3.795 1.491-5.61 3.757-8 7l1.496 1.68 1.942 2.195 1.933 2.18c2.734 3.265 3.078 5.917 3.05 10.18-.704 4.62-2.828 8.516-4.901 12.667a59 59 0 0 0-3.145 7.723c-1.397 3.429-2.158 4.666-5.375 6.375-3.008 1.003-5.538 1.303-8.687 1.563l-3.012.253L77 240v10l2.45.113 3.237.2 3.2.175c4.48.737 7.084 2.094 9.765 5.79 1.506 3.04 2.734 6.102 3.91 9.284 1.597 4.369 1.597 4.369 3.56 8.575 1.67 3.542 1.613 7.062.878 10.863-1.68 2.978-3.758 5.433-6 8l-2 3 6 6c2.98-1.331 4.917-2.804 7.188-5.125 3.391-2.912 5.768-3.773 10.226-3.469 5.561 1.277 10.514 4.058 15.586 6.594 2.39.976 4.782 1.932 7.195 2.848 2.591 1.654 3.506 3.382 4.805 6.152.512 3.113.512 3.113.688 6.313l.199 3.238L148 321h10l.262-2.887.425-3.8.387-3.762c1.125-4.316 2.418-5.836 5.926-8.551 3.34-1.477 3.34-1.477 6.938-2.625 3.578-1.16 6.896-2.29 10.253-3.996 3.78-1.856 6.69-2.13 10.809-1.379 3.188 1.75 3.188 1.75 6 4l2.875 2.25L204 302l6-6c-1.163-2.749-2.647-4.867-4.562-7.125-3.586-4.229-3.783-6.333-3.438-11.875 1.172-3.176 1.172-3.176 2.75-6.312 2.006-4.064 3.77-8.031 5.25-12.313 1.256-3.126 1.839-4.242 4.5-6.437 5.116-1.37 10.223-1.69 15.5-1.938v-10l-2.414-.113-3.211-.2-3.164-.175c-3.828-.61-6.034-1.244-9.211-3.512-1.816-2.999-3.026-6.16-4.25-9.437q-1.006-2.562-2.016-5.122l-.868-2.29c-.832-2.17-.832-2.17-1.951-4.218-1.468-3.101-1.265-5.554-.915-8.933 2.155-3.925 4.727-6.961 8-10-1.491-3.795-3.757-5.61-7-8l-1.68 1.496-2.195 1.941-2.18 1.934c-3.202 2.682-5.557 2.925-9.73 2.87-3.762-.41-6.898-1.924-10.278-3.554l-4.035-1.863-1.961-.932c-1.915-.88-3.853-1.658-5.812-2.435C162 186 162 186 160 183c-.45-2.383-.816-4.782-1.125-7.187l-.508-3.856L158 169zM372.273 71.445c12.109 10.12 18.407 22.953 21.477 38.305 1.428 18.57-3.551 34.047-15.52 48.367-10.015 10.838-23.373 17.338-38.07 18.258-17.24.628-31.11-3.261-44.348-14.687-12.792-12.011-19.588-26.47-20.187-44.188.438-11.958 3.703-23.519 10.375-33.5 3.023-2.264 4.266-3.015 8.063-2.937C297.49 82.157 298.93 83.056 301 86c.486 4.816-.522 7.584-2.875 11.75-5.518 10.605-6.243 20.538-3.406 32.207 3.349 10.32 10.345 19.402 20.027 24.484 10.784 5.027 22.659 6.87 34.192 2.934 11.515-4.938 19.784-12.38 25.058-23.816 4.107-10.469 3.925-21.314-.121-31.809-4.948-10.699-12.016-18.375-22.95-23.07-9.58-3.305-18.491-3.369-28.425-1.868-3.776.431-4.25.353-7.625-1.874-2.209-3.46-2.712-4.92-1.875-8.938 2.435-3.456 4.792-5.211 8.813-6.312 17.858-3.096 36.036.527 50.46 11.757"}),C.jsx("path",{d:"M175.492 210.508c8.753 6.336 15.355 14.777 17.508 25.492 1.38 12.815.157 23.744-7.687 34.313-7.272 8.466-16.75 13.886-27.926 15.07-11.977.367-22.5-2.053-31.387-10.383-8.523-8.436-12.9-17.642-13.375-29.687.24-11.862 4.283-21.071 12.445-29.434 13.604-12.917 34.21-15.18 50.422-5.371m-40.367 18.242c-4.328 5.422-6.813 11.033-6.465 18.113 1.207 7.588 4.221 13.005 10.274 17.73 6.214 4.23 11.714 5.25 19.066 4.407 6.516-1.488 11.644-4.618 15.48-10.125 3.722-6.505 4.711-12.474 3.52-19.875-2.273-7.403-6.267-12.225-13-16-10.232-4.786-21.241-2.363-28.875 5.75M349.047 89.816 351 91l1.89 1.027c6.523 3.985 9.801 10.582 12.485 17.536 1.607 8.836.792 16.983-3.781 24.859C356.914 141 350.157 146.583 342 148c-10.284.977-18.329.071-27-6-5.68-4.923-10.262-12.432-11-20l-.191-1.918c-.496-9.03 2.829-17.39 8.488-24.363 9.406-9.493 24.86-12.266 36.75-5.903m-26.36 19.434c-2.168 3.534-2.997 6.65-2.687 10.75 1.29 4.416 3.305 7.338 6.625 10.5 4.593 2.041 8.427 2.274 13.375 1.5 4.869-2.164 7.265-5.083 9.363-9.855 1.086-3.656.996-6.58-.363-10.145-2.625-4.086-5.449-7.155-10-9-7.436-.72-10.89.975-16.312 6.25M245.43 385.797l2.507-.017q2.625-.014 5.25-.02c2.671-.01 5.341-.041 8.012-.072q2.553-.01 5.106-.016l2.412-.038c4.583.019 7.553.402 11.283 3.366 1.546 3.092 1.294 5.594 1 9-1.43 2.193-1.43 2.193-4 4-3.145.595-6.244.56-9.437.531l-2.78.012q-2.904.004-5.81-.022c-2.963-.02-5.924 0-8.887.026q-2.825-.004-5.649-.016l-2.683.025c-6.1-.093-6.1-.093-9.316-2.37-2.102-3.195-1.905-5.447-1.438-9.186 3.264-5.906 8.344-5.17 14.43-5.203"})]}),EE=({features:n})=>{const t=jt(i=>i.tool.showTool),e=[wE,xE,AE];return C.jsx("div",{className:`features${t?"":" d-none"}`,children:n.map(({title:i,description:r},s)=>{const a=e[s];return C.jsxs("div",{className:"feature",children:[C.jsx(a,{className:`feature-icon${s===0?" no-fill":""}`}),C.jsx("div",{className:"title",children:i}),C.jsx("p",{className:"description",children:r})]},`index-${s}`)})})},SE=({howTo:n,alt:t,imgSrc:e})=>{const i=jt(r=>r.tool.showTool);return A.useEffect(()=>{},[i]),C.jsx(C.Fragment,{children:C.jsxs("div",{className:`how-to row align-items-center py-3${i?"":" d-none"}`,children:[C.jsx("div",{className:"col-12 col-md-6 text-center image",children:C.jsxs("picture",{children:[C.jsx("source",{srcSet:`/images/${e}-xs.png`,media:"(max-width: 575px)"}),C.jsx("source",{srcSet:`/images/${e}-md.png`,media:"(min-width: 575px) and (max-width: 1200px)"}),C.jsx("source",{srcSet:`/images/${e}-xl.png`,media:"(min-width: 1200px)"}),C.jsx("img",{src:"/pdfequips.png",className:"img-fluid",alt:t,title:t})]})}),C.jsx("div",{className:"col how-to-steps",children:C.jsxs("div",{itemScope:!0,itemType:"http://schema.org/HowTo",children:[C.jsx("h2",{itemProp:"name",children:n.name}),C.jsx("p",{itemProp:"description",children:n.description}),C.jsx("ol",{itemScope:!0,itemType:"http://schema.org/HowToStep",children:n.step.map((r,s)=>C.jsxs("li",{children:[s===0?C.jsx("h3",{itemProp:"name",children:r.name}):s===1?C.jsx("h4",{className:"h3",itemProp:"name",children:r.name}):s==2?C.jsx("h6",{className:"h3",itemProp:"name",children:r.name}):C.jsx("div",{className:"h3",itemProp:"name",children:r.name}),C.jsx("p",{itemProp:"text",children:r.text})]},s))})]})})]})})},CE=Vf({reducer:{tool:om}});function IE(n){const{features:t,seoTitle:e,to:i,howTo:r}=n;return C.jsxs(xf,{store:CE,children:[C.jsx(yE,{...n}),C.jsx("div",{className:"container",children:C.jsx(EE,{features:t})}),C.jsx("div",{className:"container",children:C.jsx(SE,{howTo:r,alt:e,imgSrc:i.replace("/","")})})]})}export{IE as ToolWrapper};
